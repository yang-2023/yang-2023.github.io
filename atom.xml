<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ğŸ˜€</title>
  
  <subtitle>ä¸€äº›studyçš„è¿‡ç¨‹</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2024-03-02T03:01:00.635Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>yangyan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>goland flagæ³¨å†Œå‘½ä»¤è¡Œ</title>
    <link href="http://example.com/2024/01/22/goland-flag%E6%B3%A8%E5%86%8C%E5%91%BD%E4%BB%A4%E8%A1%8C/"/>
    <id>http://example.com/2024/01/22/goland-flag%E6%B3%A8%E5%86%8C%E5%91%BD%E4%BB%A4%E8%A1%8C/</id>
    <published>2024-01-22T06:37:38.000Z</published>
    <updated>2024-03-02T03:01:00.635Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Golang-FlagåŒ…ä½¿ç”¨ä»‹ç»"><a href="#Golang-FlagåŒ…ä½¿ç”¨ä»‹ç»" class="headerlink" title="Golang FlagåŒ…ä½¿ç”¨ä»‹ç»"></a>Golang FlagåŒ…ä½¿ç”¨ä»‹ç»</h1><p>æœ€ç®€å•çš„å‘½ä»¤ä¸éœ€è¦ä»»ä½•å‚æ•°å’Œé€‰é¡¹ï¼Œå¤æ‚ä¸€ç‚¹ï¼Œè¦æ”¯æŒå‚æ•°å’Œé€‰é¡¹çš„é…ç½®ã€‚</p><p>æ¨¡ä»¿ä¸€ä¸‹ <code>ls</code> å‘½ä»¤çš„å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ç›´æ¥å®šä¹‰ flagï¼Œè¿”å›å€¼ä¸ºæŒ‡é’ˆ</span></span><br><span class="line">all := flag.Bool(<span class="string">&quot;all&quot;</span>, <span class="literal">true</span>, <span class="string">&quot;do not ignore entries starting with .&quot;</span>)</span><br><span class="line">color := flag.String(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;omitted&quot;</span>, <span class="string">&quot;colorize the output&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥å°† flag ç»‘å®šåˆ°å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> almostAll <span class="type">bool</span></span><br><span class="line">flag.BoolVar(&amp;almostAll, <span class="string">&quot;almost-all&quot;</span>, <span class="literal">false</span>, <span class="string">&quot;do not list implied . and ..&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™¤è¿‡ä¸Šé¢çš„ Bool String è¿˜æœ‰ Int Float64 ç­‰å…¶ä»–å¸¸ç”¨ç±»å‹</span></span><br><span class="line"></span><br><span class="line">flag.Parse()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Parse åå°±å¯ä»¥è·å–åˆ°å…·ä½“å‚æ•°çš„å€¼</span></span><br><span class="line">fmt.Println(*all, *color, almostAll)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img2022.cnblogs.com/blog/1459179/202207/1459179-20220707200256072-346338494.png" alt="image-20220627175129721"></p><p>æ”¯æŒ <code>-</code> å’Œ <code>--</code> ï¼ˆæ•ˆæœæ˜¯ä¸€è‡´çš„ï¼‰ï¼Œå¯¹äºé bool ç±»å‹çš„ flag å…¶å€¼æ”¯æŒ <code>-flag=val</code> æˆ–è€… <code>-flag val</code>ã€‚</p><h2 id="é•¿çŸ­é€‰é¡¹"><a href="#é•¿çŸ­é€‰é¡¹" class="headerlink" title="é•¿çŸ­é€‰é¡¹"></a>é•¿çŸ­é€‰é¡¹</h2><p>çŸ­é€‰é¡¹ä¹¦å†™å¿«æ·ï¼Œé€‚åˆåœ¨ç»ˆç«¯ä¸‹é¢æ‰§è¡Œï¼Œè€Œé•¿é€‰é¡¹å¯è¯»æ€§é«˜ï¼Œé€‚åˆåœ¨è„šæœ¬ä¸­ä¹¦å†™ï¼Œé€šè¿‡å…±äº«ä¸€ä¸ªå˜é‡ï¼Œå³å¯è¾¾åˆ°æ­¤æ•ˆæœ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> name <span class="type">string</span></span><br><span class="line">defaultVal := <span class="string">&quot;tom&quot;</span></span><br><span class="line">useage := <span class="string">&quot;your name&quot;</span></span><br><span class="line">flag.StringVar(&amp;name, <span class="string">&quot;n&quot;</span>, defaultVal, useage+<span class="string">&quot; (shorthand)&quot;</span>)</span><br><span class="line">flag.StringVar(&amp;name, <span class="string">&quot;name&quot;</span>, defaultVal, useage)</span><br><span class="line">flag.Parse()</span><br><span class="line"></span><br><span class="line">fmt.Println(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰ç±»å‹"><a href="#è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹"></a>è‡ªå®šä¹‰ç±»å‹</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Durations []time.Duration</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Durations)</span></span> String() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprint(*d)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Durations)</span></span> Set(value <span class="type">string</span>) <span class="type">error</span> &#123;</span><br><span class="line"><span class="comment">// æ”¯æŒé€—å·åˆ†å‰²çš„å‚æ•°ï¼Œå¦‚ï¼š-d 1m,2s,1h</span></span><br><span class="line"><span class="comment">// ä¹Ÿæ”¯æŒ -d 1m -d 2s -d 1h è¿™ç§å†™æ³•</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸æƒ³ -d è¢«æŒ‡å®šå¤šæ¬¡ï¼Œå¯ä»¥åŠ ä¸Šè¿™æ®µ if é€»è¾‘</span></span><br><span class="line"><span class="comment">// if len(*d) &gt; 0 &#123;</span></span><br><span class="line"><span class="comment">// return errors.New(&quot;-d flag already set&quot;)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> strings.Split(value, <span class="string">&quot;,&quot;</span>) &#123;</span><br><span class="line">duration, err := time.ParseDuration(v)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">*d = <span class="built_in">append</span>(*d, duration)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> param Durations</span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥å£ç±»å‹ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„ Durations åªéœ€è¦å®ç° String() å’Œ Set() æ–¹æ³•å³å¯</span></span><br><span class="line">flag.Var(&amp;param, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;time duration, comma-separated list&quot;</span>)</span><br><span class="line">flag.Parse()</span><br><span class="line">fmt.Println(param)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>os.Args</code>çš„ä½œç”¨æ˜¯è·å–å’Œå¤„ç†é€šè¿‡å‘½ä»¤è¡Œä¼ é€’ç»™ç¨‹åºçš„å‚æ•°ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¾“å…¥æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><p>ä½¿ç”¨å‘½ä»¤è¡Œè°ƒç”¨å‡½æ•°é€šå¸¸æ¶‰åŠåˆ°ç¼–å†™ä¸€ä¸ªå¯æ‰§è¡Œçš„å‘½ä»¤è¡Œç¨‹åºã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ­¥éª¤ï¼š</p><ol><li><strong>å¯¼å…¥å¿…è¦çš„åŒ…</strong>ï¼šé¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥<code>os</code>å’Œ<code>flag</code>åŒ…ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºå¤„ç†æ“ä½œç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚</li><li><strong>å®šä¹‰ä¸»å‡½æ•°</strong>ï¼šåœ¨Goä¸­ï¼Œç¨‹åºçš„å…¥å£ç‚¹æ˜¯<code>main</code>å‡½æ•°ã€‚ä½ éœ€è¦å®šä¹‰ä¸€ä¸ª<code>main</code>å‡½æ•°ï¼Œå¹¶åœ¨å…¶ä¸­å¤„ç†å‘½ä»¤è¡Œå‚æ•°ã€‚</li><li><strong>è§£æå‘½ä»¤è¡Œå‚æ•°</strong>ï¼šä½¿ç”¨<code>flag</code>åŒ…æ¥å®šä¹‰å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>flag.String</code>ã€<code>flag.Int</code>ç­‰å‡½æ•°æ¥å®šä¹‰ä¸åŒç±»å‹çš„å‚æ•°ï¼Œå¹¶ä½¿ç”¨<code>flag.Parse()</code>æ¥è§£æè¿™äº›å‚æ•°ã€‚</li><li><strong>è°ƒç”¨ç›¸åº”çš„å‡½æ•°</strong>ï¼šæ ¹æ®è§£æå¾—åˆ°çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä½ å¯ä»¥è°ƒç”¨ç›¸åº”çš„å‡½æ•°æ¥æ‰§è¡Œå…·ä½“çš„æ“ä½œã€‚</li></ol><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•åœ¨Goè¯­è¨€ä¸­ä½¿ç”¨å‘½ä»¤è¡Œè°ƒç”¨å‡½æ•°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">go</span>å¤åˆ¶ä»£ç è¿è¡Œ<span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;flag&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line"><span class="keyword">var</span> name <span class="type">string</span></span><br><span class="line">flag.StringVar(&amp;name, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;Name to display&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æå‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">flag.Parse()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®è§£æå¾—åˆ°çš„å‚æ•°è°ƒç”¨ç›¸åº”çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> name != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">greet(name)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;No name provided.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(name <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;Hello, %s!</span></span><br><span class="line"><span class="string">&quot;</span>, name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>name</code>çš„å­—ç¬¦ä¸²ç±»å‹çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶ä½¿ç”¨<code>flag.StringVar</code>æ¥æŒ‡å®šå®ƒçš„åç§°ã€é»˜è®¤å€¼å’Œæè¿°ä¿¡æ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨<code>flag.Parse()</code>æ¥è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚æœ€åï¼Œæ ¹æ®è§£æå¾—åˆ°çš„å‚æ•°ï¼Œæˆ‘ä»¬è°ƒç”¨<code>greet</code>å‡½æ•°æ¥æ‰“å°é—®å€™è¯­ã€‚</p><p>è¦è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ å¯ä»¥å°†å…¶ä¿å­˜ä¸º<code>main.go</code>ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bashå¤åˆ¶ä»£ç è¿è¡Œ<span class="keyword">go</span> run main.<span class="keyword">go</span> -name <span class="string">&quot;John Doe&quot;</span></span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>è¿™å°†è¾“å‡ºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¤åˆ¶ä»£ç è¿è¡ŒHello, John Doe!</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹å’Œæ‰©å±•è¿™ä¸ªç¤ºä¾‹ï¼Œä»¥å®ç°æ›´å¤æ‚çš„å‘½ä»¤è¡Œç¨‹åºã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Golang-FlagåŒ…ä½¿ç”¨ä»‹ç»&quot;&gt;&lt;a href=&quot;#Golang-FlagåŒ…ä½¿ç”¨ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;Golang FlagåŒ…ä½¿ç”¨ä»‹ç»&quot;&gt;&lt;/a&gt;Golang FlagåŒ…ä½¿ç”¨ä»‹ç»&lt;/h1&gt;&lt;p&gt;æœ€ç®€å•çš„å‘½ä»¤ä¸éœ€è¦ä»»ä½•å‚æ•°å’Œ</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>githubè½¬gitee</title>
    <link href="http://example.com/2024/01/21/github%E8%BD%ACgitee/"/>
    <id>http://example.com/2024/01/21/github%E8%BD%ACgitee/</id>
    <published>2024-01-21T05:28:54.000Z</published>
    <updated>2024-02-02T05:38:03.294Z</updated>
    
    <content type="html"><![CDATA[<p>githubè½¬giteeè®²çœŸçš„ä½“éªŒçœŸçš„ä¸å¥½ï¼Œå…ˆæ˜¯ä¸¤å¤©çš„èº«ä»½è®¤è¯æ…¢çš„ä¸€æ‰¹ç„¶åå°±æ˜¯æ¯æ¬¡æ›´æ–°å†…å®¹éƒ½è¦è¿›ç½‘é¡µé‡æ–°åˆ›å»ºä¸€ä¸‹é™æ€ç½‘ç«™ï¼Œè€Œä¸”ä¸»é¢˜ä¹Ÿå¥½ä¼¼ä¸å…¼å®¹ï¼Ÿåˆ›å»ºçš„æ—¶å€™è¿˜æœ‰ä»€ä¹ˆç£ç›˜å†…å­˜ä¸å¤Ÿçš„æŠ¥é”™ï¼Œæœäº†åŠå¤©ä¹Ÿæ²¡æœ‰è§£å†³åŠæ³•ï¼Œå¥½å¤šè¿˜æœ‰è¿ç¦è¯çš„æç¤ºï¼ŒçœŸçš„å¾ˆé¸¡è‚‹ä¸€æƒ³åˆ°è¿™ä¹ˆéº»çƒ¦æˆ‘è¿˜æ˜¯ç”¨githubå¥½ç‚¹ï¼Œé¡¶å¤šå¡ä¸€ç‚¹çš„äº‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;githubè½¬giteeè®²çœŸçš„ä½“éªŒçœŸçš„ä¸å¥½ï¼Œå…ˆæ˜¯ä¸¤å¤©çš„èº«ä»½è®¤è¯æ…¢çš„ä¸€æ‰¹ç„¶åå°±æ˜¯æ¯æ¬¡æ›´æ–°å†…å®¹éƒ½è¦è¿›ç½‘é¡µé‡æ–°åˆ›å»ºä¸€ä¸‹é™æ€ç½‘ç«™ï¼Œè€Œä¸”ä¸»é¢˜ä¹Ÿå¥½ä¼¼ä¸å…¼å®¹ï¼Ÿåˆ›å»ºçš„æ—¶å€™è¿˜æœ‰ä»€ä¹ˆç£ç›˜å†…å­˜ä¸å¤Ÿçš„æŠ¥é”™ï¼Œæœäº†åŠå¤©ä¹Ÿæ²¡æœ‰è§£å†³åŠæ³•ï¼Œå¥½å¤šè¿˜æœ‰è¿ç¦è¯çš„æç¤ºï¼ŒçœŸçš„å¾ˆé¸¡è‚‹ä¸€æƒ³åˆ°è¿™ä¹ˆéº»çƒ¦æˆ‘è¿˜æ˜¯ç”¨githubå¥½</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>åŒºå—é“¾çš„å­˜å‚¨è¯»å–å’Œç®¡ç†</title>
    <link href="http://example.com/2024/01/18/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%AD%98%E5%82%A8%E8%AF%BB%E5%8F%96%E5%92%8C%E7%AE%A1%E7%90%86/"/>
    <id>http://example.com/2024/01/18/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%AD%98%E5%82%A8%E8%AF%BB%E5%8F%96%E5%92%8C%E7%AE%A1%E7%90%86/</id>
    <published>2024-01-18T01:15:49.000Z</published>
    <updated>2024-03-02T01:54:26.571Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚"><a href="#Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚" class="headerlink" title="Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚"></a>Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚</h3><p>ä¹‹å‰äº†è§£çš„åŸºæœ¬ç»“æ„ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒè¯•éƒ½è¦åˆ›å»ºï¼Œé‡æ„åŒºå—é“¾ï¼Œä½†æ˜¯åŒºå—é“¾å¹¶æ²¡æœ‰çš„åˆ°ä¿å­˜ï¼Œè¿™ä¸å®é™…çš„åŒºå—é“¾ç³»ç»Ÿä¸ç¬¦ï¼Œä¼´éšæˆ‘ä»¬æ‰©å±•æˆ‘ä»¬çš„åŒºå—é“¾ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„åŠŸèƒ½ç®¡ç†æ¨¡å—æ¥æ“ä½œã€‚</p><h4 id="Badgeré”®å€¼å¯¹æ•°æ®åº“"><a href="#Badgeré”®å€¼å¯¹æ•°æ®åº“" class="headerlink" title="Badgeré”®å€¼å¯¹æ•°æ®åº“"></a>Badgeré”®å€¼å¯¹æ•°æ®åº“</h4><p>å¯¹äºåŒºå—é“¾çš„å‚¨å­˜ï¼Œä¸€ç§æƒ³æ³•æ˜¯åºåˆ—åŒ–ï¼Œç„¶åç”¨æ¯ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ä½œä¸ºæ–‡ä»¶åå‚¨å­˜åœ¨ç£ç›˜ä¸Šï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬é¢‘ç¹çš„å¯¹å·²ç»å­˜å‚¨çš„åŒºå—è¿›è¡ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬ç”¨æ•°æ®åº“æ–¹å¼å­˜å‚¨ç®¡ç†åŒºå—ã€‚</p><p>Badgeræ˜¯<a href="https://link.zhihu.com/?target=https://dgraph.io/">dgraph.io</a>å¼€å‘çš„ä¸€æ¬¾åŸºäº Log Structured Merge (LSM) Tree çš„ key-value æœ¬åœ°æ•°æ®åº“ï¼Œä»€ä¹ˆé”®å€¼å¯¹å¯¹åº”å­˜å‚¨å¯¹åº”åŒºå—é“¾çš„å­˜å‚¨è¿˜æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚</p><p><em>éå¸¸è®©äººéš¾ä»¥æ¥å—å°±æ˜¯å‰å‡ å¤©å†™å¥½çš„ä¸œè¥¿ï¼Œå…³æœºå¿˜äº†ä¿å­˜äº†ï¼Œéƒ½å¾—é‡æ–°å†™ï¼Œåˆä¸èƒ½å› ä¸ºå·²ç»å­¦äº†ä¸€ç‚¹äº†å°±å†™çš„å”çªï¼Œæƒ³æ­»ã€‚</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/dgraph-io/badger</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ˜¯å®‰è£…çš„å‘½ä»¤ï¼Œå®‰è£…è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ä½†æ˜¯ä¸çŸ¥é“ä¹‹å‰çš„ç‰ˆæœ¬ä¸ºä»€ä¹ˆå®‰è£…ä¸äº†ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬æœ‰ç‚¹è€äº†å§ï¼Œç„¶åæ¢äº†ä¸ªæœ€æ–°ç‰ˆçš„ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚</p><h4 id="å­˜å‚¨åœ°å€è®¾å®š"><a href="#å­˜å‚¨åœ°å€è®¾å®š" class="headerlink" title="å­˜å‚¨åœ°å€è®¾å®š"></a>å­˜å‚¨åœ°å€è®¾å®š</h4><p>åˆ›å»ºä¸€ä¸ªtmpæ–‡ä»¶å¤¹ï¼Œå°±ç”¨æ¥å‚¨å­˜æˆ‘ä»¬å°†è¦å­˜å‚¨çš„åŒºå—é“¾äº†ã€‚</p><p>æ‰“å¼€constcoe.goè®¾å®šä¸€äº›å…¨å±€å˜é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TransactionPoolFile = <span class="string">&quot;./tmp/transaction_pool.data&quot;</span> <span class="comment">//ç¼“å†²æ± å­˜æ”¾äº¤æ˜“ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> BCPath = <span class="string">&quot;./tmp/blocks&quot;</span></span><br><span class="line"><span class="keyword">const</span> BCFile = <span class="string">&quot;./tmp/blocks/MANIFEST&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªæ˜¯æ–°çš„ï¼Œè€Œä¸”è¿™é‡Œå½“æ—¶ä¹Ÿå‡ºé—®é¢˜äº†ï¼Œé—®é¢˜å°±å‡ºåœ¨ä¸‹æ–‡éªŒè¯åŒºå—é“¾å­˜ä¸å­˜åœ¨çš„ä»£ç é‡Œï¼Œå› ä¸ºè·¯å¾„é”™äº†å†™æˆäº†.tmpç„¶åä¸€ç›´å°±æ˜¯éªŒè¯æ–‡ä»¶ä¸å­˜åœ¨&#x3D; &#x3D;ã€‚æˆ‘è¿˜å»æœäº†æ˜¯ä¸æ˜¯æƒé™çš„é—®é¢˜æˆ–è€…å…¶ä»–çš„ä¸œè¥¿éƒ½å ç”¨äº†ï¼Œæœç„¶ä»£ç è¿™ä¸œè¥¿å·®ä¹‹æ¯«å˜å¤±ä¹‹åƒé‡Œäº†ã€‚</p><p>BCPathä¸BCFileéƒ½æ˜¯æŒ‡å‘çš„æˆ‘ä»¬å³å°†åˆ›å»ºçš„åŒºå—é“¾æ•°æ®åº“çš„ç›¸å…³åœ°å€ã€‚</p><p>util.goä¸­å¢åŠ ä¸€ä¸ªæ£€æŸ¥æ–‡ä»¶åœ°å€ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨çš„å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FileExists</span><span class="params">(fileAddr <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> _, err := os.Stat(fileAddr); os.IsNotExist(err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>statæ˜¯è·å–æ–‡ä»¶ä¿¡æ¯çš„ï¼Œä¸å­˜åœ¨å°±è¿”å›é”™è¯¯ï¼Œç„¶ååè¾¹çš„isnotexistå°±æ˜¯æ£€è½¦é”™è¯¯æ˜¯ä¸æ˜¯ä»£è¡¨æ–‡ä»¶ä¸å­˜åœ¨äº†ã€‚</p><h4 id="åŒºå—æ”¹åŠ¨"><a href="#åŒºå—æ”¹åŠ¨" class="headerlink" title="åŒºå—æ”¹åŠ¨"></a>åŒºå—æ”¹åŠ¨</h4><p>å¥¥å¯¹äº†ï¼Œå°±æ˜¯æˆ‘å†™çš„ä»£ç éƒ½æ²¡æœ‰å¼•å…¥åº“å› ä¸ºè½¯ä»¶è‡ªå·±å°±ç»™æˆ‘æ•´äº†ï¼Œä¸è¿‡ç”¨æœ€åŸºæœ¬çš„é‚£ä¸ªå¥½åƒè¦æ‰‹å†™å¼•å…¥çš„åº“çš„ã€‚</p><p>é¦–å…ˆæ˜¯åˆ›å§‹åŒºå—çš„æ„å»ºå‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ä»–ç°åœ¨å¯ä»¥æ›´åŠ ä¸ªæ€§åŒ–ä¸€ç‚¹ï¼Œè®©åˆ›å§‹äº¤æ˜“ä¿¡æ¯æŒ‡å‘æˆ‘ä»¬æä¾›çš„åœ°å€ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//block.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GenesisBlock</span><span class="params">(address []<span class="type">byte</span>)</span></span> *Block &#123;</span><br><span class="line">tx := transaaction.BaseTx(address)<span class="comment">//åˆå§‹äº¤æ˜“</span></span><br><span class="line">genesis := CreateBlock([]<span class="type">byte</span>(<span class="string">&quot;YY&quot;</span>), []*transaction.Transaction&#123;tx&#125;)</span><br><span class="line">genesis.SetHash()</span><br><span class="line"><span class="keyword">return</span> genesis</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬çš„createblockå‡½æ•°æ˜¯è¦ç”¨ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå’Œè¿™ä¸ªåŒºå—æ•°æ®çš„ï¼Œåˆ›ä¸–åŒºå—æ²¡æœ‰ä¸Šä¸€ä¸ªåŒºå—ï¼Œå“ˆå¸Œå°±å¯ä»¥éšä¾¿å®šä¹‰äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//block.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> Serialize() []<span class="type">byte</span> &#123;</span><br><span class="line"><span class="keyword">var</span> res bytes.Buffer<span class="comment">//å­—èŠ‚ç¼“å†²åŒº</span></span><br><span class="line">encoder := gob.NewEncoder(&amp;res)<span class="comment">//ç¼–ç å™¨</span></span><br><span class="line">err := encoder.Encode(b)<span class="comment">//å†™å…¥ç¼“å†²åŒº</span></span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span> res.Bytes()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DeSerializeBlock</span><span class="params">(data []<span class="type">byte</span>)</span></span> *Block &#123;</span><br><span class="line"><span class="keyword">var</span> block Block</span><br><span class="line">decoder := gob.NewDecoder(bytes.NewReader(data))</span><br><span class="line">err := decoder.Decode(&amp;block)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span> &amp;block</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¸¤ä¸ªå‡½æ•°ç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œæ•°æ®åº“åªèƒ½æ”¯æŒå­—èŠ‚ä¸²çš„å­˜å‚¨å½¢å¼ã€‚</p><h4 id="åŒºå—é“¾ç»“æ„ä½“é‡æ„"><a href="#åŒºå—é“¾ç»“æ„ä½“é‡æ„" class="headerlink" title="åŒºå—é“¾ç»“æ„ä½“é‡æ„"></a>åŒºå—é“¾ç»“æ„ä½“é‡æ„</h4><p>ä¹‹å‰æˆ‘ä»¬çš„åŒºå—é“¾ç»“æ„ä½“æ˜¯åŒºå—ç»„æˆçš„åˆ‡ç‰‡ï¼Œç°åœ¨æˆ‘ä»¬çš„åŒºå—å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åŒºå—é“¾ç»“æ„ä½“åº”è¯¥æŒ‡å‘å­˜å‚¨åŒºå—çš„æ•°æ®åº“ï¼Œé‡æ„æˆ‘ä»¬çš„ç»“æ„ä½“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="keyword">type</span> BlockChain <span class="keyword">struct</span> &#123;</span><br><span class="line">LastHash []<span class="type">byte</span></span><br><span class="line">Database *badger.DB</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LastHashå±æ€§æ˜¯æŒ‡å½“å‰åŒºå—é“¾æœ€åä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œå®ƒå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¯ä»¥é¿å…æˆ‘ä»¬åœ¨åé¢çš„å‡½æ•°ç¼–å†™ä¸­æ¯æ¬¡éƒ½å»æ•°æ®åº“ä¸­æŸ¥æ‰¾LastHashã€‚</p><p>ç„¶åæˆ‘ä»¬æ›´æ”¹æ‰æˆ‘ä»¬çš„CreateBlockChainï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åˆ›å»ºä¸€ä¸ªåŒºå—é“¾ç„¶åè¿”å›åŒºå—é“¾çš„æŒ‡é’ˆçš„ï¼Œæˆ‘ä»¬è¦å®ç°åŒºå—é“¾çš„åˆ›å»ºå­˜å‚¨å’Œè¯»å–ï¼Œå°±è¦åˆ æ‰è¿™ä¸ªäº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitBlockChain</span><span class="params">(address []<span class="type">byte</span>)</span></span> *BlockChain &#123;</span><br><span class="line"><span class="keyword">var</span> lastHash []<span class="type">byte</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> utils.FileExists(constcoe.BCFile) &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;blockchain already exists&quot;</span>)</span><br><span class="line">runtime.Goexit()<span class="comment">//å®‰å…¨é€€å‡º</span></span><br><span class="line">&#125;<span class="comment">//éªŒè¯æ˜¯ä¸æ˜¯å·²ç»åˆ›å»ºäº†åŒºå—é“¾äº†</span></span><br><span class="line"></span><br><span class="line">opts := badger.DefaultOptions(constcoe.BCPath)<span class="comment">//è¿”å›ä¸€ä¸ªç»“æ„ä½“å°±å¯ä»¥ç”¨æ¥æ“ä½œäº†</span></span><br><span class="line">opts.Logger = <span class="literal">nil</span><span class="comment">//æ“ä½œä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">db, err := badger.Open(opts)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line">err = db.Update(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">genesis := GenesisBlock(address)<span class="comment">//åˆ›å»ºåˆ›ä¸–åŒºå—</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Genesis Created&quot;</span>)</span><br><span class="line">err = txn.Set(genesis.Hash, genesis.Serialize())<span class="comment">//å“ˆå¸Œå€¼å’Œåºåˆ—åŒ–åçš„æ•°æ®</span></span><br><span class="line">utils.Handle(err)</span><br><span class="line">err = txn.Set([]<span class="type">byte</span>(<span class="string">&quot;lh&quot;</span>), genesis.Hash) <span class="comment">//store the hash of the block in blockchain</span></span><br><span class="line">utils.Handle(err)</span><br><span class="line">err = txn.Set([]<span class="type">byte</span>(<span class="string">&quot;ogprevhash&quot;</span>), genesis.PrevHash) <span class="comment">//store the prevhash of genesis(original) block</span></span><br><span class="line">utils.Handle(err)</span><br><span class="line">lastHash = genesis.Hash</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line">blockchain := BlockChain&#123;lastHash, db&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;blockchain</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>updateæŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(db *DB)</span></span> Update(fn <span class="function"><span class="keyword">func</span><span class="params">(txn *Txn)</span></span> <span class="type">error</span>) <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">if</span> db.opt.managedTxns &#123;</span><br><span class="line"><span class="built_in">panic</span>(<span class="string">&quot;Update can only be used with managedDB=false.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">txn := db.NewTransaction(<span class="literal">true</span>)<span class="comment">//æŠŠå¼•å…¥çš„å€¼txnä½œä¸ºä¸€ä¸ªäº‹åŠ¡è¿™æ ·ä½ æ‰å¯ä»¥åœ¨updateå†…éƒ¨çš„å‡½æ•°è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚</span></span><br><span class="line"><span class="keyword">defer</span> txn.Discard()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := fn(txn); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> txn.Commit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨æœŸæœ›èƒ½å¤Ÿé€šè¿‡å·²æœ‰çš„æ•°æ®åº“è¯»å–å¹¶åŠ è½½æˆ‘ä»¬çš„åŒºå—é“¾ï¼Œè¿™å°±éœ€è¦æ„å»ºContinueBlockChainå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ContinueBlockChain</span><span class="params">()</span></span> *BlockChain &#123;</span><br><span class="line">    <span class="keyword">if</span> utils.FileExists(constcoe.BCFile) == <span class="literal">false</span> &#123;</span><br><span class="line">       fmt.Println(<span class="string">&quot;No blockchain found, please create one first&quot;</span>)</span><br><span class="line">       runtime.Goexit()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> lastHash []<span class="type">byte</span></span><br><span class="line"></span><br><span class="line">    opts := badger.DefaultOptions(constcoe.BCPath)</span><br><span class="line">    opts.Logger = <span class="literal">nil</span></span><br><span class="line">    db, err := badger.Open(opts)</span><br><span class="line">    utils.Handle(err)</span><br><span class="line"><span class="comment">//è¿™ä¸Šè¾¹è·Ÿä¸Šè¾¹ä¸€æ ·</span></span><br><span class="line">    <span class="comment">//viewè°ƒå–è§†å›¾</span></span><br><span class="line">    err = db.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">       item, err := txn.Get([]<span class="type">byte</span>(<span class="string">&quot;lh&quot;</span>))<span class="comment">//è·å–lhå¯¹åº”çš„æœ€ååŒºå—çš„å€¼ï¼Œgetè·å–é”®å€¼å¯¹</span></span><br><span class="line">       utils.Handle(err)<span class="comment">//å¤„ç†é”™è¯¯</span></span><br><span class="line">       err = item.Value(<span class="function"><span class="keyword">func</span><span class="params">(val []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">          lastHash = val</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">       &#125;)<span class="comment">//è¿™ä¸€æ­¥ä½œç”¨å°±æ˜¯æå–è¿™ä¸ªitemé‡Œçš„å€¼ï¼Œå› ä¸ºitemæ˜¯ä¸€ä¸ªåŒ…æ‹¬é”®å’Œå€¼çš„ç±»å‹ã€‚</span></span><br><span class="line">       utils.Handle(err)</span><br><span class="line">       <span class="keyword">return</span> err</span><br><span class="line">    &#125;)</span><br><span class="line">    utils.Handle(err)</span><br><span class="line"></span><br><span class="line">    chain := BlockChain&#123;lastHash, db&#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;chain</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦å°†ä¸€ä¸ªåŒºå—åŠ å…¥åˆ°åŒºå—é“¾ä¸­ï¼Œå°±éœ€è¦é€šè¿‡æ•°æ®åº“æ¥å®Œæˆã€‚ä¿®æ”¹AddBlockå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> AddBlock(newBlock *Block) &#123;</span><br><span class="line"><span class="keyword">var</span> lastHash []<span class="type">byte</span></span><br><span class="line"><span class="comment">//è·å–ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼</span></span><br><span class="line">err := bc.Database.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">item, err := txn.Get([]<span class="type">byte</span>(<span class="string">&quot;lh&quot;</span>))</span><br><span class="line">utils.Handle(err)</span><br><span class="line">err = item.Value(<span class="function"><span class="keyword">func</span><span class="params">(val []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">lastHash = val</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">if</span> !bytes.Equal(newBlock.PrevHash, lastHash) &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;This block is out of age&quot;</span>)</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;<span class="comment">//åˆ¤æ–­æ–°åŒºå¿«å’Œä¸Šä¸ªåŒºå—å“ˆå¸Œå€¼æ˜¯å¦å¯¹åº”</span></span><br><span class="line"></span><br><span class="line">err = bc.Database.Update(<span class="function"><span class="keyword">func</span><span class="params">(transaction *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">err := transaction.Set(newBlock.Hash, newBlock.Serialize())</span><br><span class="line">utils.Handle(err)</span><br><span class="line">err = transaction.Set([]<span class="type">byte</span>(<span class="string">&quot;lh&quot;</span>), newBlock.Hash)</span><br><span class="line">bc.LastHash = newBlock.Hash<span class="comment">//å°†bc.LastHashè®¾ç½®ä¸ºæ–°åŒºå—çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŒºå—é“¾çš„éå†"><a href="#åŒºå—é“¾çš„éå†" class="headerlink" title="åŒºå—é“¾çš„éå†"></a>åŒºå—é“¾çš„éå†</h4><p>å°½ç®¡æ‹¥æœ‰ContinueBlockChainå‡½æ•°åæˆ‘ä»¬å®ç°äº†å¯¹åŒºå—é“¾çš„åŠ è½½ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°å¯¹äºåŒºå—é“¾çš„éå†ä¸åƒä¹‹å‰é‚£ä¹ˆæ–¹ä¾¿äº†ï¼ŒFindUnspentTransactionså‡½æ•°ä¸€æ—¶ä¸çŸ¥å¦‚ä½•ä¿®æ”¹ã€‚è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŸºäºåŒºå—çš„è¿­ä»£å™¨æ¥å®ç°åŒºå—é“¾çš„éå†ã€‚åœ¨blockchain.goä¸­åˆ›å»ºç»“æ„ä½“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="keyword">type</span> BlockChainIterator <span class="keyword">struct</span> &#123;</span><br><span class="line">CurrentHash []<span class="type">byte</span></span><br><span class="line">Database    *badger.DB</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¿­ä»£å™¨çš„åˆå§‹åŒ–å‡½æ•°,åœ¨åˆå§‹åŒ–æ—¶ï¼Œå°†é“¾çš„æœ€åä¸€ä¸ªå“ˆå¸Œå€¼å’Œæ•°æ®åº“å®ä¾‹ä¼ é€’ç»™è¿­ä»£å™¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(chain *BlockChain)</span></span> Iterator() *BlockChainIterator &#123;</span><br><span class="line">iterator := BlockChainIterator&#123;chain.LastHash, chain.Database&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;iterator</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¿­ä»£å™¨çš„è¿­ä»£å‡½æ•°ï¼Œè®©æ¯æ¬¡è¿­ä»£è¿”å›ä¸€ä¸ªblockï¼Œç„¶åè¿­ä»£å™¨æŒ‡å‘å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(iterator *BlockChainIterator)</span></span> Next() *Block &#123;</span><br><span class="line"><span class="keyword">var</span> block *Block</span><br><span class="line"></span><br><span class="line">err := iterator.Database.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">item, err := txn.Get(iterator.CurrentHash)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line">err = item.Value(<span class="function"><span class="keyword">func</span><span class="params">(val []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">block = DeSerializeBlock(val)<span class="comment">//ååºåˆ—åŒ–æˆä¸ºä¸€ä¸ªåŒºå—å¯¹è±¡</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line">iterator.CurrentHash = block.PrevHash</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥å¸®åŠ©åˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦ç»ˆæ­¢ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(chain *BlockChain)</span></span> BackOgPrevHash() []<span class="type">byte</span> &#123;</span><br><span class="line"><span class="keyword">var</span> ogprevhash []<span class="type">byte</span></span><br><span class="line">err := chain.Database.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">item, err := txn.Get([]<span class="type">byte</span>(<span class="string">&quot;ogprevhash&quot;</span>))</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line">err = item.Value(<span class="function"><span class="keyword">func</span><span class="params">(val []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">ogprevhash = val</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ogprevhash</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ¯”è¾ƒè¿­ä»£å™¨çš„CurrentHashä¸æ•°æ®åº“å­˜å‚¨çš„OgPrevHashæ˜¯å¦ç›¸ç­‰å°±èƒ½å¤Ÿåˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦å·²ç»è¿­ä»£åˆ°åˆ›å§‹åŒºå—ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¿®æ”¹FindUnspentTransactionså‡½æ•°äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//blockchain.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> FindUnspentTransactions(address []<span class="type">byte</span>) []transaction.Transaction &#123;</span><br><span class="line"><span class="keyword">var</span> unSpentTxs []transaaction.Transaction</span><br><span class="line">spentTxs := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>][]<span class="type">int</span>) <span class="comment">// can&#x27;t use type []byte as key value</span></span><br><span class="line"></span><br><span class="line">iter := bc.Iterator()</span><br><span class="line"></span><br><span class="line">all:</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">block := iter.Next()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, tx := <span class="keyword">range</span> block.Transactions &#123;</span><br><span class="line">txID := hex.EncodeToString(tx.ID)</span><br><span class="line"></span><br><span class="line">IterOutputs:</span><br><span class="line"><span class="keyword">for</span> outIdx, out := <span class="keyword">range</span> tx.Outputs &#123;</span><br><span class="line"><span class="keyword">if</span> spentTxs[txID] != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, spentOut := <span class="keyword">range</span> spentTxs[txID] &#123;</span><br><span class="line"><span class="keyword">if</span> spentOut == outIdx &#123;</span><br><span class="line"><span class="keyword">continue</span> IterOutputs</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> out.ToAddressRight(address) &#123;</span><br><span class="line">unSpentTxs = <span class="built_in">append</span>(unSpentTxs, *tx)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !tx.IsBase() &#123;</span><br><span class="line"><span class="keyword">for</span> _, in := <span class="keyword">range</span> tx.Inputs &#123;</span><br><span class="line"><span class="keyword">if</span> in.FromAddressRight(address) &#123;</span><br><span class="line">inTxID := hex.EncodeToString(in.TxID)</span><br><span class="line">spentTxs[inTxID] = <span class="built_in">append</span>(spentTxs[inTxID], in.OutIdx)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> bytes.Equal(block.PrevHash, bc.BackOgPrevHash()) &#123;</span><br><span class="line"><span class="keyword">break</span> all</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> unSpentTxs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹‹å‰è®²è¿‡äº†ï¼Œè¿˜æ˜¯å¾ˆéš¾ç†è§£çš„ï¼Œè¿˜æœ‰é‚£ä¸ªè¿­ä»£å™¨&#x3D; &#x3D;ã€‚</p><h4 id="äº¤æ˜“ä¿¡æ¯æ± "><a href="#äº¤æ˜“ä¿¡æ¯æ± " class="headerlink" title="äº¤æ˜“ä¿¡æ¯æ± "></a>äº¤æ˜“ä¿¡æ¯æ± </h4><p>æˆ‘ä»¬æ˜¯ä¸€ä¸ªåŒºå—å†…è£…å¥½å¤šäº¤æ˜“ä¿¡æ¯ï¼Œæ”¾åœ¨ä¸€ä¸ªäº¤æ˜“ä¿¡æ¯æ± ä¸­ï¼Œå½“å‚¨å­˜çš„ä¿¡æ¯è¾¾åˆ°ä¸€å®šé‡å°±è¿›è¡ŒæŒ–çŸ¿æ“ä½œï¼ŒæŠŠèŠ‚ç‚¹åŠ å…¥åŒºå—é“¾ã€‚</p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäº¤æ˜“ä¿¡æ¯æ± çš„ç»“æ„ä½“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//transactionpool.go</span></span><br><span class="line"><span class="keyword">type</span> TransactionPool <span class="keyword">struct</span> &#123;</span><br><span class="line">PubTx []*transaction.Transaction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PubTxç”¨äºå‚¨å­˜èŠ‚ç‚¹æ”¶é›†åˆ°çš„äº¤æ˜“ä¿¡æ¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//transactionpool.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(tp *TransactionPool)</span></span> AddTransaction(tx *transaction.Transaction) &#123;</span><br><span class="line">tp.PubTx = <span class="built_in">append</span>(tp.PubTx, tx)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¸Œæœ›å­˜å‚¨æˆ‘ä»¬æ–°æ”¶é›†åˆ°çš„äº¤æ˜“ä¿¡æ¯ï¼Œå°±éœ€è¦èƒ½å¤Ÿä¿å­˜æˆ‘ä»¬çš„äº¤æ˜“ä¿¡æ¯æ± è¿™ä¸€ç»“æ„ä½“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//transactionpool.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(tp *TransactionPool)</span></span> SaveFile() &#123;</span><br><span class="line"><span class="keyword">var</span> content bytes.Buffer</span><br><span class="line">encoder := gob.NewEncoder(&amp;content)</span><br><span class="line">err := encoder.Encode(tp)</span><br><span class="line">utils.Handle(err)</span><br><span class="line">err = ioutil.WriteFile(constcoe.TransactionPoolFile, content.Bytes(), <span class="number">0644</span>)</span><br><span class="line">utils.Handle(err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡éƒ½å°†äº¤æ˜“ä¿¡æ¯æ± ä¿å­˜åˆ°constcoe.TransactionPoolFileè¿™ä¸ªåœ°å€ä¸­ã€‚0644æ˜¯æŒ‡å…«è¿›åˆ¶çš„644ï¼ˆ110ï¼Œ100ï¼Œ100ï¼‰ï¼ŒæŒ‡æ˜äº†ä¸åŒç”¨æˆ·å¯¹æ–‡ä»¶è¯»å†™æ‰§è¡Œçš„æƒé™ã€‚</p><p>åŠ è½½æˆ‘ä»¬çš„äº¤æ˜“ä¿¡æ¯æ± ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(tp *TransactionPool)</span></span> LoadFile() <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">if</span> !utils.FileExists(constcoe.TransactionPoolFile) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;<span class="comment">//æ£€è½¦æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> transactionPool TransactionPool</span><br><span class="line"></span><br><span class="line">fileContent, err := ioutil.ReadFile(constcoe.TransactionPoolFile)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯»å–</span></span><br><span class="line">decoder := gob.NewDecoder(bytes.NewBuffer(fileContent))<span class="comment">//å­—èŠ‚ç¼“å†²åŒºç„¶åè§£ç </span></span><br><span class="line">err = decoder.Decode(&amp;transactionPool)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tp.PubTx = transactionPool.PubTx</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨CreateTransactionPoolå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæˆ–è€…åŠ è½½ä¸€ä¸ªäº¤æ˜“ä¿¡æ¯æ± äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateTransactionPool</span><span class="params">()</span></span> *TransactionPool &#123;</span><br><span class="line">transactionPool := TransactionPool&#123;&#125;</span><br><span class="line">err := transactionPool.LoadFile()</span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span> &amp;transactionPool</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åè€ƒè™‘å½“èŠ‚ç‚¹åœ¨mineåéœ€è¦æ¸…ç©ºäº¤æ˜“ä¿¡æ¯æ± ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä»¥ä¸‹å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//transactionpool.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RemoveTransactionPoolFile</span><span class="params">()</span></span> <span class="type">error</span> &#123;</span><br><span class="line">err := os.Remove(constcoe.TransactionPoolFile)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤constcoe.TransactionPoolFileï¼Œå³å¯å®ç°äº¤æ˜“ä¿¡æ¯æ± çš„æ¸…ç©ºã€‚</p><h4 id="æŒ–çŸ¿Mine"><a href="#æŒ–çŸ¿Mine" class="headerlink" title="æŒ–çŸ¿Mine"></a>æŒ–çŸ¿Mine</h4><p>powæœºåˆ¶ç”¨æ¥æŒ–çŸ¿ï¼Œæˆ‘ä»¬å°†åŸblockchain.goä¸‹çš„Mineå‡½æ•°åˆ é™¤ï¼Œåœ¨blockchainæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºmine.goæ–‡ä»¶ï¼Œå¹¶åˆ›å»ºRunMineå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> RunMine() &#123;</span><br><span class="line">transactionPool := CreateTransactionPool()<span class="comment">//äº¤æ˜“æ± å¯¹è±¡ã€‚</span></span><br><span class="line">candidateBlock := CreateBlock(bc.LastHash, transactionPool.PubTx) </span><br><span class="line">    <span class="comment">//å°†åŒºå—é“¾æœ€åçš„å“ˆå¸Œå€¼å’Œäº¤æ˜“åƒä¸­çš„å…¬å…±äº¤æ˜“æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºå—å¯¹è±¡ï¼Œ</span></span><br><span class="line">    <span class="comment">//éªŒè¯éšæœºæ•°é‚£ä¸ªå·¥ä½œé‡è¯æ˜æœºåˆ¶æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="keyword">if</span> candidateBlock.ValidatePoW() &#123;</span><br><span class="line">bc.AddBlock(candidateBlock)</span><br><span class="line">err := RemoveTransactionPoolFile()</span><br><span class="line">utils.Handle(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Block has invalid nonce.&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬çœç•¥äº†éªŒè¯è¿‡ç¨‹ã€‚</p><h4 id="å‘½ä»¤è¡ŒCommand-Line"><a href="#å‘½ä»¤è¡ŒCommand-Line" class="headerlink" title="å‘½ä»¤è¡ŒCommand Line"></a>å‘½ä»¤è¡ŒCommand Line</h4><p>ä½¿æˆ‘ä»¬çš„åŒºå—é“¾ç³»ç»Ÿè¿ä½œçš„æ›´åƒä¸€ä¸ªç³»ç»Ÿè€Œéä¸€ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬æœŸæœ›å®ç°ä¸€ä¸ªå‘½ä»¤è¡Œï¼ˆCommand Lineï¼‰æ¨¡å—ï¼Œé€šè¿‡è¯¥æ¨¡å—æ¥ç®¡ç†æˆ‘ä»¬çš„åŒºå—é“¾ç³»ç»Ÿã€‚</p><p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹cliï¼Œç„¶ååœ¨cliä¸‹åˆ›å»ºcli.goæ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºç»“æ„ä½“æ¥è¡¨å¾æˆ‘ä»¬çš„å‘½ä»¤è¡Œã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="keyword">type</span> CommandLine <span class="keyword">struct</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ˜¯æ¥å£ç±»å‹ç„¶åæ–¹ä¾¿è°ƒç”¨å§ã€‚</p><p>å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºä¸çŸ¥é“åšä»€ä¹ˆæ—¶ï¼Œå‘½ä»¤è¡Œç¨‹åºé¦–å…ˆåº”æ‰“å°æ‰€æœ‰çš„å‘½ä»¤åŠå…¶ç”¨æ³•ã€‚æˆ‘ä»¬åˆ›å»ºprintUsageå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> printUsage() &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Welcome to Leo Cao&#x27;s tiny blockchain system, usage is as follows:&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;--------------------------------------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;All you need is to first create a blockchain and declare the owner.&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;And then you can make transactions.&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;--------------------------------------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;createblockchain -address ADDRESS                   ----&gt; Creates a blockchain with the owner you input&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;balance -address ADDRESS                            ----&gt; Back the balance of the address you input&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;blockchaininfo                                      ----&gt; Prints the blocks in the chain&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;send -from FROADDRESS -to TOADDRESS -amount AMOUNT  ----&gt; Make a transaction and put it into candidate block&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;mine                                                ----&gt; Mine and add a block to the chain&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;--------------------------------------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç°åœ¨çš„å‘½ä»¤è¡Œå°†ç®¡ç†å®ç°äº”ç§åŠŸèƒ½ã€‚createblockchainå‘½ä»¤ä¼šè¯»å–ä¸€ä¸ªåœ°å€ï¼Œç„¶åä»¥è¯¥åœ°å€åˆ›å»ºåˆ›å§‹äº¤æ˜“ä¿¡æ¯ä¸åˆ›å§‹åŒºå—å®ŒæˆåŒºå—é“¾çš„åˆå§‹åŒ–ã€‚balanceå‘½ä»¤è¯»å–ä¸€ä¸ªåœ°å€ï¼Œç„¶ååœ¨åŒºå—é“¾ä¸­æ‰¾åˆ°è¯¥åœ°å€çš„UTXOå¹¶ç»Ÿè®¡å‡ºå…¶ä½™é¢ã€‚blockchaininfoå°†ä¼šæ‰“å°åŒºå—é“¾ä¸­çš„æ‰€æœ‰åŒºå—ã€‚sendå‘½ä»¤å¯ä»¥äº§ç”Ÿä¸€ä¸ªäº¤æ˜“ä¿¡æ¯å¹¶å°†è¯¥äº¤æ˜“ä¿¡æ¯å­˜å‚¨åˆ°äº¤æ˜“ä¿¡æ¯æ± ä¸­ã€‚mineå‘½ä»¤æ¨¡æ‹ŸæŒ–çŸ¿è¿‡ç¨‹ï¼Œå°†äº¤æ˜“ä¿¡æ¯æ± ä¸­çš„äº¤æ˜“æ‰“åŒ…æˆåŒºå—åŠ å…¥åŒºå—é“¾ä¸­ã€‚</p><p>é¦–å…ˆæ˜¯createblockchainï¼Œè°ƒç”¨åœ¨blockchain.goä¸­ç¼–å†™çš„InitBlockChainå‡½æ•°å³å¯å®ç°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> createBlockChain(address <span class="type">string</span>) &#123;</span><br><span class="line">newChain := blockchain.InitBlockChain([]<span class="type">byte</span>(address))</span><br><span class="line">newChain.Database.Close()<span class="comment">//å…³é—­çš„</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Finished creating blockchain, and the owner is: &quot;</span>, address)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°balanceåŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨ContinueBlockChainå‡½æ•°æ¥å…¥æ•°æ®åº“ï¼Œç„¶åä½¿ç”¨FindUTXOå‡½æ•°ç»Ÿè®¡ä½™é¢å¹¶æ‰“å°ã€‚æ³¨æ„æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†goè¯­è¨€çš„deferå…³é”®å­—ï¼Œå…¶åçš„ä»£ç å°†ä¼šåœ¨å‡½æ•°è¿è¡Œç»“æŸå‰æœ€åæ‰§è¡Œ(å‹˜è¯¯ï¼šå‡†ç¡®æ¥è¯´æ˜¯åœ¨returnå…³é”®å­—åæ‰§è¡Œ)ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€åå°†å…³é—­æ•°æ®åº“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> getBlockChainInfo() &#123;</span><br><span class="line">chain := blockchain.ContinueBlockChain()</span><br><span class="line"><span class="keyword">defer</span> chain.Database.Close()</span><br><span class="line">iterator := chain.Iterator()<span class="comment">//è¿­ä»£å™¨</span></span><br><span class="line">ogprevhash := chain.BackOgPrevHash()</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">block := iterator.Next()</span><br><span class="line">fmt.Println(<span class="string">&quot;--------------------------------------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Timestamp:%d\n&quot;</span>, block.Timestamp)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Previous hash:%x\n&quot;</span>, block.PrevHash)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Transactions:%v\n&quot;</span>, block.Transactions)</span><br><span class="line">fmt.Printf(<span class="string">&quot;hash:%x\n&quot;</span>, block.Hash)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Pow: %s\n&quot;</span>, strconv.FormatBool(block.ValidatePoW()))</span><br><span class="line">fmt.Println(<span class="string">&quot;--------------------------------------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">fmt.Println()</span><br><span class="line"><span class="keyword">if</span> bytes.Equal(block.PrevHash, ogprevhash) &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sendå‘½ä»¤å°†ä¼šè°ƒç”¨CreateTransactionå‡½æ•°ï¼Œå¹¶å°†åˆ›å»ºçš„äº¤æ˜“ä¿¡æ¯ä¿å­˜åˆ°äº¤æ˜“ä¿¡æ¯æ± ä¸­ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> send(from, to <span class="type">string</span>, amount <span class="type">int</span>) &#123;</span><br><span class="line">chain := blockchain.ContinueBlockChain()</span><br><span class="line"><span class="keyword">defer</span> chain.Database.Close()</span><br><span class="line">tx, ok := chain.CreateTransaction([]<span class="type">byte</span>(from), []<span class="type">byte</span>(to), amount)</span><br><span class="line"><span class="keyword">if</span> !ok &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Failed to create transaction&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">tp := blockchain.CreateTransactionPool()</span><br><span class="line">tp.AddTransaction(tx)</span><br><span class="line">tp.SaveFile()</span><br><span class="line">fmt.Println(<span class="string">&quot;Success!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ–çŸ¿å°±åªéœ€è¦runmineå°±å¯ä»¥å®ç°äº†ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨goè¯­è¨€è‡ªå¸¦çš„flagåº“å°†å„ä¸ªå‘½ä»¤æ³¨å†Œå°±è¡Œäº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cli.go</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> validateArgs() &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &lt; <span class="number">2</span> &#123;</span><br><span class="line">cli.printUsage()</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cli *CommandLine)</span></span> Run() &#123;</span><br><span class="line">cli.validateArgs()</span><br><span class="line"></span><br><span class="line">createBlockChainCmd := flag.NewFlagSet(<span class="string">&quot;createblockchain&quot;</span>, flag.ExitOnError)</span><br><span class="line">balanceCmd := flag.NewFlagSet(<span class="string">&quot;balance&quot;</span>, flag.ExitOnError)</span><br><span class="line">getBlockChainInfoCmd := flag.NewFlagSet(<span class="string">&quot;blockchaininfo&quot;</span>, flag.ExitOnError)</span><br><span class="line">sendCmd := flag.NewFlagSet(<span class="string">&quot;send&quot;</span>, flag.ExitOnError)</span><br><span class="line">mineCmd := flag.NewFlagSet(<span class="string">&quot;mine&quot;</span>, flag.ExitOnError)</span><br><span class="line"></span><br><span class="line">createBlockChainOwner := createBlockChainCmd.String(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;The address refer to the owner of blockchain&quot;</span>)</span><br><span class="line">balanceAddress := balanceCmd.String(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;Who need to get balance amount&quot;</span>)</span><br><span class="line">sendFromAddress := sendCmd.String(<span class="string">&quot;from&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;Source address&quot;</span>)</span><br><span class="line">sendToAddress := sendCmd.String(<span class="string">&quot;to&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;Destination address&quot;</span>)</span><br><span class="line">sendAmount := sendCmd.Int(<span class="string">&quot;amount&quot;</span>, <span class="number">0</span>, <span class="string">&quot;Amount to send&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> os.Args[<span class="number">1</span>] &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;createblockchain&quot;</span>:</span><br><span class="line">err := createBlockChainCmd.Parse(os.Args[<span class="number">2</span>:])</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;balance&quot;</span>:</span><br><span class="line">err := balanceCmd.Parse(os.Args[<span class="number">2</span>:])</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;blockchaininfo&quot;</span>:</span><br><span class="line">err := getBlockChainInfoCmd.Parse(os.Args[<span class="number">2</span>:])</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;send&quot;</span>:</span><br><span class="line">err := sendCmd.Parse(os.Args[<span class="number">2</span>:])</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;mine&quot;</span>:</span><br><span class="line">err := mineCmd.Parse(os.Args[<span class="number">2</span>:])</span><br><span class="line">utils.Handle(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cli.printUsage()</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> createBlockChainCmd.Parsed() &#123;</span><br><span class="line"><span class="keyword">if</span> *createBlockChainOwner == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">createBlockChainCmd.Usage()</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;</span><br><span class="line">cli.createBlockChain(*createBlockChainOwner)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> balanceCmd.Parsed() &#123;</span><br><span class="line"><span class="keyword">if</span> *balanceAddress == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">balanceCmd.Usage()</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;</span><br><span class="line">cli.balance(*balanceAddress)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> sendCmd.Parsed() &#123;</span><br><span class="line"><span class="keyword">if</span> *sendFromAddress == <span class="string">&quot;&quot;</span> || *sendToAddress == <span class="string">&quot;&quot;</span> || *sendAmount &lt;= <span class="number">0</span> &#123;</span><br><span class="line">sendCmd.Usage()</span><br><span class="line">runtime.Goexit()</span><br><span class="line">&#125;</span><br><span class="line">cli.send(*sendFromAddress, *sendToAddress, *sendAmount)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> getBlockChainInfoCmd.Parsed() &#123;</span><br><span class="line">cli.getBlockChainInfo()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> mineCmd.Parsed() &#123;</span><br><span class="line">cli.mine()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚&quot;&gt;&lt;a href=&quot;#Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚&quot; class=&quot;headerlink&quot; title=&quot;Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚&quot;&gt;&lt;/a&gt;Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚&lt;/h3&gt;&lt;p&gt;ä¹‹å‰äº†è§£çš„åŸº</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•</title>
    <link href="http://example.com/2023/12/18/%E7%AE%97%E6%B3%95/"/>
    <id>http://example.com/2023/12/18/%E7%AE%97%E6%B3%95/</id>
    <published>2023-12-18T11:27:53.000Z</published>
    <updated>2024-01-11T06:44:18.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-P1000-è¶…çº§ç›ä¸½æ¸¸æˆ"><a href="#1-P1000-è¶…çº§ç›ä¸½æ¸¸æˆ" class="headerlink" title="1.P1000 è¶…çº§ç›ä¸½æ¸¸æˆ"></a>1.P1000 è¶…çº§ç›ä¸½æ¸¸æˆ</h1><p><a href="https://www.luogu.com.cn/problem/P1000">P1000 è¶…çº§ç›ä¸½æ¸¸æˆ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;                ********\n               ************\n               ####....#.\n             #..###.....##....\n             ###.......######              ###            ###\n                ...........               #...#          #...#\n               ##*#######                 #.#.#          #.#.#\n            ####*******######             #.#.#          #.#.#\n           ...#***.****.*###....          #...#          #...#\n           ....**********##.....           ###            ###\n           ....****    *****....\n             ####        ####\n           ######        ######\n##############################################################\n#...#......#.##...#......#.##...#......#.##------------------#\n###########################################------------------#\n#..#....#....##..#....#....##..#....#....#####################\n##########################################    #----------#\n#.....#......##.....#......##.....#......#    #----------#\n##########################################    #----------#\n#.#..#....#..##.#..#....#..##.#..#....#..#    #----------#\n##########################################    ############&quot;</span>)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-P1001-A-B-Problem"><a href="#2-P1001-A-B-Problem" class="headerlink" title="2.P1001 A+B Problem"></a>2.P1001 A+B Problem</h1><p><a href="https://www.luogu.com.cn/problem/P1001">P1001 A+B Problem - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">int</span></span><br><span class="line">_,_=fmt.Scanln(&amp;a,&amp;b)</span><br><span class="line"><span class="keyword">var</span> sum = a+b</span><br><span class="line">fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-P4327-COCI2006-2007-1-Okviri"><a href="#3-P4327-COCI2006-2007-1-Okviri" class="headerlink" title="3.P4327 [COCI2006-2007#1] Okviri"></a>3.P4327 [COCI2006-2007#1] Okviri</h1><p>[P4327 <a href="https://www.luogu.com.cn/problem/P4327">COCI2006-2007#1] Okviri - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">   <span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> input <span class="type">string</span></span><br><span class="line">   fmt.Scan(&amp;input)</span><br><span class="line">   input = strings.ToUpper(input)</span><br><span class="line">   <span class="keyword">for</span> g, _ := <span class="keyword">range</span> input &#123;</span><br><span class="line"></span><br><span class="line">      fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">      <span class="keyword">if</span> (g+<span class="number">1</span>)%<span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">         fmt.Print(<span class="string">&quot;.*.&quot;</span>)</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Print(<span class="string">&quot;.#.&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">   fmt.Println(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">   <span class="keyword">for</span> g, _ := <span class="keyword">range</span> input &#123;</span><br><span class="line">      <span class="keyword">if</span> (g+<span class="number">1</span>)%<span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">         fmt.Print(<span class="string">&quot;*.*.&quot;</span>)</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Print(<span class="string">&quot;#.#.&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   fmt.Print(<span class="string">&quot;#&quot;</span>)</span><br><span class="line">   <span class="keyword">for</span> g, va := <span class="keyword">range</span> input &#123;</span><br><span class="line">      <span class="keyword">if</span> (g+<span class="number">2</span>)%<span class="number">3</span> == <span class="number">0</span> || (g+<span class="number">1</span>)%<span class="number">3</span>==<span class="number">0</span>&#123;</span><br><span class="line">         <span class="keyword">if</span> g+<span class="number">1</span>==<span class="built_in">len</span>(input)&amp;&amp;(g+<span class="number">1</span>)%<span class="number">3</span>!=<span class="number">0</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;.%c.#&quot;</span>, va)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">         &#125;</span><br><span class="line">         fmt.Printf(<span class="string">&quot;.%c.*&quot;</span>, va)</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;.%c.#&quot;</span>,va)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   fmt.Println(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">   <span class="keyword">for</span> g, _ := <span class="keyword">range</span> input &#123;</span><br><span class="line">      <span class="keyword">if</span> (g+<span class="number">1</span>)%<span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">         fmt.Print(<span class="string">&quot;*.*.&quot;</span>)</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Print(<span class="string">&quot;#.#.&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   <span class="keyword">for</span> g, _ := <span class="keyword">range</span> input &#123;</span><br><span class="line"></span><br><span class="line">      fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">      <span class="keyword">if</span> (g+<span class="number">1</span>)%<span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">         fmt.Print(<span class="string">&quot;.*.&quot;</span>)</span><br><span class="line">         <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Print(<span class="string">&quot;.#.&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Print(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœŸçš„éº»çƒ¦å•Šæˆ‘è¶…ï¼Œå·®ç‚¹æ²¡æ­»äº†ï¼Œä¸è¿‡å°±æ˜¯æ§åˆ¶è¯­å¥çš„å……åˆ†åˆ©ç”¨ï¼ŒæˆåŠŸäº†å°±è§‰å¾—å…¶å®æ²¡ä»€ä¹ˆéš¾åº¦äº†ğŸ˜¶ã€‚</p><h1 id="4-P1003-NOIP2011-æé«˜ç»„-é“ºåœ°æ¯¯"><a href="#4-P1003-NOIP2011-æé«˜ç»„-é“ºåœ°æ¯¯" class="headerlink" title="4.P1003 [NOIP2011 æé«˜ç»„] é“ºåœ°æ¯¯"></a>4.P1003 [NOIP2011 æé«˜ç»„] é“ºåœ°æ¯¯</h1><p>[P1003 <a href="https://www.luogu.com.cn/problem/P1003">NOIP2011 æé«˜ç»„] é“ºåœ°æ¯¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (<span class="string">&quot;fmt&quot;</span>)</span><br><span class="line"><span class="keyword">type</span> di <span class="keyword">struct</span> &#123;ditans []*ditan&#125;<span class="comment">//è¿™é‡Œå®šä¹‰çš„æ˜¯æ•°ç»„ç±»å‹çš„ç»“æ„ä½“åµŒå¥—ï¼Ÿ</span></span><br><span class="line"><span class="keyword">type</span> ditan <span class="keyword">struct</span> &#123;</span><br><span class="line">   a <span class="type">int</span></span><br><span class="line">   b <span class="type">int</span></span><br><span class="line">   g <span class="type">int</span></span><br><span class="line">   k <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">creatditan</span><span class="params">(a,b,g,k <span class="type">int</span>)</span></span> *ditan &#123;</span><br><span class="line">    ditan:=ditan&#123;a,b,g,k&#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;ditan</span><br><span class="line">&#125;<span class="comment">//è¾“å…¥æ•°æ®è¾“å‡ºä¸€ä¸ªditanç±»å‹çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dit *di)</span></span>addditan(a,b,g,k <span class="type">int</span>)&#123;newditan:=creatditan(a,b,g,k)</span><br><span class="line">dit.ditans=<span class="built_in">append</span>(dit.ditans,newditan)</span><br><span class="line">&#125;<span class="comment">//æŠŠditanåŠ åˆ°dié‡Œï¼Œå°±å¯ä»¥æ•°ç»„è°ƒç”¨äº†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> (</span><br><span class="line">   n <span class="type">int</span></span><br><span class="line">   l <span class="type">int</span></span><br><span class="line">   a, b, g, k <span class="type">int</span></span><br><span class="line">   )</span><br><span class="line">   fmt.Scan(&amp;n)</span><br><span class="line">   <span class="keyword">var</span> newditan di</span><br><span class="line">   <span class="keyword">for</span> l = <span class="number">0</span>; l &lt; n; l++ &#123;fmt.Scan(&amp;a, &amp;b, &amp;g, &amp;k)</span><br><span class="line">   newditan.addditan(a, b, g, k)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">var</span> (x,y <span class="type">int</span>)</span><br><span class="line">    fmt.Scan(&amp;x,&amp;y)</span><br><span class="line">   <span class="keyword">var</span> q = <span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> num,bb:=<span class="keyword">range</span> newditan.ditans&#123;</span><br><span class="line">      <span class="keyword">if</span> (x&gt;=bb.a || x&lt;=(bb.g+bb.a))||(y&gt;=bb.b || y&lt;=(bb.k+bb.b))&#123;</span><br><span class="line">         q+=<span class="number">1</span></span><br><span class="line">         fmt.Print(n-num)</span><br><span class="line">         <span class="keyword">break</span>&#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> q==<span class="number">0</span> &#123;fmt.Print(<span class="number">-1</span>)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå¯¹ç»“æ„ä½“åµŒå¥—çš„é‚£ä¸ªç®—ä¸ªæ‰©å±•ï¼Œå®é™…ä¸‹è¾¹çš„æ–¹æ³•å¯¹äºåˆ‡ç‰‡çš„ä½¿ç”¨æ›´åˆé€‚ã€‚</p><p>è¿˜æœ‰ç¬¬äºŒä¸ªæ–¹æ³•</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Carpet <span class="keyword">struct</span> &#123;</span><br><span class="line">x1, y1, x2, y2 <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> x,y <span class="type">int</span></span><br><span class="line">n := <span class="number">0</span></span><br><span class="line">fmt.Scan(&amp;n)</span><br><span class="line">carpets := <span class="built_in">make</span>([]Carpet, n)<span class="comment">//è¿™é‡Œå¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªæ•°ç»„ç±»å‹çš„ç»“æ„ä½“ã€‚æ¯”ä¸Šè¾¹æ–¹ä¾¿å¤šäº†</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">fmt.Scan(&amp;carpets[i].x1, &amp;carpets[i].y1, &amp;carpets[i].x2, &amp;carpets[i].y2)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Scan(&amp;x, &amp;y)</span><br><span class="line"></span><br><span class="line">maxCovered := <span class="number">-1</span></span><br><span class="line">covered := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> i := n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line"><span class="keyword">if</span> x &gt;= carpets[i].x1 &amp;&amp; x &lt;= (carpets[i].x2+carpets[i].x1) &amp;&amp; y &gt;= carpets[i].y1 &amp;&amp; y &lt;= (carpets[i].y2+carpets[i].y1) &#123;</span><br><span class="line">covered = <span class="literal">true</span></span><br><span class="line">maxCovered = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> covered &#123;</span><br><span class="line">fmt.Println(maxCovered)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹è¾¹çš„æ–¹æ³•æ›´ç®€å•ï¼Œå› ä¸ºä¸Šè¾¹çš„æ˜¯æˆ‘ä»åŒºå—é“¾å­¦çš„ï¼Œå¿˜äº†æ€ä¹ˆæ•´è¿™ä¸ªåˆ‡ç‰‡äº†ğŸ˜”ã€‚</p><h1 id="5-P1035-NOIP2002-æ™®åŠç»„-çº§æ•°æ±‚å’Œ"><a href="#5-P1035-NOIP2002-æ™®åŠç»„-çº§æ•°æ±‚å’Œ" class="headerlink" title="5.P1035 [NOIP2002 æ™®åŠç»„] çº§æ•°æ±‚å’Œ"></a>5.P1035 [NOIP2002 æ™®åŠç»„] çº§æ•°æ±‚å’Œ</h1><p>[P1035 <a href="https://www.luogu.com.cn/problem/P1035">NOIP2002 æ™®åŠç»„] çº§æ•°æ±‚å’Œ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> k <span class="type">float64</span></span><br><span class="line">    <span class="keyword">var</span> num <span class="type">float64</span></span><br><span class="line">    <span class="keyword">var</span> n <span class="type">float64</span> = <span class="number">1</span></span><br><span class="line">    fmt.Scan(&amp;k)</span><br><span class="line">    <span class="keyword">for</span> ; ; n++ &#123;</span><br><span class="line">       num += (<span class="number">1</span> / n)</span><br><span class="line">       <span class="keyword">if</span> num &gt; k &#123;</span><br><span class="line">          fmt.Println(n)</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é“é¢˜å¾ˆç®€å•å•Šï¼Œé”™è¯¯ç‚¹å°±æ˜¯ä¼šä¸€ç›´å¾ªç¯è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å®šä¹‰çš„æ•°æ®ç±»å‹æ˜¯æ•´å½¢æ•°æ®ï¼Œæ”¹æˆæµ®ç‚¹å‹å°±å¥½äº†ã€‚</p><h1 id="6-P1046-NOIP2005-æ™®åŠç»„-é™¶é™¶æ‘˜è‹¹æœ"><a href="#6-P1046-NOIP2005-æ™®åŠç»„-é™¶é™¶æ‘˜è‹¹æœ" class="headerlink" title="6.P1046 [NOIP2005 æ™®åŠç»„] é™¶é™¶æ‘˜è‹¹æœ"></a>6.P1046 [NOIP2005 æ™®åŠç»„] é™¶é™¶æ‘˜è‹¹æœ</h1><p>[P1046 <a href="https://www.luogu.com.cn/problem/P1046">NOIP2005 æ™®åŠç»„] é™¶é™¶æ‘˜è‹¹æœ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x1, x2, x3, x4, x5, x6, x7, x8, x9, x10 <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;x1, &amp;x2, &amp;x3, &amp;x4, &amp;x5, &amp;x6, &amp;x7, &amp;x8, &amp;x9, &amp;x10)</span><br><span class="line">    a := []<span class="type">int</span>&#123;x1, x2, x3, x4, x5, x6, x7, x8, x9, x10&#125;</span><br><span class="line">    <span class="keyword">var</span> high <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> n <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;high)</span><br><span class="line">    <span class="keyword">for</span> _, h := <span class="keyword">range</span> a &#123;</span><br><span class="line">       <span class="keyword">if</span> high &gt;= h &#123;</span><br><span class="line">          n++</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> high+<span class="number">30</span> &gt;= h &#123;</span><br><span class="line">          n++</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Print(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆç®€å•çš„ä¸€é¢˜ï¼Œæ²¡ä»€ä¹ˆå¼ºè°ƒçš„ã€‚</p><h1 id="7-P1047-NOIP2005-æ™®åŠç»„-æ ¡é—¨å¤–çš„æ ‘"><a href="#7-P1047-NOIP2005-æ™®åŠç»„-æ ¡é—¨å¤–çš„æ ‘" class="headerlink" title="7.P1047 [NOIP2005 æ™®åŠç»„] æ ¡é—¨å¤–çš„æ ‘"></a>7.P1047 [NOIP2005 æ™®åŠç»„] æ ¡é—¨å¤–çš„æ ‘</h1><p>[P1047 <a href="https://www.luogu.com.cn/problem/P1047">NOIP2005 æ™®åŠç»„] æ ¡é—¨å¤–çš„æ ‘ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> l, m <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;l, &amp;m)</span><br><span class="line">    <span class="keyword">var</span> a, b <span class="type">int</span></span><br><span class="line">    list := <span class="built_in">make</span>([]<span class="type">int</span>, l+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> ; m &gt; <span class="number">0</span>; m-- &#123;</span><br><span class="line">       a = <span class="number">0</span></span><br><span class="line">       b = <span class="number">0</span></span><br><span class="line">       fmt.Scan(&amp;a, &amp;b)</span><br><span class="line">       <span class="keyword">for</span> ; a &lt;= b; a++ &#123;</span><br><span class="line">          list[a] = <span class="number">1</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> num <span class="type">int</span></span><br><span class="line">    <span class="keyword">for</span> _, n := <span class="keyword">range</span> list &#123;</span><br><span class="line">       num += n</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Print(l + <span class="number">1</span> - num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é“é¢˜å¦‚æœç”¨é‚£ç§åˆ’åˆ†èŒƒå›´çš„æ¯”å¤§å°å¤ªéº»çƒ¦äº†ï¼Œè¿™ç§ç”¨åˆ‡ç‰‡çš„æ–¹æ³•å¥½åƒæ›´å¥½ä¸€ç‚¹ã€‚</p><p>è¿™é“é¢˜å‡ºç°ä¸€ä¸ªé”™è¯¯å°±æ˜¯å®šä¹‰liståˆ‡ç‰‡é‚£ä¸€è¡Œï¼Œä¸ç„¶æ ‘æœ¨æ€»æ•°ä¸ä¸€æ ·ã€‚å› ä¸ºå®¹é‡æ˜¯ä»1å¼€å§‹çš„å¦‚æœä¸åŠ 1çš„è¯å°±å°‘ä¸€ä¸ªäº†ã€‚</p><h1 id="8-P1075-NOIP2012-æ™®åŠç»„-è´¨å› æ•°åˆ†è§£"><a href="#8-P1075-NOIP2012-æ™®åŠç»„-è´¨å› æ•°åˆ†è§£" class="headerlink" title="8.P1075 [NOIP2012 æ™®åŠç»„] è´¨å› æ•°åˆ†è§£"></a>8.P1075 [NOIP2012 æ™®åŠç»„] è´¨å› æ•°åˆ†è§£</h1><p>[P1075 <a href="https://www.luogu.com.cn/problem/P1075">NOIP2012 æ™®åŠç»„] è´¨å› æ•°åˆ†è§£ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p>å‚»æ–¹æ³•ä½†æ˜¯è¶…æ—¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zhishu</span><span class="params">(int2 <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> int2 &lt;= <span class="number">1</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">2</span>; i &lt; int2; i++ &#123;</span><br><span class="line">       <span class="keyword">if</span> int2%i == <span class="number">0</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxzhishu</span><span class="params">(int2 <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">bool</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> n := int2; n &gt;= <span class="number">0</span>; n-- &#123;</span><br><span class="line">       <span class="keyword">if</span> zhishu(n) &#123;</span><br><span class="line">          <span class="keyword">if</span> int2%n == <span class="number">0</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> zhishu(int2 / n) &#123;</span><br><span class="line">                <span class="keyword">return</span> n, <span class="literal">true</span></span><br><span class="line">             &#125;</span><br><span class="line">          &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> num <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;num)</span><br><span class="line">    num, <span class="type">bool</span> := maxzhishu(num)</span><br><span class="line">    <span class="keyword">if</span> <span class="type">bool</span> &#123;</span><br><span class="line">       fmt.Print(num)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äºŒè§£ï¼Œå…¶å®æˆ‘è§‰å¾—ä»–è¿™ä¸ªä¸å¤ªåˆé€‚è¿™ä¸ªé¢˜ã€‚å¯èƒ½é¢˜ç›®æœ‰é—®é¢˜ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n, i <span class="type">int64</span></span><br><span class="line">    fmt.Scan(&amp;n)</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">2</span>; i &lt;= n; i++ &#123;</span><br><span class="line">       <span class="keyword">if</span> n%i == <span class="number">0</span> &#123;</span><br><span class="line">          fmt.Println(n / i)</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="9-P1085-NOIP2004-æ™®åŠç»„-ä¸é«˜å…´çš„æ´¥æ´¥"><a href="#9-P1085-NOIP2004-æ™®åŠç»„-ä¸é«˜å…´çš„æ´¥æ´¥" class="headerlink" title="9.P1085 [NOIP2004 æ™®åŠç»„] ä¸é«˜å…´çš„æ´¥æ´¥"></a>9.P1085 [NOIP2004 æ™®åŠç»„] ä¸é«˜å…´çš„æ´¥æ´¥</h1><p>[P1085 <a href="https://www.luogu.com.cn/problem/P1085">NOIP2004 æ™®åŠç»„] ä¸é«˜å…´çš„æ´¥æ´¥ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a, b, num <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> n []<span class="type">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">7</span>; i++ &#123;</span><br><span class="line">       fmt.Scan(&amp;a, &amp;b)</span><br><span class="line">       num = a + b</span><br><span class="line">       n = <span class="built_in">append</span>(n, num)</span><br><span class="line">    &#125;</span><br><span class="line">    max := <span class="number">8</span></span><br><span class="line">    xingqi := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> we, time := <span class="keyword">range</span> n &#123;</span><br><span class="line">       <span class="keyword">if</span> time &gt; max &#123;</span><br><span class="line">          max = time</span><br><span class="line">          xingqi = we + <span class="number">1</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> max &gt; <span class="number">8</span> &#123;</span><br><span class="line">       fmt.Print(xingqi)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       fmt.Print(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ¯”è¾ƒå¤§å°ï¼Œæ²¡æœ‰éš¾åº¦ã€‚</p><h1 id="10-P1089-NOIP2004-æé«˜ç»„-æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’"><a href="#10-P1089-NOIP2004-æé«˜ç»„-æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’" class="headerlink" title="10.P1089 [NOIP2004 æé«˜ç»„] æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’"></a>10.P1089 [NOIP2004 æé«˜ç»„] æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’</h1><p>[P1089 <a href="https://www.luogu.com.cn/problem/P1089">NOIP2004 æé«˜ç»„] æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> money <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> lost <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> a [<span class="number">12</span>]<span class="type">int</span></span><br><span class="line">    i := <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> ; i &lt;= <span class="number">12</span>; i++ &#123;</span><br><span class="line">       fmt.Scan(&amp;money)</span><br><span class="line">       lost = lost + <span class="number">300</span> - money</span><br><span class="line">       <span class="keyword">if</span> lost &gt;= <span class="number">100</span> &#123;</span><br><span class="line">          sum += lost - lost%<span class="number">100</span></span><br><span class="line">          lost = lost % <span class="number">100</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> lost &lt; <span class="number">0</span> &#123;</span><br><span class="line">          a[i] = <span class="number">1</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    q := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> w, nu := <span class="keyword">range</span> a &#123;</span><br><span class="line">       <span class="keyword">if</span> nu == <span class="number">1</span> &#123;</span><br><span class="line">          fmt.Print(-w)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> nu == <span class="number">0</span> &#123;</span><br><span class="line">          q++</span><br><span class="line">          <span class="keyword">if</span> q == <span class="number">12</span> &#123;</span><br><span class="line">             <span class="keyword">var</span> over1 <span class="type">float64</span> = <span class="type">float64</span>(lost)</span><br><span class="line">             <span class="keyword">var</span> over <span class="type">float64</span> = <span class="type">float64</span>(sum)</span><br><span class="line">             fmt.Print(<span class="number">1.2</span>*over + over1)</span><br><span class="line">          &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡ç‚¹åœ¨ç±»å‹è½¬æ¢å’Œæœ€åè¦åŠ ä¸Š12æœˆæ²¡ç”¨å®Œçš„é’±å‘¢ã€‚</p><h1 id="11-P1150-Peter-çš„çƒŸ"><a href="#11-P1150-Peter-çš„çƒŸ" class="headerlink" title="11.P1150 Peter çš„çƒŸ"></a>11.P1150 Peter çš„çƒŸ</h1><p><a href="https://www.luogu.com.cn/problem/P1150">P1150 Peter çš„çƒŸ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n, k <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;n, &amp;k)</span><br><span class="line">    <span class="keyword">var</span> sum <span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> l, o <span class="type">int</span></span><br><span class="line">    o = n</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> o &lt; k &#123;</span><br><span class="line">          o += l</span><br><span class="line">          l = <span class="number">0</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> o &lt; k &#123;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> o &gt;= k &#123;</span><br><span class="line">          o -= k</span><br><span class="line">          l++</span><br><span class="line">          sum++</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Print(n + sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ²¡éš¾åº¦ï¼Œå°±æ˜¯æœ‰ç‚¹ç»•å¼¯ã€‚</p><h1 id="12-P1151-å­æ•°æ•´æ•°"><a href="#12-P1151-å­æ•°æ•´æ•°" class="headerlink" title="12.P1151 å­æ•°æ•´æ•°"></a>12.P1151 å­æ•°æ•´æ•°</h1><p><a href="https://www.luogu.com.cn/problem/P1151#submit">P1151 å­æ•°æ•´æ•° - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> k <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;k)</span><br><span class="line">    <span class="keyword">var</span> o <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">10000</span>; i &lt;= <span class="number">30000</span>; i++ &#123;</span><br><span class="line">       <span class="keyword">var</span> s1, s2, s3 <span class="type">int</span></span><br><span class="line">       s1 = (i - i%<span class="number">100</span>) / <span class="number">100</span></span><br><span class="line">       s2 = ((i % <span class="number">10000</span>) - (i%<span class="number">10000</span>)%<span class="number">10</span>) / <span class="number">10</span></span><br><span class="line">       s3 = i % <span class="number">1000</span></span><br><span class="line">       <span class="keyword">if</span> s1%k == <span class="number">0</span> &amp;&amp; s2%k == <span class="number">0</span> &amp;&amp; s3%k == <span class="number">0</span> &#123;</span><br><span class="line">          fmt.Println(i)</span><br><span class="line">          o++</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> o == <span class="number">0</span> &#123;</span><br><span class="line">       fmt.Print(<span class="string">&quot;No&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ²¡éš¾åº¦</p><h1 id="13-P1152-æ¬¢ä¹çš„è·³"><a href="#13-P1152-æ¬¢ä¹çš„è·³" class="headerlink" title="13.P1152 æ¬¢ä¹çš„è·³"></a>13.P1152 æ¬¢ä¹çš„è·³</h1><p><a href="https://www.luogu.com.cn/problem/P1152">P1152 æ¬¢ä¹çš„è·³ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isAvailable</span><span class="params">(alpha []<span class="type">int</span>, str <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(alpha); i++ &#123;</span><br><span class="line">       <span class="keyword">if</span> alpha[i] == str &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n, num <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;n)</span><br><span class="line">    list := <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= n<span class="number">-1</span>; i++ &#123;</span><br><span class="line">       fmt.Scan(&amp;num)</span><br><span class="line">       list[i] = num</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cha []<span class="type">int</span></span><br><span class="line">    <span class="keyword">var</span> chazhi <span class="type">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= n<span class="number">-2</span>; i++ &#123;</span><br><span class="line">       chazhi = list[i+<span class="number">1</span>] - list[i]</span><br><span class="line">       cha = <span class="built_in">append</span>(cha, chazhi)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> x, y := <span class="keyword">range</span> cha &#123;</span><br><span class="line">       <span class="keyword">if</span> y &lt; <span class="number">0</span> &#123;</span><br><span class="line">          cha[x] = -y</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> t <span class="type">int</span></span><br><span class="line">    <span class="keyword">for</span> m := <span class="number">1</span>; m &lt;= n<span class="number">-1</span>; m++ &#123;</span><br><span class="line">       <span class="keyword">if</span> isAvailable(cha, m) &#123;</span><br><span class="line">          t = t + <span class="number">1</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> isAvailable(cha, m) == <span class="literal">false</span> &#123;</span><br><span class="line">          fmt.Println(<span class="string">&quot;Not jolly&quot;</span>)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> t &gt;= n<span class="number">-1</span> &#123;</span><br><span class="line">       fmt.Print(<span class="string">&quot;Jolly&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ²¡éš¾åº¦ï¼Œæ·»åŠ ä¸ªå‡½æ•°å°±è¿‡äº†ã€‚</p><h1 id="14-P1161-å¼€ç¯"><a href="#14-P1161-å¼€ç¯" class="headerlink" title="14.P1161 å¼€ç¯"></a>14.P1161 å¼€ç¯</h1><p><a href="https://www.luogu.com.cn/problem/P1161">P1161 å¼€ç¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;n)</span><br><span class="line">    <span class="keyword">var</span> t <span class="type">float64</span></span><br><span class="line">    <span class="keyword">var</span> a <span class="type">float64</span></span><br><span class="line">    light := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">       fmt.Scan(&amp;a, &amp;t)</span><br><span class="line">       <span class="keyword">for</span> n := <span class="number">1.0</span>; n &lt;= t; n++ &#123;</span><br><span class="line">          b := <span class="type">int</span>(a * n)</span><br><span class="line">          <span class="keyword">if</span> light[b] == <span class="number">1</span> &#123;</span><br><span class="line">             light[b] = <span class="number">0</span></span><br><span class="line">             <span class="keyword">continue</span></span><br><span class="line">          &#125;</span><br><span class="line">          light[b] = <span class="number">1</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> k, l := <span class="keyword">range</span> light &#123;</span><br><span class="line">       <span class="keyword">if</span> l == <span class="number">1</span> &#123;</span><br><span class="line">          fmt.Println(k)</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»æœªæœ‰å¦‚æ­¤é¡ºåˆ©çš„ä¸€é“é¢˜ï¼Œä¸€æ¬¡ç›´æ¥è¿‡ï¼Œæˆ‘åªèƒ½è¯´è¿™é¢˜ç”¨æ˜ å°„çœŸçš„æ²¡æ¯›ç—…ã€‚</p><h1 id="15-P1179-NOIP2010-æ™®åŠç»„-æ•°å­—ç»Ÿè®¡"><a href="#15-P1179-NOIP2010-æ™®åŠç»„-æ•°å­—ç»Ÿè®¡" class="headerlink" title="15.P1179 [NOIP2010 æ™®åŠç»„] æ•°å­—ç»Ÿè®¡"></a>15.P1179 [NOIP2010 æ™®åŠç»„] æ•°å­—ç»Ÿè®¡</h1><p>[P1179 <a href="https://www.luogu.com.cn/problem/P1179">NOIP2010 æ™®åŠç»„] æ•°å­—ç»Ÿè®¡ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> l, r, n, a <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;l, &amp;r)</span><br><span class="line">    <span class="keyword">for</span> e := r; e &gt;= <span class="number">10</span>; &#123;</span><br><span class="line">       e = e / <span class="number">10</span></span><br><span class="line">       a++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ; l &lt;= r; l++ &#123;</span><br><span class="line">       q := l</span><br><span class="line">       <span class="keyword">if</span> q%<span class="number">10</span> == <span class="number">2</span> &#123;</span><br><span class="line">          n++</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= a; i++ &#123;</span><br><span class="line">          q = q / <span class="number">10</span></span><br><span class="line">          <span class="keyword">if</span> q%<span class="number">10</span> == <span class="number">2</span> &#123;</span><br><span class="line">             n++</span><br><span class="line">          &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°æœ€åè¶…æ—¶äº†ï¼Œæœ¬æ¥é‚£ä¸ªè®¡ç®—açš„forå¾ªç¯æ˜¯åœ¨ä¸‹è¾¹çš„foré‡Œè¾¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰ç°åœ¨è¿™ä¸ªè¿˜æ˜¯æœ‰å¥½å¤šè®¡ç®—æ˜¯æ²¡ç”¨çš„ï¼Œä¸è¿‡æ•ˆç‡å±…ç„¶æé«˜äº†ä¸€åŠå¤šã€‚</p><h1 id="16-P1200-USACO1-1-ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿-Your-Ride-Is-Here"><a href="#16-P1200-USACO1-1-ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿-Your-Ride-Is-Here" class="headerlink" title="16.P1200 [USACO1.1] ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿ Your Ride Is Here"></a>16.P1200 [USACO1.1] ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿ Your Ride Is Here</h1><p>[P1200 <a href="https://www.luogu.com.cn/problem/P1200">USACO1.1] ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿ Your Ride Is Here - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    map1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">    map1[<span class="string">&quot;A&quot;</span>] = <span class="number">1</span></span><br><span class="line">    map1[<span class="string">&quot;B&quot;</span>] = <span class="number">2</span></span><br><span class="line">    map1[<span class="string">&quot;C&quot;</span>] = <span class="number">3</span></span><br><span class="line">    map1[<span class="string">&quot;D&quot;</span>] = <span class="number">4</span></span><br><span class="line">    map1[<span class="string">&quot;E&quot;</span>] = <span class="number">5</span></span><br><span class="line">    map1[<span class="string">&quot;F&quot;</span>] = <span class="number">6</span></span><br><span class="line">    map1[<span class="string">&quot;G&quot;</span>] = <span class="number">7</span></span><br><span class="line">    map1[<span class="string">&quot;H&quot;</span>] = <span class="number">8</span></span><br><span class="line">    map1[<span class="string">&quot;I&quot;</span>] = <span class="number">9</span></span><br><span class="line">    map1[<span class="string">&quot;J&quot;</span>] = <span class="number">10</span></span><br><span class="line">    map1[<span class="string">&quot;K&quot;</span>] = <span class="number">11</span></span><br><span class="line">    map1[<span class="string">&quot;L&quot;</span>] = <span class="number">12</span></span><br><span class="line">    map1[<span class="string">&quot;M&quot;</span>] = <span class="number">13</span></span><br><span class="line">    map1[<span class="string">&quot;N&quot;</span>] = <span class="number">14</span></span><br><span class="line">    map1[<span class="string">&quot;O&quot;</span>] = <span class="number">15</span></span><br><span class="line">    map1[<span class="string">&quot;P&quot;</span>] = <span class="number">16</span></span><br><span class="line">    map1[<span class="string">&quot;Q&quot;</span>] = <span class="number">17</span></span><br><span class="line">    map1[<span class="string">&quot;R&quot;</span>] = <span class="number">18</span></span><br><span class="line">    map1[<span class="string">&quot;S&quot;</span>] = <span class="number">19</span></span><br><span class="line">    map1[<span class="string">&quot;T&quot;</span>] = <span class="number">20</span></span><br><span class="line">    map1[<span class="string">&quot;U&quot;</span>] = <span class="number">21</span></span><br><span class="line">    map1[<span class="string">&quot;V&quot;</span>] = <span class="number">22</span></span><br><span class="line">    map1[<span class="string">&quot;W&quot;</span>] = <span class="number">23</span></span><br><span class="line">    map1[<span class="string">&quot;X&quot;</span>] = <span class="number">24</span></span><br><span class="line">    map1[<span class="string">&quot;Y&quot;</span>] = <span class="number">25</span></span><br><span class="line">    map1[<span class="string">&quot;Z&quot;</span>] = <span class="number">26</span></span><br><span class="line">    <span class="keyword">var</span> hui, dui <span class="type">string</span></span><br><span class="line">    fmt.Scan(&amp;hui)</span><br><span class="line">    fmt.Scan(&amp;dui)</span><br><span class="line">    huin := <span class="number">1</span></span><br><span class="line">    duin := <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> _, Q := <span class="keyword">range</span> hui &#123;</span><br><span class="line">       P := <span class="type">string</span>(Q)</span><br><span class="line">       huin *= map1[P]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> _, Q := <span class="keyword">range</span> dui &#123;</span><br><span class="line">       P := <span class="type">string</span>(Q)</span><br><span class="line">       duin *= map1[P]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> duif = <span class="type">float64</span>(duin)</span><br><span class="line">    <span class="keyword">var</span> huif = <span class="type">float64</span>(huin)</span><br><span class="line">    <span class="keyword">if</span> math.Mod(duif, <span class="number">47</span>) == math.Mod(huif, <span class="number">47</span>) &#123;</span><br><span class="line">       fmt.Println(<span class="string">&quot;GO&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       fmt.Println(<span class="string">&quot;STAY&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»å‹è½¬æ¢å¤šä¸€ç‚¹</p><h1 id="17-P1304-å“¥å¾·å·´èµ«çŒœæƒ³"><a href="#17-P1304-å“¥å¾·å·´èµ«çŒœæƒ³" class="headerlink" title="17.P1304 å“¥å¾·å·´èµ«çŒœæƒ³"></a>17.P1304 å“¥å¾·å·´èµ«çŒœæƒ³</h1><p><a href="https://www.luogu.com.cn/problem/P1304">P1304 å“¥å¾·å·´èµ«çŒœæƒ³ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zhishu</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">2</span>; i &lt; n; i++ &#123;</span><br><span class="line">       <span class="keyword">if</span> n%i == <span class="number">0</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zhishuhe</span><span class="params">(int2 <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">int</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">2</span>; i &lt;= int2; i++ &#123;</span><br><span class="line">       <span class="keyword">if</span> zhishu(i) &amp;&amp; zhishu(int2-i) &#123;</span><br><span class="line">          <span class="keyword">return</span> i, (int2 - i)</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> N <span class="type">int</span></span><br><span class="line">    fmt.Scan(&amp;N)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">4</span>; i &lt;= N; i += <span class="number">2</span> &#123;</span><br><span class="line">       x, y := zhishuhe(i)</span><br><span class="line">       fmt.Print(i, <span class="string">&quot;=&quot;</span>, x, <span class="string">&quot;+&quot;</span>, y)</span><br><span class="line">       fmt.Println()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦æ˜¯è´¨æ•°çš„å‡½æ•°å°±okäº†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-P1000-è¶…çº§ç›ä¸½æ¸¸æˆ&quot;&gt;&lt;a href=&quot;#1-P1000-è¶…çº§ç›ä¸½æ¸¸æˆ&quot; class=&quot;headerlink&quot; title=&quot;1.P1000 è¶…çº§ç›ä¸½æ¸¸æˆ&quot;&gt;&lt;/a&gt;1.P1000 è¶…çº§ç›ä¸½æ¸¸æˆ&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.l</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Badgerå­¦ä¹ ä½¿ç”¨</title>
    <link href="http://example.com/2023/12/18/Badger%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/"/>
    <id>http://example.com/2023/12/18/Badger%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/</id>
    <published>2023-12-18T08:49:04.000Z</published>
    <updated>2023-12-22T12:14:50.788Z</updated>
    
    <content type="html"><![CDATA[<h2 id="BADGERç®€å•å®ç”¨"><a href="#BADGERç®€å•å®ç”¨" class="headerlink" title="BADGERç®€å•å®ç”¨"></a>BADGERç®€å•å®ç”¨</h2><h5 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h5><p>ä¸€ç§kvå¼•æ“ï¼ŒKV å¼•æ“æ˜¯ä¸€ç§é”®å€¼å­˜å‚¨å¼•æ“ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ã€‚å…¶ä¸­ï¼Œé”®æ˜¯å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå€¼æ˜¯ä»»æ„æ•°æ®ç±»å‹ã€‚KV å¼•æ“é€šå¸¸ç”¨äºç¼“å­˜ã€æ•°æ®åº“ç­‰åœºæ™¯ã€‚æ˜¯ go ç”Ÿæ€ä¸­æ¯”è¾ƒç”Ÿäº§çº§çš„å­˜å‚¨å¼•æ“ã€‚</p><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><p>æŒ‡ä»¤è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/dgraph-io/badger</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘çš„å®‰è£…å‡ºäº†ä¸€äº›é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘æ˜¯è‡ªå·±ä¸‹è½½çš„ç„¶åè‡ªå·±å®‰è£…çš„ï¼Œå¦‚æœä½ ä¹Ÿå‡ºé”™äº†å¯ä»¥<a href="https://gitee.com/mirrors/Badger/repository/archive/main.zip">ä¸‹è½½ä»“åº“ Â· Gitee æé€Ÿä¸‹è½½&#x2F;Badger - Gitee.com</a>ä¸‹è½½ä¹‹åï¼Œé€šè¿‡golandçš„å‘½ä»¤è¡Œcdåˆ°ä½ ä¸‹è½½&#x2F;badgeré‡Œï¼Œç„¶åå‘½ä»¤è¡Œè¾“å…¥go installå°±å¥½äº†ã€‚</p><h4 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h4><h5 id="æ‰“å¼€æ•°æ®åº“"><a href="#æ‰“å¼€æ•°æ®åº“" class="headerlink" title="æ‰“å¼€æ•°æ®åº“"></a>æ‰“å¼€æ•°æ®åº“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Open</span><span class="params">(path <span class="type">string</span>)</span></span> (*badger.DB, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> _, err := os.Stat(path); os.IsNotExist(err) &#123;</span><br><span class="line">os.MkdirAll(path, <span class="number">0755</span>)</span><br><span class="line">&#125;</span><br><span class="line">opts := badger.DefaultOptions(path)</span><br><span class="line">opts.Dir = path</span><br><span class="line">opts.ValueDir = path</span><br><span class="line">opts.SyncWrites = <span class="literal">false</span></span><br><span class="line">opts.ValueThreshold = <span class="number">256</span></span><br><span class="line">opts.CompactL0OnClose = <span class="literal">true</span></span><br><span class="line">db, err := badger.Open(opts)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;badger open failed&quot;</span>, <span class="string">&quot;path&quot;</span>, path, <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> db, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨äºæ‰“å¼€æˆ–åˆ›å»ºBadgeræ•°æ®åº“çš„å‡½æ•°ã€‚</p><p>å‡½æ•°åä¸º<code>Open</code>ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°<code>path</code>ï¼Œè¡¨ç¤ºæ•°æ®åº“æ–‡ä»¶çš„è·¯å¾„ã€‚å‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡å‘<code>badger.DB</code>ç±»å‹çš„æŒ‡é’ˆå’Œä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚</p><p>å‡½æ•°é¦–å…ˆä½¿ç”¨<code>os.Stat(path)</code>æ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨<code>os.MkdirAll(path, 0755)</code>åˆ›å»ºè¯¥è·¯å¾„åŠå…¶æ‰€æœ‰çˆ¶ç›®å½•ï¼Œå¹¶è®¾ç½®æƒé™ä¸º755ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå‡½æ•°åˆ›å»ºä¸€ä¸ª<code>badger.DefaultOptions(path)</code>å¯¹è±¡ï¼Œç”¨äºé…ç½®Badgeræ•°æ®åº“çš„é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li><code>Dir</code>: æ•°æ®åº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚</li><li><code>ValueDir</code>: å­˜å‚¨å€¼çš„ç›®å½•ã€‚</li><li><code>SyncWrites</code>: æ˜¯å¦åŒæ­¥å†™å…¥ç£ç›˜ã€‚è®¾ç½®ä¸º<code>false</code>å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†å¯èƒ½ä¼šé™ä½æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li><li><code>ValueThreshold</code>: è§¦å‘L0å‹ç¼©çš„é˜ˆå€¼ã€‚å½“å­˜å‚¨çš„å€¼æ•°é‡è¶…è¿‡è¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œä¼šè§¦å‘L0å‹ç¼©ä»¥é‡Šæ”¾ç©ºé—´ã€‚</li><li><code>CompactL0OnClose</code>: æ˜¯å¦åœ¨å…³é—­æ•°æ®åº“æ—¶è‡ªåŠ¨è¿›è¡ŒL0å‹ç¼©ã€‚è®¾ç½®ä¸º<code>true</code>å¯ä»¥åœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨å‹ç¼©ï¼Œå‡å°‘ç£ç›˜ç©ºé—´çš„ä½¿ç”¨ã€‚</li></ul><p>ç„¶åï¼Œå‡½æ•°ä½¿ç”¨<code>badger.Open(opts)</code>æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶å°†ç»“æœèµ‹å€¼ç»™å˜é‡<code>db</code>ã€‚å¦‚æœæ‰“å¼€è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå‡½æ•°ä¼šè®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¿”å›<code>nil</code>å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p>æœ€åï¼Œå‡½æ•°è¿”å›æŒ‡å‘æ•°æ®åº“çš„æŒ‡é’ˆå’Œ<code>nil</code>ä½œä¸ºé”™è¯¯ä¿¡æ¯ï¼Œè¡¨ç¤ºæˆåŠŸæ‰“å¼€äº†æ•°æ®åº“ã€‚</p><h5 id="å†…å­˜æ¨¡å¼-æ— ç›˜æ¨¡å¼"><a href="#å†…å­˜æ¨¡å¼-æ— ç›˜æ¨¡å¼" class="headerlink" title="å†…å­˜æ¨¡å¼&#x2F;æ— ç›˜æ¨¡å¼"></a>å†…å­˜æ¨¡å¼&#x2F;æ— ç›˜æ¨¡å¼</h5><p>é»˜è®¤Badger æ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨ç£ç›˜ä¸Šã€‚å®ƒè¿˜æ”¯æŒçº¯å†…å­˜æ¨¡å¼ã€‚å½“ Badger åœ¨å†…å­˜æ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚åœ¨å†…å­˜æ¨¡å¼ä¸‹è¯»å†™é€Ÿåº¦è¦å¿«å¾—å¤šï¼Œä½†åœ¨å´©æºƒæˆ–å…³é—­çš„æƒ…å†µä¸‹ï¼Œå­˜å‚¨åœ¨ Badger ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚è¦åœ¨å†…å­˜æ¨¡å¼ä¸‹æ‰“å¼€ badgerï¼Œè®¾ç½®InMemoryé€‰é¡¹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opts := badger.DefaultOptions(path).WithInMemory(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><h5 id="å…³é—­æ•°æ®åº“"><a href="#å…³é—­æ•°æ®åº“" class="headerlink" title="å…³é—­æ•°æ®åº“"></a>å…³é—­æ•°æ®åº“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Close</span><span class="params">()</span></span> &#123;</span><br><span class="line">err := badgerDB.Close()</span><br><span class="line"><span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;database closed&quot;</span>, <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;failed to close database&quot;</span>, <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çš„ä½œç”¨æ˜¯å…³é—­ä¸€ä¸ªåä¸º<code>badgerDB</code>çš„æ•°æ®åº“è¿æ¥ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè°ƒç”¨<code>badgerDB.Close()</code>æ–¹æ³•æ¥å…³é—­æ•°æ®åº“è¿æ¥ï¼Œå¹¶å°†è¿”å›çš„é”™è¯¯ä¿¡æ¯å­˜å‚¨åœ¨å˜é‡<code>err</code>ä¸­ã€‚ç„¶åï¼Œé€šè¿‡åˆ¤æ–­<code>err</code>æ˜¯å¦ä¸º<code>nil</code>æ¥ç¡®å®šå…³é—­æ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœ<code>err</code>ä¸º<code>nil</code>ï¼Œåˆ™è¡¨ç¤ºå…³é—­æ“ä½œæˆåŠŸï¼Œä½¿ç”¨<code>log.Println</code>æ‰“å°ä¸€æ¡æ—¥å¿—ä¿¡æ¯ï¼Œæ˜¾ç¤ºâ€database closedâ€å’Œé”™è¯¯ä¿¡æ¯ï¼›å¦åˆ™ï¼Œè¡¨ç¤ºå…³é—­æ“ä½œå¤±è´¥ï¼ŒåŒæ ·ä½¿ç”¨<code>log.Println</code>æ‰“å°ä¸€æ¡æ—¥å¿—ä¿¡æ¯ï¼Œæ˜¾ç¤ºâ€failed to close databaseâ€å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><h4 id="å­˜å‚¨æ“ä½œ"><a href="#å­˜å‚¨æ“ä½œ" class="headerlink" title="å­˜å‚¨æ“ä½œ"></a>å­˜å‚¨æ“ä½œ</h4><h5 id="å†™å…¥æ•°æ®"><a href="#å†™å…¥æ•°æ®" class="headerlink" title="å†™å…¥æ•°æ®"></a>å†™å…¥æ•°æ®</h5><p>ä¿å­˜é”®å€¼å¯¹ï¼Œä½¿ç”¨ä¸‹é¢Txn.Set()æ–¹æ³•ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Set</span><span class="params">(key []<span class="type">byte</span>, value []<span class="type">byte</span>)</span></span> &#123;</span><br><span class="line">wb := badgerDB.NewWriteBatch()</span><br><span class="line"><span class="keyword">defer</span> wb.Cancel()</span><br><span class="line">err := wb.SetEntry(badger.NewEntry(key, value).WithMeta(<span class="number">0</span>))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to write data to cache.&quot;</span>,<span class="string">&quot;key&quot;</span>, <span class="type">string</span>(key), <span class="string">&quot;value&quot;</span>, <span class="type">string</span>(value), <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">err = wb.Flush()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to flush data to cache.&quot;</span>,<span class="string">&quot;key&quot;</span>, <span class="type">string</span>(key), <span class="string">&quot;value&quot;</span>, <span class="type">string</span>(value), <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç”¨äºå°†é”®å€¼å¯¹å­˜å‚¨åˆ°Badgeræ•°æ®åº“ä¸­çš„å‡½æ•°ã€‚å‡½æ•°åä¸º<code>Set</code>ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<code>key</code>å’Œ<code>value</code>ï¼Œå®ƒä»¬éƒ½æ˜¯å­—èŠ‚åˆ‡ç‰‡ç±»å‹ã€‚</p><p>å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>badgerDB.WriteBatch()</code>å¯¹è±¡ï¼Œå‘½åä¸º<code>wb</code>ã€‚ç„¶åä½¿ç”¨<code>defer wb.Cancel()</code>æ¥ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡è°ƒç”¨<code>wb.SetEntry(badger.NewEntry(key, value).WithMeta(0))</code>å°†é”®å€¼å¯¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚è¿™é‡Œä½¿ç”¨äº†<code>badger.NewEntry(key, value)</code>æ¥åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ¡ç›®ï¼Œå¹¶é€šè¿‡<code>.WithMeta(0)</code>è®¾ç½®å…ƒæ•°æ®ä¸º0ã€‚</p><p>å¦‚æœå­˜å‚¨è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to write data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p>æœ€åï¼Œè°ƒç”¨<code>wb.Flush()</code>å°†æ‰¹å¤„ç†ä¸­çš„æ‰€æœ‰æ›´æ”¹åˆ·æ–°åˆ°æ•°æ®åº“ä¸­ã€‚å¦‚æœåˆ·æ–°è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼ŒåŒæ ·ä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to flush data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„<code>badgerDB</code>æ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–æˆ–å¯¼å…¥ç›¸åº”çš„åº“ã€‚</p><p><em>é€šè¿‡ä½¿ç”¨<code>defer</code>å…³é”®å­—ï¼Œå¯ä»¥åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åè‡ªåŠ¨è°ƒç”¨<code>wb.Cancel()</code>æ–¹æ³•æ¥é‡Šæ”¾è¿™äº›èµ„æºï¼Œé¿å…èµ„æºæ³„æ¼å’Œç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€‚</em></p><h5 id="è®¾ç½®TTLçš„å†™å…¥æ•°æ®"><a href="#è®¾ç½®TTLçš„å†™å…¥æ•°æ®" class="headerlink" title="è®¾ç½®TTLçš„å†™å…¥æ•°æ®"></a>è®¾ç½®TTLçš„å†™å…¥æ•°æ®</h5><p>Badger å…è®¸åœ¨é”®ä¸Šè®¾ç½®å¯é€‰çš„ç”Ÿå­˜æ—¶é—´ (TTL) å€¼ã€‚ä¸€æ—¦ TTL è¿‡å»ï¼Œå¯†é’¥å°†ä¸å†å¯æ£€ç´¢ï¼Œå¹¶ä¸”å°†æœ‰èµ„æ ¼è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚ å¯ä»¥ä½¿ç”¨å’ŒAPI æ–¹æ³•å°† TTL è®¾ç½®ä¸º<code>time.Duration</code>å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetWithTTL</span><span class="params">(key []<span class="type">byte</span>, value []<span class="type">byte</span>, ttl <span class="type">int64</span>)</span></span> &#123;</span><br><span class="line">wb := badgerDB.NewWriteBatch()</span><br><span class="line"><span class="keyword">defer</span> wb.Cancel()</span><br><span class="line">err := wb.SetEntry(badger.NewEntry(key, value).WithMeta(<span class="number">0</span>).WithTTL(time.Duration(ttl * time.Second.Nanoseconds())))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to write data to cache.&quot;</span>,<span class="string">&quot;key&quot;</span>, <span class="type">string</span>(key), <span class="string">&quot;value&quot;</span>, <span class="type">string</span>(value), <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">err = wb.Flush()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to flush data to cache.&quot;</span>,<span class="string">&quot;key&quot;</span>, <span class="type">string</span>(key), <span class="string">&quot;value&quot;</span>, <span class="type">string</span>(value), <span class="string">&quot;err&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åä¸º<code>SetWithTTL</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š<code>key</code>ã€<code>value</code>å’Œ<code>ttl</code>ã€‚è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†é”®å€¼å¯¹å­˜å‚¨åˆ°Badgeræ•°æ®åº“ä¸­ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ã€‚</p><p>å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>badgerDB.WriteBatch()</code>å¯¹è±¡ï¼Œå‘½åä¸º<code>wb</code>ã€‚ç„¶åä½¿ç”¨<code>defer wb.Cancel()</code>æ¥ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡è°ƒç”¨<code>wb.SetEntry()</code>æ–¹æ³•å°†é”®å€¼å¯¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä½¿ç”¨<code>badger.NewEntry(key, value)</code>åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ¡ç›®ï¼Œå¹¶é€šè¿‡<code>.WithMeta(0)</code>è®¾ç½®å…ƒæ•°æ®ä¸º0ã€‚ç„¶åï¼Œä½¿ç”¨<code>.WithTTL(time.Duration(ttl * time.Second.Nanoseconds()))</code>è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºä¼ å…¥çš„<code>ttl</code>å‚æ•°æ‰€è¡¨ç¤ºçš„æ—¶é—´ã€‚</p><p>å¦‚æœåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to write data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p>æœ€åï¼Œè°ƒç”¨<code>wb.Flush()</code>å°†æ‰¹å¤„ç†ä¸­çš„æ›´æ”¹åˆ·æ–°åˆ°æ•°æ®åº“ä¸­ã€‚å¦‚æœåˆ·æ–°è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼ŒåŒæ ·ä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to flush data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„<code>badgerDB</code>æ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œéœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–æˆ–å¯¼å…¥ç›¸åº”çš„åº“ã€‚</p><h5 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h5><p>è¦è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹<code>Txn.Get()</code>æ–¹æ³•</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Get</span><span class="params">(key []<span class="type">byte</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">var</span> ival []<span class="type">byte</span></span><br><span class="line">err := badgerDB.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">item, err := txn.Get(key)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">ival, err = item.ValueCopy(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to read data from the cache.&quot;</span>,<span class="string">&quot;key&quot;</span>, <span class="type">string</span>(key), <span class="string">&quot;error&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="type">string</span>(ival)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å—ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ä½œä¸ºå‚æ•°ï¼ˆkeyï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸ªå‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä»åä¸ºbadgerDBçš„æ•°æ®åº“ä¸­è¯»å–æ•°æ®ã€‚</p><p>å‡½æ•°é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªç©ºçš„å­—èŠ‚åˆ‡ç‰‡ivalï¼Œç”¨äºå­˜å‚¨ä»æ•°æ®åº“ä¸­è·å–çš„å€¼ã€‚ç„¶åï¼Œå®ƒè°ƒç”¨badgerDBçš„Viewæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°æ¥å—ä¸€ä¸ªbadger.Txnç±»å‹çš„å‚æ•°txnï¼Œå¹¶è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>åœ¨åŒ¿åå‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆå°è¯•ä»æ•°æ®åº“ä¸­è·å–ä¸ç»™å®šé”®å…³è”çš„é¡¹ç›®ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°å°†ç«‹å³è¿”å›é”™è¯¯ã€‚å¦åˆ™ï¼Œå®ƒå°†ä½¿ç”¨item.ValueCopyæ–¹æ³•å°†é¡¹ç›®çš„å€¼å¤åˆ¶åˆ°ivalåˆ‡ç‰‡ä¸­ã€‚å¦‚æœåœ¨å¤åˆ¶è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¹Ÿå°†è¿”å›é”™è¯¯ã€‚</p><p>æœ€åï¼Œå¦‚æœåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•é”™è¯¯ï¼Œå‡½æ•°å°†ä½¿ç”¨log.Printlnæ‰“å°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼ŒåŒ…æ‹¬é”®å’Œé”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œå‡½æ•°å°†è¿”å›ivalåˆ‡ç‰‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ç»“æœã€‚</p><h5 id="å­˜åœ¨é”®"><a href="#å­˜åœ¨é”®" class="headerlink" title="å­˜åœ¨é”®"></a>å­˜åœ¨é”®</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Has</span><span class="params">(key []<span class="type">byte</span>)</span></span> (<span class="type">bool</span>, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> exist <span class="type">bool</span> = <span class="literal">false</span></span><br><span class="line">err := badgerDB.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">_, err := txn.Get(key)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">exist = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// align with leveldb, if the key doesn&#x27;t exist, leveldb returns nil</span></span><br><span class="line"><span class="keyword">if</span> strings.HasSuffix(err.Error(), <span class="string">&quot;not found&quot;</span>) &#123;</span><br><span class="line">err = <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> exist, err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åä¸º<code>Has</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ç±»å‹çš„å‚æ•°<code>key</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼å’Œä¸€ä¸ªé”™è¯¯ã€‚è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯æ£€æŸ¥ç»™å®šçš„é”®æ˜¯å¦å­˜åœ¨äºæ•°æ®åº“ä¸­ã€‚</p><p>å‡½æ•°å†…éƒ¨é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªå¸ƒå°”å˜é‡<code>exist</code>å¹¶å°†å…¶åˆå§‹åŒ–ä¸º<code>false</code>ã€‚ç„¶åï¼Œä½¿ç”¨<code>badgerDB.View</code>æ–¹æ³•æ¥éå†æ•°æ®åº“ä¸­çš„æ¯ä¸ªäº‹åŠ¡ã€‚åœ¨æ¯ä¸ªäº‹åŠ¡ä¸­ï¼Œé€šè¿‡è°ƒç”¨<code>txn.Get(key)</code>æ¥è·å–ä¸ç»™å®šé”®å…³è”çš„å€¼ã€‚å¦‚æœè·å–æˆåŠŸï¼Œåˆ™å°†<code>exist</code>è®¾ç½®ä¸º<code>true</code>ã€‚å¦‚æœåœ¨è·å–è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥é”™è¯¯ã€‚</p><p>æœ€åï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†å¯¹åº”çš„é”®ã€‚å¦‚æœé”™è¯¯ä¿¡æ¯ä»¥â€not foundâ€ç»“å°¾ï¼Œè¯´æ˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é”®ï¼Œæ­¤æ—¶å°†é”™è¯¯è®¾ç½®ä¸º<code>nil</code>ã€‚æœ€ç»ˆï¼Œå‡½æ•°è¿”å›<code>exist</code>å’Œ<code>err</code>ä¸¤ä¸ªå€¼ï¼Œå…¶ä¸­<code>exist</code>è¡¨ç¤ºé”®æ˜¯å¦å­˜åœ¨ï¼Œ<code>err</code>è¡¨ç¤ºå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</p><h5 id="åˆ é™¤é”®"><a href="#åˆ é™¤é”®" class="headerlink" title="åˆ é™¤é”®"></a>åˆ é™¤é”®</h5><p>ä½¿ç”¨<code>Txn.Delete()</code>æ–¹æ³•åˆ é™¤ keyã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Delete</span><span class="params">(key []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">wb := badgerDB.NewWriteBatch()</span><br><span class="line"><span class="keyword">defer</span> wb.Cancel()</span><br><span class="line"><span class="keyword">return</span> wb.Delete(key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç”¨äºåˆ é™¤é”®å€¼å¯¹çš„å‡½æ•°ã€‚å®ƒä½¿ç”¨äº†BadgerDBæ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨<code>Delete</code>æ–¹æ³•æ¥åˆ é™¤æŒ‡å®šçš„é”®ã€‚</p><p>å‡½æ•°çš„å‚æ•°æ˜¯<code>key</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼ˆ<code>[]byte</code>ï¼‰ï¼Œè¡¨ç¤ºè¦åˆ é™¤çš„é”®ã€‚</p><p>å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>WriteBatch</code>å¯¹è±¡<code>wb</code>ï¼Œç„¶åä½¿ç”¨<code>defer wb.Cancel()</code>ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨<code>wb.Delete(key)</code>æ¥åˆ é™¤æŒ‡å®šçš„é”®ï¼Œå¹¶è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„<code>badgerDB</code>æ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„BadgerDBå®ä¾‹ã€‚</p><h4 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h4><h5 id="éå†keyå’Œvalue"><a href="#éå†keyå’Œvalue" class="headerlink" title="éå†keyå’Œvalue"></a>éå†keyå’Œvalue</h5><p>è¦è¿­ä»£é”®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Iterator</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>Txn.NewIterator()</code>æ–¹æ³•è·å¾—ã€‚è¿­ä»£ä»¥æŒ‰å­—èŠ‚æ’åºçš„å­—å…¸é¡ºåºå‘ç”Ÿã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IteratorKeysAndValues</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">err := badgerDB.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">opts := badger.DefaultIteratorOptions</span><br><span class="line">opts.PrefetchSize = <span class="number">10</span></span><br><span class="line">it := txn.NewIterator(opts)</span><br><span class="line"><span class="keyword">defer</span> it.Close()</span><br><span class="line"><span class="keyword">for</span> it.Rewind(); it.Valid(); it.Next() &#123;</span><br><span class="line">item := it.Item()</span><br><span class="line">k := item.Key()</span><br><span class="line">err := item.Value(<span class="function"><span class="keyword">func</span><span class="params">(v []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;key=%s, value=%s\n&quot;</span>, k, v)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to iterator keys and values from the cache.&quot;</span>,<span class="string">&quot;error&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åä¸º<code>IteratorKeysAndValues</code>ã€‚å®ƒçš„ä½œç”¨æ˜¯éå†BadgerDBæ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œå¹¶æ‰“å°å‡ºæ¯ä¸ªé”®å’Œå¯¹åº”çš„å€¼ã€‚</p><p>å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†<code>badgerDB.View</code>æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªäº‹åŠ¡è§†å›¾ï¼Œç„¶åä½¿ç”¨<code>txn.NewIterator</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡<code>it</code>ã€‚é€šè¿‡è®¾ç½®è¿­ä»£å™¨çš„é€‰é¡¹<code>opts</code>ï¼Œå¯ä»¥æŒ‡å®šé¢„å–å¤§å°ä¸º10ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå‡½æ•°ä½¿ç”¨<code>it.Rewind()</code>å°†è¿­ä»£å™¨é‡ç½®åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åä½¿ç”¨<code>it.Valid()</code>åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæœ‰ï¼Œå°±ä½¿ç”¨<code>it.Next()</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå‡½æ•°ä½¿ç”¨<code>it.Item()</code>è·å–å½“å‰å…ƒç´ çš„é”®å€¼å¯¹ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡<code>item</code>ä¸­ã€‚</p><p>ç„¶åï¼Œå‡½æ•°ä½¿ç”¨<code>item.Key()</code>è·å–é”®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡<code>k</code>ä¸­ã€‚æ¥ç€ï¼Œå‡½æ•°ä½¿ç”¨<code>item.Value()</code>è·å–å€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚åœ¨è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­ï¼Œä½¿ç”¨<code>fmt.Printf</code>æ‰“å°å‡ºé”®å’Œå€¼ã€‚</p><p>å¦‚æœåœ¨è·å–å€¼çš„è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šè¿”å›è¯¥é”™è¯¯ã€‚å¦‚æœè¿­ä»£å®Œæˆï¼Œå‡½æ•°ä¼šè¿”å›<code>nil</code>ã€‚</p><p>æœ€åï¼Œå‡½æ•°ä½¿ç”¨<code>log.Println</code>è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œå¦‚æœè¿­ä»£è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¾“å‡ºâ€Failed to iterator keys and values from the cache.â€ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚</p><h5 id="éå†keys"><a href="#éå†keys" class="headerlink" title="éå†keys"></a>éå†keys</h5><p>Badger æ”¯æŒä¸€ç§ç‹¬ç‰¹çš„è¿­ä»£æ¨¡å¼ï¼Œç§°ä¸ºkey-onlyè¿­ä»£ã€‚å®ƒæ¯”å¸¸è§„è¿­ä»£å¿«å‡ ä¸ªæ•°é‡çº§ï¼Œå› ä¸ºå®ƒåªæ¶‰åŠå¯¹ LSM æ ‘çš„è®¿é—®ï¼Œå®ƒé€šå¸¸å®Œå…¨é©»ç•™åœ¨ RAM ä¸­ã€‚è¦å¯ç”¨ä»…é”®è¿­ä»£ï¼Œæ‚¨éœ€è¦å°†è¯¥IteratorOptions.PrefetchValues å­—æ®µè®¾ç½®ä¸ºfalse. è¿™ä¹Ÿå¯ç”¨äºåœ¨è¿­ä»£æœŸé—´å¯¹é€‰å®šé”®è¿›è¡Œç¨€ç–è¯»å–ï¼Œitem.Value()ä»…åœ¨éœ€è¦æ—¶è°ƒç”¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IteratorKeys</span><span class="params">()</span></span>&#123;</span><br><span class="line">    err := badgerDB.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">        opts := badger.DefaultIteratorOptions</span><br><span class="line">        opts.PrefetchValues = <span class="literal">false</span></span><br><span class="line">        it := txn.NewIterator(opts)</span><br><span class="line">        <span class="keyword">defer</span> it.Close()</span><br><span class="line">        <span class="keyword">for</span> it.Rewind(); it.Valid(); it.Next() &#123;</span><br><span class="line">            item := it.Item()</span><br><span class="line">            k := item.Key()</span><br><span class="line">            fmt.Printf(<span class="string">&quot;key=%s\n&quot;</span>, k)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Println(<span class="string">&quot;Failed to iterator keys from the cache.&quot;</span>,<span class="string">&quot;error&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåä¸º<code>IteratorKeys</code>çš„å‡½æ•°ï¼Œå®ƒç”¨äºéå†BadgerDBæ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®ã€‚å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†<code>badgerDB.View</code>æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªäº‹åŠ¡è§†å›¾ï¼Œç„¶åä½¿ç”¨<code>txn.NewIterator</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡<code>it</code>ã€‚é€šè¿‡è®¾ç½®è¿­ä»£å™¨çš„é€‰é¡¹<code>opts</code>ï¼Œå¯ä»¥æŒ‡å®šé¢„å–å€¼ï¼ˆ<code>PrefetchValues</code>ï¼‰ä¸º<code>false</code>ã€‚</p><p>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ä½¿ç”¨<code>it.Rewind()</code>å°†è¿­ä»£å™¨é‡ç½®åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åä½¿ç”¨<code>it.Valid()</code>åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæœ‰ï¼Œå°±ä½¿ç”¨<code>it.Next()</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå‡½æ•°ä½¿ç”¨<code>it.Item()</code>è·å–å½“å‰å…ƒç´ çš„é”®å€¼å¯¹ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡<code>item</code>ä¸­ã€‚ç„¶åï¼Œä½¿ç”¨<code>item.Key()</code>è·å–é”®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡<code>k</code>ä¸­ã€‚æœ€åï¼Œä½¿ç”¨<code>fmt.Printf</code>æ‰“å°å‡ºé”®ã€‚</p><p>å¦‚æœè¿­ä»£è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šè¿”å›è¯¥é”™è¯¯ã€‚å¦‚æœè¿­ä»£å®Œæˆï¼Œå‡½æ•°ä¼šè¿”å›<code>nil</code>ã€‚</p><p>å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå‡½æ•°ä¼šä½¿ç”¨<code>log.Println</code>è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºâ€Failed to iterator keys from the cache.â€ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚</p><h5 id="å‰ç¼€æ‰«æ"><a href="#å‰ç¼€æ‰«æ" class="headerlink" title="å‰ç¼€æ‰«æ"></a>å‰ç¼€æ‰«æ</h5><p>è¦éå†ä¸€ä¸ªé”®å‰ç¼€ï¼Œæ‚¨å¯ä»¥ç»„åˆ<code>Seek()</code>and <code>ValidForPrefix()</code>ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SeekWithPrefix</span><span class="params">(prefixStr <span class="type">string</span>)</span></span>&#123;</span><br><span class="line">err := badgerDB.View(<span class="function"><span class="keyword">func</span><span class="params">(txn *badger.Txn)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">it := txn.NewIterator(badger.DefaultIteratorOptions)</span><br><span class="line"><span class="keyword">defer</span> it.Close()</span><br><span class="line">prefix := []<span class="type">byte</span>(prefixStr)</span><br><span class="line"><span class="keyword">for</span> it.Seek(prefix); it.ValidForPrefix(prefix); it.Next() &#123;</span><br><span class="line">item := it.Item()</span><br><span class="line">k := item.Key()</span><br><span class="line">err := item.Value(<span class="function"><span class="keyword">func</span><span class="params">(v []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;key=%s, value=%s\n&quot;</span>, k, v)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(<span class="string">&quot;Failed to seek prefix from the cache.&quot;</span>, <span class="string">&quot;prefix&quot;</span>, prefixStr,<span class="string">&quot;error&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåä¸º<code>SeekWithPrefix</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°<code>prefixStr</code>ã€‚è¯¥å‡½æ•°ä½¿ç”¨BadgerDBæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå¹¶éå†æ‰€æœ‰ä»¥ç»™å®šå‰ç¼€å¼€å¤´çš„é”®å€¼å¯¹ã€‚</p><p>å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡<code>it</code>ï¼Œç„¶åä½¿ç”¨<code>txn.NewIterator(badger.DefaultIteratorOptions)</code>æ–¹æ³•åˆå§‹åŒ–è¿­ä»£å™¨ã€‚æ¥ä¸‹æ¥ï¼Œå°†<code>prefixStr</code>è½¬æ¢ä¸ºå­—èŠ‚åˆ‡ç‰‡<code>prefix</code>ï¼Œå¹¶ä½¿ç”¨<code>it.Seek(prefix)</code>æ–¹æ³•ä»ç¬¬ä¸€ä¸ªåŒ¹é…çš„å‰ç¼€å¼€å§‹éå†ã€‚</p><p>åœ¨å¾ªç¯ä¸­ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šæ£€æŸ¥å½“å‰é¡¹æ˜¯å¦ä»ç„¶å…·æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨<code>it.ValidForPrefix(prefix)</code>å®ç°çš„ã€‚å¦‚æœå½“å‰é¡¹ä»ç„¶å…·æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œåˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä»£ç ã€‚</p><p>åœ¨å¾ªç¯ä½“ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰é¡¹çš„é”®å’Œå€¼ï¼Œåˆ†åˆ«å­˜å‚¨åœ¨å˜é‡<code>k</code>å’Œ<code>v</code>ä¸­ã€‚ç„¶åï¼Œä½¿ç”¨<code>item.Value()</code>æ–¹æ³•è·å–å€¼ï¼Œå¹¶å°†å…¶æ‰“å°å‡ºæ¥ã€‚æœ€åï¼Œè¿”å›<code>nil</code>è¡¨ç¤ºæˆåŠŸå¤„ç†äº†å½“å‰é¡¹ã€‚</p><p>å¦‚æœåœ¨å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šç«‹å³è¿”å›é”™è¯¯ä¿¡æ¯ã€‚å¦åˆ™ï¼Œåœ¨å¾ªç¯ç»“æŸåè¿”å›<code>nil</code>è¡¨ç¤ºæˆåŠŸå®Œæˆéå†ã€‚</p><p>å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°ä»»ä½•é”™è¯¯ï¼Œå‡½æ•°ä¼šä½¿ç”¨<code>log.Println()</code>è®°å½•æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‰ç¼€å­—ç¬¦ä¸²ã€é”™è¯¯ä¿¡æ¯ç­‰ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;BADGERç®€å•å®ç”¨&quot;&gt;&lt;a href=&quot;#BADGERç®€å•å®ç”¨&quot; class=&quot;headerlink&quot; title=&quot;BADGERç®€å•å®ç”¨&quot;&gt;&lt;/a&gt;BADGERç®€å•å®ç”¨&lt;/h2&gt;&lt;h5 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
    <category term="æ•°æ®åº“" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>UTXOä»£ç çš„åŠ å…¥</title>
    <link href="http://example.com/2023/12/03/fileUTXO%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8A%A0%E5%85%A5/"/>
    <id>http://example.com/2023/12/03/fileUTXO%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8A%A0%E5%85%A5/</id>
    <published>2023-12-03T05:28:37.000Z</published>
    <updated>2023-12-13T12:59:11.245Z</updated>
    
    <content type="html"><![CDATA[<h1 id="äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹"><a href="#äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹" class="headerlink" title="äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹"></a>äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹</h1><p>åŒºå—é“¾ä¸­çš„è´§å¸å­˜å‚¨æ˜¯è®°å½•äº¤æ˜“çš„è¿‡ç¨‹ï¼Œè€Œéè®°å½•æœ€ç»ˆçš„è´§å¸æ•°é‡ã€‚å¹³æ—¶ä½¿ç”¨æ”¯ä»˜å®å’Œå¾®ä¿¡æ”¯ä»˜æ—¶ï¼Œè´§å¸çš„å­˜å‚¨åœ¨ä¸­å¤®ï¼Œæ‰€ä»¥è°ƒç”¨å’Œæ›´æ”¹å¾ˆå®¹æ˜“ï¼Œåœ¨ç¡®ä¿ä¸­å¿ƒè¯šå®å¯ä¿¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„è´§å¸æ‰æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ä¸€æ—¦å®ƒè¢«æ”»ç ´æˆ–è€…æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆäº¤æ˜“å°±ä¼šè¢«ç»ˆæ­¢ï¼Œæˆ‘ä»¬çš„è´§å¸ä¹Ÿå¤„åœ¨ä¸€ç§ä¸å®‰å…¨çš„çŠ¶æ€ã€‚uxtoè®°å½•çš„äº¤æ˜“è¿‡ç¨‹æ‹¥æœ‰ä¸€ä¸ªå­˜åœ¨è¾“å…¥å’Œè¾“å‡ºçš„è´¦æœ¬ï¼Œå‰©ä½™çš„è´§å¸åˆ™ä¼šåœ¨åˆ›å»ºä¸€ä¸ªè¾“å‡ºåˆ°è‡ªå·±çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆåˆ›å»ºäº¤æ˜“ä¿¡æ¯çš„ä¸¤éƒ¨åˆ†ï¼Œinputå’Œoutputã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªtransactionæ–‡ä»¶å¤¹ï¼Œç”¨äºåˆ†ç±»ï¼Œè£…æˆ‘ä»¬è¦ç”¨çš„äº¤æ˜“å†…å®¹ä¸€ç±»ã€‚</p><p>é¦–å…ˆåˆ›å»ºinoutput.goåˆ›å»ºç»“æ„ä½“ä½œäº¤æ˜“è´¦æœ¬ã€‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TXoutput <span class="keyword">struct</span> &#123;</span><br><span class="line">   Value <span class="type">int</span></span><br><span class="line">   Toaddress []<span class="type">byte</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> TXintput <span class="keyword">struct</span>&#123;</span><br><span class="line">   TXid []<span class="type">byte</span></span><br><span class="line">   Outidx <span class="type">int</span></span><br><span class="line">   Fromaddress []<span class="type">byte</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å…¥çš„æœ‰txidæ˜¯ä¸Šä¸€æ¬¡äº¤æ˜“çš„ä¿¡æ¯ï¼Œè¿˜æœ‰æœ‰å‘èµ·äººçš„åœ°å€å’Œä½äºä¸Šæ¬¡äº¤æ˜“çš„ç¬¬å‡ æ¡ã€‚è¾“å‡ºçš„æ˜¯è¾“å‡ºå¤šå°‘å¸å’Œæ¥æ”¶è€…çš„åœ°å€ã€‚</p><p>åˆ›å»ºtransaction.goï¼Œæ”¾å…¥æœ¬æ¬¡äº¤æ˜“çš„ç»“æ„ä½“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Transaction <span class="keyword">struct</span> &#123;</span><br><span class="line">Id []<span class="type">byte</span></span><br><span class="line">Inputs []TXintput</span><br><span class="line">Outputs []TXoutput</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>é¦–å­—æ¯å¤§å†™æ‰èƒ½åœ¨åˆ«çš„fileé‡Œè¾¹ç”¨è¿™äº›å‚æ•°ï¼Œä¸ç„¶æ²¡åŠæ³•å¼•ç”¨çš„ã€‚</em></p><p>transactioné‡Œç”±æœ¬èº«çš„å“ˆå¸Œå€¼å’Œè¾“å…¥è¾“å‡ºçš„äº¤æ˜“ã€‚inoutsåˆ™ä¼šè®°è½½ä¸Šä¸€æ¬¡äº¤æ˜“ä¸­å¯¹æœ¬idè¿›è¡Œçš„outputsã€‚txoutputåˆ™å¯ä»¥å®ç°æ‰¾é›¶ï¼Œå³å¤šå‡ºæ¥çš„å¸è¦äº¤æ˜“ç»™è‡ªå·±ã€‚</p><p>é¦–å…ˆè®¡ç®—æ¯ä¸ªtransactionçš„å“ˆå¸Œå€¼ã€‚ç„¶åè¿”å›å……å½“idã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(tx *Transaction)</span></span>TXhash() []<span class="type">byte</span>  &#123;</span><br><span class="line">   <span class="keyword">var</span> encoded bytes.Buffer</span><br><span class="line">   <span class="keyword">var</span> hash [<span class="number">32</span>]<span class="type">byte</span></span><br><span class="line">   encoder:=gob.NewEncoder(&amp;encoded)</span><br><span class="line">   err:=encoder.Encode(tx)</span><br><span class="line">   utils.Handle(err)</span><br><span class="line">   hash=sha256.Sum256(encoded.Bytes())</span><br><span class="line">   <span class="keyword">return</span> hash[:]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span>  <span class="params">(tx* Transaction)</span></span>Setid()  &#123;</span><br><span class="line">   tx.Id=tx.TXhash()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>var encoded bytes.Bufferåˆ›å»ºä¸€ä¸ªå­—èŠ‚ç¼“å†²åŒºï¼Œç”¨äºäº‹åçš„ç¼–ç å’Œå“ˆå¸Œå€¼çš„è®¡ç®—ã€‚è€Œhandleæˆ‘ä»¬ä¹‹å‰å·²ç»è¯´è¿‡äº†ï¼Œæ˜¯å¤„ç†é”™è¯¯çš„å‡½æ•°</em></p><p>ç¬¬äºŒæ­¥setidå°†è®¡ç®—å¥½çš„å“ˆå¸Œå€¼è¿”å›ç»™ç»“æ„ä½“ã€‚</p><p>ä¹‹å‰åˆ›å»ºäº†åˆå§‹åŒºå—ï¼Œç°åœ¨ä¸°å¯Œä¸€ä¸‹åˆå§‹åŒºå—çš„äº¤æ˜“ä¿¡æ¯ä½œä¸ºå†…å®¹ï¼Œä¹‹å‰çš„dateå¾—æ·˜æ±°äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BaseTX</span> <span class="params">(toaddress []<span class="type">byte</span>)</span></span> *Transaction  &#123;</span><br><span class="line">   txin:=TXintput&#123;[]<span class="type">byte</span>&#123;&#125;,<span class="number">-1</span>,[]<span class="type">byte</span>&#123;&#125;&#125;</span><br><span class="line">   txout:=TXoutput&#123;constcoe.Initcoin,toaddress&#125;</span><br><span class="line">   tx:=Transaction&#123;[]<span class="type">byte</span>(<span class="string">&quot;god&quot;</span>),[]TXintput&#123;txin&#125;,[]TXoutput&#123;txout&#125;&#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;tx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(tx *Transaction )</span></span>Isbase() <span class="type">bool</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">len</span>(tx.Inputs)==<span class="number">1</span> &amp;&amp; tx.Inputs[<span class="number">0</span>].Outidx==<span class="number">-1</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªbasetxçš„å‡½æ•°ï¼Œè¾“å…¥ç¬¬ä¸€ç¬”äº¤æ˜“è¦ç»™çš„åœ°å€ï¼Œå› ä¸ºç¬¬ä¸€ç¬”äº¤æ˜“ä¹‹å‰æ²¡æœ‰äº¤æ˜“ï¼Œæ‰€ä»¥-1è¡¨ç¤ºã€‚constcoeåˆ™æ˜¯æˆ‘ä»¬å®šä¹‰çš„å¸¸é‡ç”¨ä½œæˆ‘ä»¬åˆ›å»ºæ—¶çš„æ€»çš„æ¯”ç‰¹å¸æ•°ç›®ï¼Œæˆ‘ä»¬è½¬åˆ°ä¹‹å‰å°±åˆ›å»ºçš„constcoe.goä¸­è®¾ç½®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Difficulty = <span class="number">10</span></span><br><span class="line"><span class="keyword">const</span> Initcoin=<span class="number">500</span></span><br></pre></td></tr></table></figure><p>isbaseåˆ™åˆ¤æ–­æ˜¯å¦æ˜¯åˆå§‹äº¤æ˜“ï¼Œç”¨ä½œä¹‹åçš„è®¡ç®—utxoçš„è¾…åŠ©ã€‚åªç”¨åˆ¤æ–­é•¿åº¦æ˜¯ä¸æ˜¯1ï¼Œå’Œå†…å®¹çš„outidxæ˜¯ä¸æ˜¯-1å°±å¥½äº†ã€‚</p><p>æˆ‘ä»¬ä¸Šè¾¹è®¾ç½®äº†ç¬¬ä¸€ç¬”äº¤æ˜“çš„å†…å®¹ï¼Œidæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æƒã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(in *TXintput)</span></span>Fromaddressright(address []<span class="type">byte</span>)  <span class="type">bool</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> bytes.Equal(in.Fromaddress,address)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(out *TXoutput)</span></span>Toaddressright(address []<span class="type">byte</span>)  <span class="type">bool</span>&#123;</span><br><span class="line"><span class="keyword">return</span> bytes.Equal(out.Toaddress,address)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è½¬åˆ°inoutput.goåˆ›å»ºä¸Šè¾¹çš„ä¿©ä¸ªå‡½æ•°ï¼Œä»¥åè®¡ç®—utxoæ—¶èƒ½èµ·åˆ°è¾…åŠ©ä½œç”¨ã€‚</p><p>ç°åœ¨ä»£ç å†™å®Œäº†ï¼Œé‡æ„ä¸€ä¸‹ä¹‹å‰çš„å†…å®¹ã€‚é¦–å…ˆæ˜¯ç»“æ„ä½“blockã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Block <span class="keyword">struct</span> &#123;</span><br><span class="line">   Timestamp <span class="type">int64</span></span><br><span class="line">   Hash      []<span class="type">byte</span></span><br><span class="line">   PrevHash  []<span class="type">byte</span></span><br><span class="line">   Target []<span class="type">byte</span></span><br><span class="line">   Nonce <span class="type">int64</span></span><br><span class="line">   transactions []*transaaction.Transaction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿”å›åŒºå—å“ˆå¸Œçš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¤„ç†äº¤æ˜“ä¿¡æ¯ï¼Œè®©å®ƒæˆä¸ºä¸€ä¸ªåºåˆ—ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span>Backtrasactionsummary() []<span class="type">byte</span> &#123;</span><br><span class="line">   txids:=<span class="built_in">make</span>([][]<span class="type">byte</span>,<span class="number">0</span>)</span><br><span class="line">   <span class="keyword">for</span> _,tx:=<span class="keyword">range</span> b.transactions&#123;</span><br><span class="line">      txids=<span class="built_in">append</span>(txids,tx.Id)</span><br><span class="line">   &#125;</span><br><span class="line">  summary:=bytes.Join(txids,[]<span class="type">byte</span>&#123;&#125;)</span><br><span class="line">  <span class="keyword">return</span> summary</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> SetHash() &#123;</span><br><span class="line">   information := bytes.Join([][]<span class="type">byte</span>&#123;utils.ToHexInt(b.Timestamp), b.PrevHash, b.Target,utils.ToHexInt(b.Nonce),b.Backtrasactionsummary()&#125;, []<span class="type">byte</span>&#123;&#125;)</span><br><span class="line">   hash := sha256.Sum256(information)</span><br><span class="line">   b.Hash = hash[:]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†…å®¹å°±æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªç©ºåˆ‡ç‰‡ç”¨æ¥è£…é›†åˆèµ·æ¥çš„äº¤æ˜“æ•°æ®ï¼Œéå†æ•´ä¸ªäº¤æ˜“æ•°æ®ï¼Œå°†è¾“å…¥è¾“å‡ºçš„å“ˆå¸Œå€¼ä¹Ÿå°±æ˜¯idé›†åˆèµ·æ¥è¿›è¡Œå“ˆå¸Œå€¼çš„è®¡ç®—ã€‚</p><p>ç”¨åˆ°çš„appendå‡½æ•°å’Œjoinå‡½æ•°éƒ½ä¸åˆ‡ç‰‡çš„æ“ä½œæœ‰å…³ç³»ï¼Œappendå‡½æ•°å¦‚æœåŸå§‹åˆ‡ç‰‡æœ‰è¶³å¤Ÿçš„å®¹é‡ï¼Œæ–°å…ƒç´ ä¼šè¢«æ·»åŠ åˆ°åŸåˆ‡ç‰‡çš„åé¢ï¼›å¦‚æœæ²¡æœ‰è¶³å¤Ÿå®¹é‡ï¼Œåˆ™ä¼šé‡æ–°åˆ†é…å†…å­˜å¹¶æ‹·è´åŸæœ‰å…ƒç´ å’Œæ–°å…ƒç´ ã€‚æ­¤å¤–ï¼Œ<code>append</code>å‡½æ•°è¿˜å¯ä»¥ç”¨äºåˆå¹¶å¤šä¸ªæ•°ç»„æˆ–åˆ‡ç‰‡ã€‚å®ƒæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œæ— éœ€å¼•å…¥ä»»ä½•åŒ…å³å¯ä½¿ç”¨ã€‚joinå‡½æ•°ä¸æ˜¯Goè¯­è¨€çš„æ ‡å‡†åº“å‡½æ•°ï¼Œå› æ­¤å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯æ¥å®ç°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<code>join</code>å¯èƒ½ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…¶ä»–ç±»å‹çš„å…ƒç´ è¿æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²æˆ–å…ƒç´ ã€‚</p><p>åœ¨è¿™é‡Œçš„appendè¾“å‡ºåˆ‡ç‰‡æ²¡åŠæ³•å‹‡æ€»å“ˆå¸Œå€¼è®¡ç®—ï¼Œæ‰€ä»¥ç”¨bytes.joinè½¬ä¸ºå­—èŠ‚åˆ‡ç‰‡å†è¾“å‡ºã€‚</p><p>ç„¶åä¿®æ”¹CreateBlockä¸GenesisBlockä¸¤ä¸ªå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateBlock</span><span class="params">(prevhash []<span class="type">byte</span>, txs []*transaaction.Transaction)</span></span> *Block &#123;</span><br><span class="line">   block := Block&#123;time.Now().Unix(), []<span class="type">byte</span>&#123;&#125;, prevhash, []<span class="type">byte</span>&#123;&#125;, <span class="number">0</span>, txs&#125;</span><br><span class="line">   block.Target = block.GetTarget()</span><br><span class="line">   block.Nonce=block.FindNonce()</span><br><span class="line">   block.SetHash()</span><br><span class="line">   <span class="keyword">return</span> &amp;block</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GenesisBlock</span><span class="params">()</span></span> *Block &#123;</span><br><span class="line">tx:=transaaction.BaseTX([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>))</span><br><span class="line">   <span class="keyword">return</span> CreateBlock([]<span class="type">byte</span>&#123;&#125;, []*transaaction.Transaction&#123;tx&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨åˆ›å»ºåˆ›ä¸–åŒºå—çš„åŒæ—¶ä¸€å¹¶åˆ›å»ºäº†åˆå§‹äº¤æ˜“ä¿¡æ¯ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰çš„å¸éƒ½è½¬äº†ã€‚</p><p>ç°åœ¨è½¬åˆ°proofofwork.goä¿®æ”¹getbse4nonceå‡½æ•°ã€‚</p><p>å‡½æ•°ç”¨ä½œåˆæˆå¸¦éšæœºæ•°çš„æ•°æ®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> GetBase4Nonce(nonce <span class="type">int64</span>) []<span class="type">byte</span> &#123;</span><br><span class="line">data := bytes.Join([][]<span class="type">byte</span>&#123;</span><br><span class="line">utils.ToHexInt(b.Timestamp),</span><br><span class="line">b.PrevHash,</span><br><span class="line">utils.ToHexInt(<span class="type">int64</span>(nonce)),</span><br><span class="line">b.Target,</span><br><span class="line">b.Backtrasactionsummary(),</span><br><span class="line">&#125;,</span><br><span class="line">[]<span class="type">byte</span>&#123;&#125;,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹AddBlockä¸CreateBlockChainä¸¤ä¸ªå‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> AddBlock(txs []*transaaction.Transaction) &#123;</span><br><span class="line">   newBlock := CreateBlock(bc.Blocks[<span class="built_in">len</span>(bc.Blocks)<span class="number">-1</span>].Hash, txs)</span><br><span class="line">   bc.Blocks = <span class="built_in">append</span>(bc.Blocks, newBlock)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateBlockChain</span><span class="params">()</span></span> *BlockChain &#123;</span><br><span class="line">   blockchain := BlockChain&#123;&#125;</span><br><span class="line">   blockchain.Blocks = <span class="built_in">append</span>(blockchain.Blocks, GenesisBlock())</span><br><span class="line">   <span class="keyword">return</span> &amp;blockchain</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¦‚æœåˆ›å»ºcreatetransactionè¿™æ ·çš„å‡½æ•°ï¼Œåˆ›å»ºäº¤æ˜“ä¿¡æ¯é‡ç‚¹å°±åœ¨äºæ‰¾åˆ°è¶³å¤Ÿçš„å‰ç½®äº¤æ˜“ä¿¡æ¯æ¥æ”¯æ’‘æœ¬æ¬¡äº¤æ˜“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span>Findunspentransactions(address []<span class="type">byte</span>)[]transaaction.Transaction  &#123;</span><br><span class="line"><span class="keyword">var</span> unspenttxs []transaaction.Transaction</span><br><span class="line">    spenttxs:=<span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>][]<span class="type">int</span>)</span><br><span class="line">   <span class="keyword">for</span> idx:=<span class="built_in">len</span>(bc.Blocks)<span class="number">-1</span>;idx&gt;=<span class="number">0</span>;idx-- &#123;</span><br><span class="line">      block:=bc.Blocks[idx]</span><br><span class="line">      <span class="keyword">for</span> _,tx:=<span class="keyword">range</span> block.transactions&#123;</span><br><span class="line">         txid:=hex.EncodeToString(tx.Id)</span><br><span class="line">   interoutputs:</span><br><span class="line">      <span class="keyword">for</span> outidx,out:=<span class="keyword">range</span> tx.Outputs&#123;</span><br><span class="line">         <span class="keyword">if</span> spenttxs[txid]!=<span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> _,spentout:=<span class="keyword">range</span> spenttxs[txid]&#123;</span><br><span class="line">               <span class="keyword">if</span> spentout == outidx&#123;</span><br><span class="line">                  <span class="keyword">continue</span>  interoutputs</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> out.Toaddressright(address)&#123;</span><br><span class="line">            unspenttxs=<span class="built_in">append</span>(unspenttxs,*tx)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">         <span class="keyword">if</span> !tx.Isbase() &#123;</span><br><span class="line">            <span class="keyword">for</span> _,in:=<span class="keyword">range</span> tx.Inputs&#123;</span><br><span class="line">               <span class="keyword">if</span> in.Fromaddressright(address)&#123;</span><br><span class="line">                  intxid:=hex.EncodeToString(in.TXid)</span><br><span class="line">                  spenttxs[intxid]=<span class="built_in">append</span>(spenttxs[intxid],in.Outidx)</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">return</span> unspenttxs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç è§£è¯»å°±æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ²¡æœ‰èŠ±è´¹çš„ç»“æ„ä½“é›†åˆå’Œä¸€ä¸ªç”¨äºè£…å·²ç»èŠ±è´¹çš„æ˜ å°„ï¼Œæ˜ å°„é‡Œæ˜¯idæ˜ å°„å‰ç½®ç¬¬å‡ æ¯”äº¤æ˜“ã€‚è¿›è¡ŒåŒºå—çš„å€’å¾ªç¯ï¼Œéå†æ²¡ä¸€ä¸ªåŒºå—çš„idã€‚ç„¶åéå†è¾“å‡ºçš„åœ°å€åœ¨æ˜ å°„é‡Œæ˜¯ä¸æ˜¯èƒ½æ‰¾å¾—åˆ°ï¼Œæ‰¾å¾—åˆ°çš„è¯åˆ‡ç‰‡é‡Œä¹Ÿå¯¹çš„ä¸Šä¹Ÿæ˜¯å‰ç½®äº¤æ˜“çš„ç¬¬å‡ æ¯”äº¤æ˜“ï¼Œé‚£ä¹ˆå°±æ˜¯å·²ç»èŠ±è´¹å¹¶ä¸”å·²ç»è®°å½•çš„äº¤æ˜“ã€‚å¦‚æœä¸ä¸€æ ·é‚£ä¹ˆçœ‹æ˜¯ä¸æ˜¯è¾“å…¥åˆ°è¿™ä¸ªåœ°å€ï¼Œå¦‚æœæ˜¯é‚£å°±æ˜¯æ²¡è¢«èŠ±è´¹çš„ã€‚åˆ¤æ–­æ˜¯å¦æ˜¯åˆå§‹äº¤æ˜“å¦‚æœä¸æ˜¯å³éå†å‰ç½®äº¤æ˜“ï¼Œå¦‚æœæ˜¯å¯¹åº”çš„åœ°å€å°±ä»£è¡¨å·²ç»èŠ±è´¹ï¼Œåˆ™è®¡å…¥æ˜ å°„å’Œæ¥è‡ªå‰ç½®äº¤æ˜“ç¬¬å‡ æ¯”äº¤æ˜“ã€‚</p><p><em>æœ‰ç‚¹ä¹±ï¼Œç†è§£ä¸€ä¸‹å°±æ‡‚äº†</em></p><p>åˆ©ç”¨findunspenttransactionså‡½æ•°è¿”å›çš„æ²¡æ¶ˆè´¹çš„äº¤æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸ªåœ°å€çš„æ‰€æœ‰uxtoã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> FindUTXOs(address []<span class="type">byte</span>) (<span class="type">int</span>, <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) &#123;</span><br><span class="line">   unspentOuts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">   unspentTxs := bc.Findunspentransactions(address)</span><br><span class="line">   accumulated := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Work:</span><br><span class="line">   <span class="keyword">for</span> _, tx := <span class="keyword">range</span> unspentTxs &#123;</span><br><span class="line">      txID := hex.EncodeToString(tx.Id)</span><br><span class="line">      <span class="keyword">for</span> outIdx, out := <span class="keyword">range</span> tx.Outputs &#123;</span><br><span class="line">         <span class="keyword">if</span> out.Toaddressright(address) &#123;</span><br><span class="line">            accumulated += out.Value</span><br><span class="line">            unspentOuts[txID] = outIdx<span class="comment">//å¦‚æœä¸€ç¬”äº¤æ˜“æœ‰å¥½å¤šæ¬¡è½¬å‘è¿™ä¸ªåœ°å€çš„äº¤æ˜“ï¼Œåªä¼šè®°å½•æœ€åä¸€ç¬”çš„outidx</span></span><br><span class="line">            <span class="keyword">continue</span> Work</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> accumulated, unspentOuts</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éå†æ²¡æœ‰èŠ±è´¹çš„äº¤æ˜“é‡Œè¾¹çš„outputsï¼Œéå†ä¸€ä¸‹æŠŠvalueæ±‡æ€»ä¸€ä¸‹ï¼Œåœ°å€æ·»åŠ åˆ°ç´¢å¼•é‡Œã€‚æ¯ä¸ªäº¤æ˜“åªèƒ½æœ‰ä¸€ä¸ªè¾“å‡ºè·Ÿç»™å®šçš„åœ°å€ç›¸å…³è”ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span>Findspendableoutputs(address []<span class="type">byte</span>,amount <span class="type">int</span>)(<span class="type">int</span>,<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) &#123;</span><br><span class="line">unspentouts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">unspenttxs := bc.Findunspentransactions(address)</span><br><span class="line">accumulated:=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">work:</span><br><span class="line"><span class="keyword">for</span> _,tx:=<span class="keyword">range</span> unspenttxs&#123;</span><br><span class="line">txid:=hex.EncodeToString(tx.Id)</span><br><span class="line"><span class="keyword">for</span> outidx,out:=<span class="keyword">range</span> tx.Outputs&#123;</span><br><span class="line"><span class="keyword">if</span> out.Toaddressright(address)&amp;&amp;accumulated&lt;amount&#123;</span><br><span class="line">accumulated+=out.Value</span><br><span class="line">unspentouts[txid]=outidx</span><br><span class="line"><span class="keyword">if</span> accumulated&gt;=amount&#123;<span class="keyword">break</span> work</span><br><span class="line">                                          &#125;</span><br><span class="line"><span class="keyword">continue</span> work</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> accumulated,unspentouts</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åªéœ€è¦æ‰¾åˆ°èµ„äº§æ€»é‡å¤§äºæœ¬æ¬¡äº¤æ˜“è½¬è´¦çš„ä¸€éƒ¨åˆ†utxoå°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦æ¯ä¸€ç¬”éƒ½è®¡ç®—åœ¨å†…ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span>Creatransaction(from,to []<span class="type">byte</span>,amount <span class="type">int</span>)(*transaaction.Transaction,<span class="type">bool</span>)  &#123;</span><br><span class="line">   <span class="keyword">var</span> inputs []transaaction.TXintput</span><br><span class="line">   <span class="keyword">var</span> outputs []transaaction.TXoutput</span><br><span class="line">   acc,validoutputs:=bc.Findspendableoutputs(from,amount)</span><br><span class="line">   <span class="keyword">if</span> acc&lt;amount&#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;ä¸å¤Ÿ&quot;</span>)</span><br><span class="line">      <span class="keyword">return</span> &amp;transaaction.Transaction&#123;&#125;,<span class="literal">false</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> txid,outidx:=<span class="keyword">range</span> validoutputs &#123;</span><br><span class="line">      txid,err:=hex.DecodeString(txid)</span><br><span class="line">      utils.Handle(err)</span><br><span class="line">      intput:=transaaction.TXintput&#123;txid,outidx,from&#125;</span><br><span class="line">      inputs=<span class="built_in">append</span>(inputs,intput)</span><br><span class="line">   &#125;</span><br><span class="line">   outputs = <span class="built_in">append</span>(outputs, transaaction.TXoutput&#123;amount, to&#125;)</span><br><span class="line">   <span class="keyword">if</span> acc &gt; amount &#123;</span><br><span class="line">      outputs = <span class="built_in">append</span>(outputs, transaaction.TXoutput&#123;acc - amount, from&#125;)</span><br><span class="line">   &#125;</span><br><span class="line">   tx := transaaction.Transaction&#123;<span class="literal">nil</span>, inputs, outputs&#125;</span><br><span class="line">   tx.Setid()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> &amp;tx, <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œå…ˆå°äºå†ç­‰äºå†å¤§äºï¼Œå°äºå°±æŠ¥é”™è¿”å›ä¸å¤Ÿï¼Œç­‰äºå°±ç›´æ¥è¾“å‡ºï¼Œå¤§äºå°±åœ¨ç­‰äºçš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ç¬”å°†å‰©ä½™å¸è¿”å›ç»™è‡ªå·±çš„ç¨‹åºã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span>Mine(txs []*transaaction.Transaction)  &#123;</span><br><span class="line">   bc.AddBlock(txs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µå‡½æ•°æ¨¡æ‹ŸçŸ¿å·¥çš„æ‰“åŒ…è¿‡ç¨‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   txPool := <span class="built_in">make</span>([]*transaaction.Transaction, <span class="number">0</span>)</span><br><span class="line">   <span class="keyword">var</span> tempTx *transaaction.Transaction</span><br><span class="line">   <span class="keyword">var</span> ok <span class="type">bool</span></span><br><span class="line">   <span class="keyword">var</span> property <span class="type">int</span></span><br><span class="line">   chain := blockchain.CreateBlockChain()</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of yangyan: &quot;</span>, property)</span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;K&quot;</span>), <span class="number">100</span>)</span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line">   chain.Mine(txPool)</span><br><span class="line">   txPool = <span class="built_in">make</span>([]*transaaction.Transaction, <span class="number">0</span>)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;Leo Cao&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of yangyan: &quot;</span>, property)</span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;K&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>), <span class="number">200</span>) <span class="comment">// this transaction is invalid</span></span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;K&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>), <span class="number">50</span>)</span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>), <span class="number">100</span>)</span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line">   chain.Mine(txPool)</span><br><span class="line">   txPool = <span class="built_in">make</span>([]*transaaction.Transaction, <span class="number">0</span>)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Leo Cao: &quot;</span>, property)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;K&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Krad: &quot;</span>, property)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Exia: &quot;</span>, property)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> _, block := <span class="keyword">range</span> chain.Blocks &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Timestamp: %d\n&quot;</span>, block.Timestamp)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;hash: %x\n&quot;</span>, block.Hash)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Previous hash: %x\n&quot;</span>, block.PrevHash)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;nonce: %d\n&quot;</span>, block.Nonce)</span><br><span class="line">      fmt.Println(<span class="string">&quot;Proof of Work validation:&quot;</span>, block.ValidatePoW())</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å±•ç¤ºä¸€ä¸‹åŒèŠ±é—®é¢˜</span></span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;Krad&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>), <span class="number">30</span>)</span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   tempTx, ok = chain.Creatransaction([]<span class="type">byte</span>(<span class="string">&quot;Krad&quot;</span>), []<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>), <span class="number">30</span>)</span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      txPool = <span class="built_in">append</span>(txPool, tempTx)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   chain.Mine(txPool)</span><br><span class="line">   txPool = <span class="built_in">make</span>([]*transaaction.Transaction, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> _, block := <span class="keyword">range</span> chain.Blocks &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Timestamp: %d\n&quot;</span>, block.Timestamp)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;hash: %x\n&quot;</span>, block.Hash)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;Previous hash: %x\n&quot;</span>, block.PrevHash)</span><br><span class="line">      fmt.Printf(<span class="string">&quot;nonce: %d\n&quot;</span>, block.Nonce)</span><br><span class="line">      fmt.Println(<span class="string">&quot;Proof of Work validation:&quot;</span>, block.ValidatePoW())</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;yangyan&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Leo Cao: &quot;</span>, property)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;K&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Krad: &quot;</span>, property)</span><br><span class="line">   property, _ = chain.FindUTXOs([]<span class="type">byte</span>(<span class="string">&quot;E&quot;</span>))</span><br><span class="line">   fmt.Println(<span class="string">&quot;Balance of Exia: &quot;</span>, property)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯è°ƒè¯•çš„è¿‡ç¨‹</p><ol><li>åˆ›å»ºä¸€ä¸ªç©ºçš„äº¤æ˜“æ± ï¼ˆtxPoolï¼‰å’Œä¸€ä¸ªä¸´æ—¶äº¤æ˜“å˜é‡ï¼ˆtempTxï¼‰ã€‚</li><li>åˆ›å»ºä¸€ä¸ªåŒºå—é“¾å®ä¾‹ï¼ˆchainï¼‰ã€‚</li><li>æŸ¥æ‰¾åä¸ºâ€yangyanâ€çš„åœ°å€çš„UTXOsï¼ˆæœªä½¿ç”¨çš„äº¤æ˜“è¾“å‡ºï¼‰ï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªä»â€yangyanâ€åˆ°â€Kâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º100ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚</li><li>æ¸…ç©ºäº¤æ˜“æ± ï¼Œå†æ¬¡æŸ¥æ‰¾â€Lâ€çš„åœ°å€çš„UTXOsï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªæ— æ•ˆçš„äº¤æ˜“ï¼Œä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º200ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„äº¤æ˜“ï¼Œä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º50ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„äº¤æ˜“ï¼Œä»â€yangyanâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º100ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚</li><li>æ¸…ç©ºäº¤æ˜“æ± ã€‚</li><li>éå†åŒºå—é“¾ä¸­çš„æ‰€æœ‰åŒºå—ï¼Œæ‰“å°æ¯ä¸ªåŒºå—çš„æ—¶é—´æˆ³ã€å“ˆå¸Œå€¼ã€å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€éšæœºæ•°ä»¥åŠå·¥ä½œé‡è¯æ˜éªŒè¯ç»“æœã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º30ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å°è¯•åˆ›å»ºä¸€ä¸ªä»â€Kâ€åˆ°â€yangyanâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º30ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚</li><li>å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚</li><li>æ¸…ç©ºäº¤æ˜“æ± ã€‚</li><li>éå†åŒºå—é“¾ä¸­çš„æ‰€æœ‰åŒºå—ï¼Œæ‰“å°æ¯ä¸ªåŒºå—çš„æ—¶é—´æˆ³ã€å“ˆå¸Œå€¼ã€å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€éšæœºæ•°ä»¥åŠå·¥ä½œé‡è¯æ˜éªŒè¯ç»“æœã€‚</li><li>æŸ¥æ‰¾å„ä¸ªåœ°å€çš„UTXOsï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹&quot;&gt;&lt;a href=&quot;#äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹&quot;&gt;&lt;/a&gt;äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹&lt;/h1&gt;&lt;p&gt;åŒºå—é“¾ä¸­çš„è´§å¸å­˜å‚¨æ˜¯è®°å½•äº¤æ˜“çš„è¿‡ç¨‹ï¼Œè€Œéè®°å½•æœ€ç»ˆçš„è´§å¸æ•°é‡ã€‚å¹³æ—¶ä½¿ç”¨</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>ç®€å•åŒºå—é“¾çš„powéªŒè¯æœºåˆ¶çš„æ·»åŠ </title>
    <link href="http://example.com/2023/12/02/%E7%AE%80%E5%8D%95%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84pow%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E7%9A%84%E6%B7%BB%E5%8A%A0/"/>
    <id>http://example.com/2023/12/02/%E7%AE%80%E5%8D%95%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84pow%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E7%9A%84%E6%B7%BB%E5%8A%A0/</id>
    <published>2023-12-02T13:04:48.000Z</published>
    <updated>2023-12-06T08:13:25.561Z</updated>
    
    <content type="html"><![CDATA[<h4 id="powå·¥ä½œé‡è¯æ˜æœºåˆ¶"><a href="#powå·¥ä½œé‡è¯æ˜æœºåˆ¶" class="headerlink" title="powå·¥ä½œé‡è¯æ˜æœºåˆ¶"></a>powå·¥ä½œé‡è¯æ˜æœºåˆ¶</h4><p>å·¥ä½œé‡è¯æ˜æœºåˆ¶åŠ åˆ°åŒºå—é“¾é‡Œå°±æ˜¯æ•´ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°åœ¨çŸ¿å·¥æŒ–çŸ¿æ—¶å†³å®šäº†ä¸‹ä¸€ä¸ªåŒºå—ä¼šç»™åˆ°è°çš„æ‰‹é‡Œï¼Œéšæœºæ•°åŠ åˆ°æ•°æ®é‡Œè¾¹ç„¶åè¿›è¡Œå“ˆå¸Œå€¼çš„è®¡ç®—ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªèŒƒå›´é‡Œè¾¹ã€‚</p><p><em>è¿›è¡Œpowæ‰©å±•ä¹‹å‰å…ˆç»™ä»£ç è§„èŒƒä¸€ä¸‹ï¼Œåˆ›å»ºä¸€äº›æ–‡ä»¶å¤¹è¿›è¡Œä»£ç çš„ç®¡ç†</em></p><p>å…ˆæ•´ä¸ªæ–‡ä»¶å¤¹constcoeç„¶åæ•´ä¸ªå…¨å±€å˜é‡ï¼Œç”¨æ¥è£…æŒ–çŸ¿çš„éš¾åº¦ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constcoe.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> constcoe</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">Difficulty = <span class="number">12</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ•´ä¸ªå‡½æ•°åŒ…ã€‚å…ˆæ•´ä¸ªé”™è¯¯å‡½æ•°ï¼Œé”™è¯¯ç›´æ¥åœæ­¢ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handle</span><span class="params">(err <span class="type">error</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Panic(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠint64ä½è½¬å­—èŠ‚ä¸²å‡½æ•°ç§»åŠ¨è¿‡æ¥å’Œé‚£ä¸ªç»“æ„ä½“ä»€ä¹ˆçš„ã€‚</p><p>å€™é€‰åŒºå—åŠ å…¥åˆ°åŒºå—é“¾æ˜¯éœ€è¦powè¯æ˜çš„ï¼Œå¦‚æœä¸€ä¸ªåŒºå—å¯ä»¥æ§åˆ¶ä¸‹ä¸€ä¸ªåŒºå—æ˜¯ä¸æ˜¯è‡ªå·±çš„æ—¶å€™ï¼Œä»–å°±æœ‰äº†å¯ä»¥åŒé‡æ”¯ä»˜çš„èƒ½åŠ›ã€‚å¦‚æœç”¨äº†å·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼Œå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œé¦–å…ˆçŸ¿å·¥ä¼šç­›é€‰äº¤æ˜“ï¼Œç„¶åå› ä¸ºå­˜åœ¨éšæœºå€¼ï¼Œè°ä¹Ÿä¸èƒ½ç¡®å®šåˆ°åº•è°ä¼šè·å¾—ä¸‹ä¸€ä¸ªåŒºå—ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è§£å†³åŒèŠ±é—®é¢˜äº†ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¦å¢åŠ ä¸€äº›åŒºå—çš„å¤´éƒ¨ä¿¡æ¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Block <span class="keyword">struct</span> &#123;</span><br><span class="line">Timestamp <span class="type">int64</span></span><br><span class="line">Hash      []<span class="type">byte</span></span><br><span class="line">PrevHash  []<span class="type">byte</span></span><br><span class="line">Target    []<span class="type">byte</span> <span class="comment">//This line is new</span></span><br><span class="line">Nonce     <span class="type">int64</span>  <span class="comment">//This line is new</span></span><br><span class="line">Data      []<span class="type">byte</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>targetä½œä¸ºç»“æœå“ˆå¸Œå€¼çš„æ¯”è¾ƒéš¾åº¦ã€‚nonceä½œä¸ºè®¡ç®—å“ˆå¸Œå€¼çš„éšæœºæ•°ã€‚</p><p>åˆ›å»ºä¸€ä¸ªproofofwork.goï¼Œå†…å®¹æ”¾æˆ‘ä»¬ä¹‹å‰è¯´çš„powå…±è¯†æœºåˆ¶ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯ä»¥è¿”å›ç›®æ ‡éš¾åº¦å€¼å¾—å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰è®¾å®šçš„ä¸€ä¸ªå¸¸é‡difficultyæ¥æ„é€ ç›®æ ‡éš¾åº¦ï¼Œ<em>åœ¨å®é™…åŒºå—é“¾ä¸­ç›®æ ‡éš¾åº¦ä¹‹ä¼šæ ¹æ®ç½‘ç»œæƒ…å†µå®šæ—¶è¿›è¡Œè°ƒæ•´</em>ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> GetTarget() []<span class="type">byte</span> &#123;</span><br><span class="line">target := big.NewInt(<span class="number">1</span>)</span><br><span class="line">target.Lsh(target, <span class="type">uint</span>(<span class="number">256</span>-constcoe.Difficulty))</span><br><span class="line"><span class="keyword">return</span> target.Bytes()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>Lshå‡½æ•°å°±æ˜¯å‘å·¦ç§»ä½ï¼Œç§»çš„è¶Šå¤šç›®æ ‡éš¾åº¦å€¼è¶Šå¤§ï¼Œå“ˆå¸Œå–å€¼è½åœ¨çš„ç©ºé—´å°±æ›´å¤šä¹Ÿå°±è¶Šå®¹æ˜“æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„nonceã€‚</em></p><p>ä¸‹é¢çš„å‡½æ•°æ˜¯ç”¨ä½œè¾“å…¥ä¸€æ®µnonceå€¼ï¼Œè¿›è¡ŒåŒºå—çš„å“ˆå¸Œå€¼è¿ç®—ã€‚ä¸åŒçš„nonceå€¼ä¼šè¿”å›ä¸åŒçš„å“ˆå¸Œå€¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> GetBase4Nonce(nonce <span class="type">int64</span>) []<span class="type">byte</span> &#123;</span><br><span class="line">data := bytes.Join([][]<span class="type">byte</span>&#123;</span><br><span class="line">utils.ToHexInt(b.Timestamp),</span><br><span class="line">b.PrevHash,</span><br><span class="line">utils.ToHexInt(<span class="type">int64</span>(nonce)),</span><br><span class="line">b.Target,</span><br><span class="line">b.Data,</span><br><span class="line">&#125;,</span><br><span class="line">[]<span class="type">byte</span>&#123;&#125;,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯¹äºä»»æ„ä¸€ä¸ªåŒºå—ï¼Œæˆ‘ä»¬éƒ½èƒ½å»å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„nonceäº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> FindNonce() <span class="type">int64</span> &#123;</span><br><span class="line"><span class="keyword">var</span> intHash big.Int</span><br><span class="line"><span class="keyword">var</span> intTarget big.Int</span><br><span class="line"><span class="keyword">var</span> hash [<span class="number">32</span>]<span class="type">byte</span></span><br><span class="line"><span class="keyword">var</span> nonce <span class="type">int64</span></span><br><span class="line">nonce = <span class="number">0</span></span><br><span class="line">intTarget.SetBytes(b.Target)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> nonce &lt; math.MaxInt64 &#123;</span><br><span class="line">data := b.GetBase4Nonce(nonce)</span><br><span class="line">hash = sha256.Sum256(data)</span><br><span class="line">intHash.SetBytes(hash[:])</span><br><span class="line"><span class="keyword">if</span> intHash.Cmp(&amp;intTarget) == <span class="number">-1</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">nonce++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> nonce</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°çš„å¤§å°ã€‚å¦‚æœ<code>intHash.Cmp(&amp;intTarget)</code>è¿”å›-1ï¼Œè¡¨ç¤º<code>intHash</code>å°äº<code>intTarget</code>ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªéªŒè¯çš„å‡½æ•°ï¼Œç”¨ä½œéªŒè¯æ˜¯å¦éšæœºæ•°æ­£ç¡®</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> ValidatePoW() <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">var</span> intHash big.Int</span><br><span class="line"><span class="keyword">var</span> intTarget big.Int</span><br><span class="line"><span class="keyword">var</span> hash [<span class="number">32</span>]<span class="type">byte</span></span><br><span class="line">intTarget.SetBytes(b.Target)</span><br><span class="line">data := b.GetBase4Nonce(b.Nonce)</span><br><span class="line">hash = sha256.Sum256(data)</span><br><span class="line">intHash.SetBytes(hash[:])</span><br><span class="line"><span class="keyword">if</span> intHash.Cmp(&amp;intTarget) == <span class="number">-1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PoWæˆ‘ä»¬å·²ç»å®ç°äº†ã€‚å›åˆ°block.goï¼Œè°ƒæ•´ä»¥ä¸‹å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> SetHash() &#123;</span><br><span class="line">information := bytes.Join([][]<span class="type">byte</span>&#123;utils.ToHexInt(b.Timestamp), b.PrevHash, b.Target, utils.ToHexInt(b.Nonce), b.Data&#125;, []<span class="type">byte</span>&#123;&#125;)</span><br><span class="line">hash := sha256.Sum256(information)</span><br><span class="line">b.Hash = hash[:]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateBlock</span><span class="params">(prevhash, data []<span class="type">byte</span>)</span></span> *Block &#123;</span><br><span class="line">block := Block&#123;time.Now().Unix(), []<span class="type">byte</span>&#123;&#125;, prevhash, []<span class="type">byte</span>&#123;&#125;, <span class="number">0</span>, data&#125;</span><br><span class="line">block.Target = block.GetTarget()</span><br><span class="line">block.Nonce = block.FindNonce()</span><br><span class="line">block.SetHash()</span><br><span class="line"><span class="keyword">return</span> &amp;block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å¯åŠ¨ç³»ç»Ÿäº†ï¼Œé€šè¿‡æ›´æ”¹difficultyæ¥è°ƒæ•´éš¾åº¦ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;powå·¥ä½œé‡è¯æ˜æœºåˆ¶&quot;&gt;&lt;a href=&quot;#powå·¥ä½œé‡è¯æ˜æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;powå·¥ä½œé‡è¯æ˜æœºåˆ¶&quot;&gt;&lt;/a&gt;powå·¥ä½œé‡è¯æ˜æœºåˆ¶&lt;/h4&gt;&lt;p&gt;å·¥ä½œé‡è¯æ˜æœºåˆ¶åŠ åˆ°åŒºå—é“¾é‡Œå°±æ˜¯æ•´ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°åœ¨çŸ¿å·¥æŒ–çŸ¿æ—¶å†³å®šäº†ä¸‹ä¸€ä¸ªåŒºå—</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€</title>
    <link href="http://example.com/2023/11/29/filegoland-goroutine%E5%92%8Cchannel%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9F%BA%E7%A1%80/"/>
    <id>http://example.com/2023/11/29/filegoland-goroutine%E5%92%8Cchannel%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9F%BA%E7%A1%80/</id>
    <published>2023-11-29T13:37:11.000Z</published>
    <updated>2023-12-06T07:51:52.480Z</updated>
    
    <content type="html"><![CDATA[<h3 id="goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€"><a href="#goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€" class="headerlink" title="goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€"></a>goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€</h3><h4 id="å•¥æ˜¯å¹¶å‘"><a href="#å•¥æ˜¯å¹¶å‘" class="headerlink" title="å•¥æ˜¯å¹¶å‘"></a>å•¥æ˜¯å¹¶å‘</h4><p>å¬è¯´å¾ˆæœ‰ç‰¹ç‚¹çš„å°±æ˜¯golandçš„å¹¶å‘ï¼Œæ‰€å†™çš„ä»£ç éƒ½æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€å¥ä»£ç æ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€å¥ï¼Œè¿™æ ·çš„ä»£ç é€»è¾‘ç®€å•ï¼Œä¹Ÿç¬¦åˆæˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ã€‚ä½†è¿™æ ·æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºè®¡ç®—æœºå¾ˆå¼ºå¤§ï¼Œå¦‚æœåªè®©å®ƒå¹²å®Œä¸€ä»¶äº‹æƒ…å†å¹²å¦å¤–ä¸€ä»¶äº‹æƒ…å°±å¤ªæµªè´¹äº†ã€‚æ¯”å¦‚ä¸€æ¬¾éŸ³ä¹è½¯ä»¶ï¼Œä½¿ç”¨å®ƒå¬éŸ³ä¹çš„æ—¶å€™è¿˜æƒ³è®©å®ƒä¸‹è½½æ­Œæ›²ï¼ŒåŒä¸€æ—¶åˆ»åšäº†ä¸¤ä»¶äº‹ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œè¿™å°±æ˜¯å¹¶å‘ã€‚å¹¶å‘å¯ä»¥è®©ä½ ç¼–å†™çš„ç¨‹åºåœ¨åŒä¸€æ—¶åˆ»å¤šåšå‡ ä»¶äº‹æƒ…ã€‚</p><h4 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h4><h5 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h5><p>æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µã€‚å½“ä½ å¯åŠ¨ä¸€ä¸ªè½¯ä»¶ï¼Œæ“ä½œåŒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹æ˜¯å¦‚é˜¿å¥çš„å·¥ä½œç©ºé—´ï¼Œå®ƒåŒ…å«äº†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰èµ„æºã€‚</p><h5 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h5><p>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„æ‰§è¡Œç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹è¢«æ“ä½œç³»ç»Ÿè°ƒåº¦æ‰§è¡Œï¼Œä¸€äº›è®¡ç®—æœºæ¡‘å¾·è¡Œä¸ºå°±ä¼šæœ‰å¤šä¸ªçº¿ç¨‹è¢«æ“ä½œç³»ç»ŸåŒæ—¶è°ƒåº¦æ‰§è¡Œçš„æƒ…å†µï¼Œè¿™å°±æ˜¯çº¿ç¨‹çš„å¹¶å‘ã€‚</p><h4 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h4><p>Goè¯­è¨€ä¸­æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µï¼Œåªæœ‰åç¨‹ï¼Œä¹Ÿç§°ä¸ºgoroutineã€‚ç›¸æ¯”çº¿ç¨‹æ¥è¯´ï¼Œåç¨‹æ›´åŠ è½»é‡ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥éšæ„å¯åŠ¨æˆåƒä¸Šä¸‡ä¸ªgoroutineã€‚</p><p>goroutineè¢«Go runtimeæ‰€è°ƒåº¦ï¼Œè¿™ä¸€ç‚¹ä¸çº¿ç¨‹ä¸ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒGoè¯­è¨€çš„å¹¶å‘æ˜¯ç”±Goè‡ªå·±è°ƒåº¦çš„ï¼Œè‡ªå·±å†³å®šåŒæ—¶æ‰§è¡Œå¤šå°‘ä¸ªgoroutineã€ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå“ªå‡ ä¸ªã€‚è¿™äº›å¯¹äºæˆ‘ä»¬å¼€å‘è€…æ¥è¯´å®Œå…¨é€æ˜ï¼Œåªéœ€è¦åœ¨ç¼–ç çš„æ—¶å€™å‘Šè¯‰Goè¯­è¨€è¦å¯åŠ¨å‡ ä¸ªgoroutineï¼Œè‡³äºå¦‚ä½•è°ƒåº¦æ‰§è¡Œï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒã€‚</p><p>å¯åŠ¨ä¸€ä¸ªgoroutineéå¸¸ç®€å•ï¼Œgoè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†goå…³é”®å­—ï¼Œç›¸æ¯”å…¶ä»–è¯­è¨€ç®€å•è®¸å¤šã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> fmt.Println(<span class="string">&quot;sad&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;qwe&quot;</span>)</span><br><span class="line">time.Sleep(time.Second)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œè°ƒç”¨fmt.printlnå‡½æ•°æ‰“å°sadã€‚æ‰€ä»¥è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªåç¨‹ï¼Œä¸€ä¸ªæ˜¯mainçš„ï¼Œä¸€ä¸ªæ˜¯goæŒ‚å‰ªå­å¯åŠ¨çš„ã€‚</p><p>è¯­æ³•å°±æ˜¯goä¹‹åè·Ÿä¸€ä¸ªæ–¹æ³•æˆ–è€…å‡½æ•°çš„è°ƒç”¨ã€‚</p><p>ä¸Šè¾¹ä»£ç çš„è¾“å‡ºæƒ…å†µæ˜¯qwe ç„¶åsadï¼Œ</p><p>ç¤ºä¾‹ä¸­çš„time.Sleep(time.Second)è¡¨ç¤ºç­‰å¾…ä¸€ç§’ï¼Œè¿™é‡Œæ˜¯è®©main goroutineç­‰ä¸€ç§’ï¼Œä¸ç„¶main goroutineæ‰§è¡Œå®Œæ¯•ç¨‹åºå°±é€€å‡ºäº†</p><p>æ„æ€å°±æ˜¯å¦å¤–æ‰¾ä¸ªçº¿è·¯æ‰§è¡Œæˆ‘çš„sadï¼Œæ‰€ä»¥å…ˆåé¡ºåºçœ‹æƒ…å†µå§å¯èƒ½ã€‚</p><h4 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h4><p>å¦‚æœå¾ˆå¤šä¸ªåç¨‹ï¼Œä»–ä»¬æ€ä¹ˆé€šä¿¡å‘¢ï¼Ÿè¿™å°±æ˜¯channelè¦ç»“å±€çš„é—®é¢˜</p><h5 id="å£°æ˜ä¸€ä¸ªç®¡é“"><a href="#å£°æ˜ä¸€ä¸ªç®¡é“" class="headerlink" title="å£°æ˜ä¸€ä¸ªç®¡é“"></a>å£°æ˜ä¸€ä¸ªç®¡é“</h5><p>å£°æ˜ä¸€ä¸ªç®¡é“å¾ˆç®€å•</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipe:<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>)</span><br></pre></td></tr></table></figure><p>chanæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè¡¨ç¤ºæ˜¯channelç±»å‹ã€‚åé¢çš„stringè¡¨ç¤ºchannelé‡Œçš„æ•°æ®æ˜¯stringã€‚é€šè¿‡channelå£°æ˜å¯ä»¥çœ‹åˆ°ï¼Œchanæ˜¯ä¸€ä¸ªé›†åˆç±»å‹ã€‚</p><p>å®šä¹‰å¥½ä¸€ä¸ªç®¡é“å°±å¯ä»¥æ“ä½œäº†ã€‚</p><p>å®ƒåªæœ‰ä¸¤ç§æ“ä½œï¼Œæ¥å—å’Œå‘é€</p><p>1)æ¥æ”¶ï¼šè·å–chanä¸­çš„å€¼ï¼Œæ“ä½œç¬¦ä¸ºï¼œ-chanã€‚</p><p>2)å‘é€ï¼šå‘chanå‘é€å€¼ï¼ŒæŠŠå€¼æ”¾åœ¨chanä¸­ï¼Œæ“ä½œç¬¦ä¸ºchanï¼œ-ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">ch:=<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(<span class="string">&quot;asd00&quot;</span>)</span><br><span class="line">   ch &lt;-<span class="string">&quot;okokok&quot;</span></span><br><span class="line">&#125;()</span><br><span class="line">fmt.Println(<span class="string">&quot;æˆ‘æ˜¯åç¨‹&quot;</span>)</span><br><span class="line">v:=&lt;-ch</span><br><span class="line">fmt.Println(<span class="string">&quot;æ¥å—chanä¸­çš„å€¼æ˜¯ï¼š&quot;</span>,v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºä¸ä¼šåœ¨æ–°çš„goroutineå®Œæˆä¹‹å‰é€€å‡ºäº†ï¼Œå› ä¸ºé€šè¿‡makeåˆ›å»ºçš„chanä¸­æ²¡æœ‰å€¼ï¼Œè€Œmain goroutineåˆæƒ³ä»chanä¸­è·å–å€¼ï¼Œè·å–ä¸åˆ°å°±ä¸€ç›´ç­‰å¾…ï¼Œç­‰åˆ°å¦ä¸€ä¸ªgoroutineå‘chanå‘é€å€¼ä¸ºæ­¢ã€‚</p><p>å› ä¸ºæœ€åä¸€ä¸ªprinté‡Œçš„æ˜¯æƒ³è¦æ¥å—vçš„å€¼ï¼Œä½†æ˜¯væ­¤æ—¶æ­¤åˆ»æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¸€ç›´ç­‰åˆ°å¦ä¸€ä¸ªåç¨‹ç»™vè¾“é€å€¼ã€‚</p><h5 id="æ— ç¼“å†²ç®¡é“"><a href="#æ— ç¼“å†²ç®¡é“" class="headerlink" title="æ— ç¼“å†²ç®¡é“"></a>æ— ç¼“å†²ç®¡é“</h5><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨makeåˆ›å»ºçš„chanå°±æ˜¯ä¸€ä¸ªæ— ç¼“å†²ç®¡é“ï¼Œå®ƒçš„å®¹é‡æ˜¯0ï¼Œä¸èƒ½å­˜å‚¨ä»»ä½•æ•°æ®ã€‚æ‰€ä»¥æ— ç¼“å†²ç®¡é“åªèµ·åˆ°ä¼ è¾“æ•°æ®çš„ä½œç”¨ï¼Œæ•°æ®å¹¶ä¸ä¼šåœ¨ç®¡é“ä¸­åšä»»ä½•åœç•™ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œæ— ç¼“å†²ç®¡é“çš„å‘é€å’Œæ¥æ”¶æ“ä½œæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œå®ƒä¹Ÿå¯ä»¥ç§°ä¸ºåŒæ­¥ç®¡é“ã€‚</p><h5 id="æœ‰ç¼“å†²ç®¡é“"><a href="#æœ‰ç¼“å†²ç®¡é“" class="headerlink" title="æœ‰ç¼“å†²ç®¡é“"></a>æœ‰ç¼“å†²ç®¡é“</h5><p>æœ‰ç¼“å†²é€šé“æ˜¯ç±»ä¼¼äºä¸€ä¸ªå¯é˜»å¡çš„é˜Ÿåˆ—ï¼Œå†…éƒ¨çš„å…ƒç´ å…ˆè¿›å…ˆå‡ºã€‚é€šè¿‡makeç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šå®¹é‡ï¼Œè¿›è€Œåˆ›å»ºä¸€ä¸ªæœ‰ç¼“å†²çš„ç®¡é“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ch:=<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘åˆ›å»ºäº†ä¸€ä¸ªå®¹é‡ä¸º5çš„ç®¡é“ï¼Œå†…éƒ¨çš„å…ƒç´ ç±»å‹æ˜¯intï¼Œä¹Ÿå°±æ˜¯è¯´ç®¡é“å†…éƒ¨å­˜æ”¾5ä¸ªç±»å‹çš„intå…ƒç´ ï¼Œå…ˆè¿›å…ˆå‡ºã€‚</p><p>ä¸€ä¸ªæœ‰ç¼“å†²ç®¡é“å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><p>1)æœ‰ç¼“å†²ç®¡é“çš„å†…éƒ¨æœ‰ä¸€ä¸ªç¼“å†²é˜Ÿåˆ—ã€‚</p><p>2)å‘é€æ“ä½œæ˜¯å‘é˜Ÿåˆ—çš„å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineæ‰§è¡Œæ¥æ”¶æ“ä½œé‡Šæ”¾é˜Ÿåˆ—çš„ç©ºé—´ã€‚</p><p>3)æ¥æ”¶æ“ä½œæ˜¯ä»é˜Ÿåˆ—çš„å¤´éƒ¨è·å–å…ƒç´ å¹¶æŠŠå®ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineæ‰§è¡Œï¼Œå‘é€æ“ä½œæ’å…¥æ–°çš„å…ƒç´ ã€‚</p><p><em>ç¼“å†²ç®¡é“ç±»ä¼¼ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥è·å–ä»–çš„å®¹é‡å’Œé‡Œé¢å…ƒç´ çš„ä¸ªæ•°å’Œå®¹é‡ã€‚</em></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ch:=<span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>,<span class="number">5</span>)</span><br><span class="line">ch&lt;<span class="number">-2</span></span><br><span class="line">ch&lt;<span class="number">-3</span></span><br><span class="line">fmt.Println(<span class="built_in">cap</span>(ch),<span class="built_in">len</span>(ch))</span><br></pre></td></tr></table></figure><p><strong>æ— ç¼“å†²ç®¡é“å…¶å®å°±æ˜¯ä¸€ä¸ªå®¹é‡å¤§å°ä¸º0çš„ç®¡é“ã€‚æ¯”å¦‚make(chan intï¼Œ0)ã€‚</strong></p><h5 id="å…³é—­é€šé“"><a href="#å…³é—­é€šé“" class="headerlink" title="å…³é—­é€šé“"></a>å…³é—­é€šé“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">close</span>(ch)</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªç®¡é“è¢«å…³é—­ï¼Œå°±ä¸èƒ½å‘é‡Œé¢å‘é€æ•°æ®äº†ï¼Œå¦‚æœå‘é€çš„è¯ï¼Œä¼šå¼•èµ·panicå¼‚å¸¸ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥æ¥æ”¶ç®¡é“é‡Œçš„æ•°æ®ï¼Œå¦‚æœç®¡é“é‡Œæ²¡æœ‰æ•°æ®çš„è¯ï¼Œæ¥æ”¶çš„æ•°æ®æ˜¯å…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚</p><h5 id="å•å‘é€šé“"><a href="#å•å‘é€šé“" class="headerlink" title="å•å‘é€šé“"></a>å•å‘é€šé“</h5><p>maybeæœ‰æ—¶å€™æˆ‘ä»¬çš„ç‰¹æ®Šéœ€æ±‚é™åˆ¶ä¸€ä¸ªç®¡é“åªèƒ½æ¥å—ä¸èƒ½å‘é€ï¼Œæˆ–è€…é™åˆ¶ä¸€ä¸ªç®¡é“åªèƒ½å‘é€ä¸èƒ½æ¥æ”¶ï¼Œå°±å«åšå•å‘ç®¡é“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onlysend:=<span class="built_in">make</span>(<span class="keyword">chan</span>&lt;- <span class="type">int</span>,<span class="number">5</span>)</span><br><span class="line">onlyreceive:=<span class="built_in">make</span>(&lt;-<span class="keyword">chan</span> <span class="type">int</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>å•å‘ç®¡é“çš„å£°æ˜ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å£°æ˜çš„æ—¶å€™å¸¦ä¸Šï¼œ-æ“ä½œç¬¦å³å¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">conter</span><span class="params">(out <span class="keyword">chan</span>&lt;- <span class="type">int</span>)</span></span>  &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°ä½“å†…æ‰€ç”¨çš„å‚æ•°outæ˜¯ä¸€ä¸ªåªèƒ½å‘é€çš„ç®¡é“ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…åªèƒ½å¯¹outå‡½æ•°è¿›è¡Œå‘é€æ“ä½œï¼Œå¦‚æœæ‰§è¡Œæ¥å—æ“ä½œå°±ä¸èƒ½ç¼–è¯‘é€šè¿‡äº†ã€‚</p><h4 id="select-channelç¤ºä¾‹"><a href="#select-channelç¤ºä¾‹" class="headerlink" title="select+channelç¤ºä¾‹"></a>select+channelç¤ºä¾‹</h4><p>å‡è®¾è¦ä»ç½‘ä¸Šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘å¯åŠ¨äº†3ä¸ªgoroutineè¿›è¡Œä¸‹è½½ï¼Œå¹¶æŠŠç»“æœå‘é€åˆ°3ä¸ªchannelï¼ˆç®¡é“ï¼‰ä¸­ã€‚å…¶ä¸­ï¼Œå“ªä¸ªå…ˆä¸‹è½½å¥½ï¼Œå°±ä¼šä½¿ç”¨å“ªä¸ªchannelçš„ç»“æœã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•è·å–ç¬¬ä¸€ä¸ªchannelçš„ç»“æœï¼Œç¨‹åºå°±ä¼šè¢«é˜»å¡ï¼Œæ— æ³•è·å–å‰©ä¸‹ä¸¤ä¸ªchannelçš„ç»“æœï¼Œä¹Ÿæ— æ³•åˆ¤æ–­å“ªä¸ªå…ˆä¸‹è½½å¥½ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å¤šè·¯å¤ç”¨æ“ä½œäº†ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œé€šè¿‡selectè¯­å¥å¯ä»¥å®ç°å¤šè·¯å¤ç”¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> urls = []<span class="type">string</span>&#123;<span class="string">&quot;http://example.com/file1&quot;</span>, <span class="string">&quot;http://example.com/file2&quot;</span>, <span class="string">&quot;http://example.com/file3&quot;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> resultChannels = <span class="built_in">make</span>([]<span class="keyword">chan</span> <span class="type">string</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line"><span class="keyword">go</span> downloadFile(urls[i], resultChannels[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> result := &lt;-resultChannels[i]:</span><br><span class="line">fmt.Println(<span class="string">&quot;Downloaded file:&quot;</span>, result)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">    </span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>downloadFile</code>å‡½æ•°æ¥æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½ä»»åŠ¡ï¼Œå¹¶å°†ç»“æœå‘é€åˆ°å¯¹åº”çš„é€šé“ä¸­ã€‚åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†3ä¸ªé€šé“ï¼Œå¹¶å¯åŠ¨äº†3ä¸ªgoroutineæ¥æ‰§è¡Œä¸‹è½½ä»»åŠ¡ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>select</code>è¯­å¥æ¥ç›‘å¬æ¯ä¸ªé€šé“ï¼Œå½“æŸä¸ªé€šé“æœ‰æ•°æ®æ—¶ï¼Œå°±ç«‹å³è·å–åˆ°ç»“æœå¹¶æ‰“å°å‡ºæ¥ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€&quot;&gt;&lt;a href=&quot;#goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€&quot;&gt;&lt;/a&gt;goroutineå’Œchannel</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯†åŒºå—é“¾-åŠ¨æ‰‹åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾</title>
    <link href="http://example.com/2023/11/27/file%E5%88%9D%E8%AF%86%E5%8C%BA%E5%9D%97%E9%93%BE-%E5%8A%A8%E6%89%8B%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    <id>http://example.com/2023/11/27/file%E5%88%9D%E8%AF%86%E5%8C%BA%E5%9D%97%E9%93%BE-%E5%8A%A8%E6%89%8B%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE/</id>
    <published>2023-11-27T14:58:45.000Z</published>
    <updated>2023-12-06T07:51:24.149Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾"><a href="#å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾" class="headerlink" title="å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾"></a>å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾</h4><p><em>å…¶å®ä¸»è¦æ˜¯å¯¹äºgoçš„åŸºç¡€è¯­æ³•åˆšåˆšå­¦å®Œæ‰€ä»¥æ‹¿æ¥ç»ƒæ‰‹</em></p><p>1.ç”¨structå‡½æ•°åˆ¶ä½œä¸€ä¸ªå—ï¼Œå—åœ¨åŒºå—é“¾ä¸­ç”¨æ¥å‚¨å­˜æ•°æ®ä¿¡æ¯ï¼Œå®ƒå†…éƒ¨åŒ…å«ä¸Šä¸€ä¸ªåŒºå—çš„hashå€¼è¿æ¥ä¸Šä¸€ä¸ªåŒºå—ï¼ŒåŒ…å«å¤´éƒ¨ä¿¡æ¯æ€»ç»“åŒºå—ï¼Œç„¶åå†åŒºå—æ•°æ®çš„å­˜æ”¾åŒºå­˜æ”¾è¦ä¿å­˜çš„é‡è¦æ•°æ®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Block <span class="keyword">struct</span> &#123;</span><br><span class="line">   Timestamp <span class="type">int64</span><span class="comment">//æ—¶é—´æˆ³</span></span><br><span class="line">   Hash []<span class="type">byte</span><span class="comment">//æœ¬èº«å“ˆå¸Œå€¼</span></span><br><span class="line">   PrevHash []<span class="type">byte</span><span class="comment">//æŒ‡å‘ä¸Šä¸€ä¸ªåŒºå—</span></span><br><span class="line">   Data []<span class="type">byte</span><span class="comment">//å±æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.å¾—åˆ°åŒºå—ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€æ¡åŒºå—é“¾äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> BlockChain <span class="keyword">struct</span> &#123;</span><br><span class="line">   Blocks []*Block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŒºå—é“¾å°±æ˜¯åŒºå—çš„ä¸€ä¸ªé›†åˆã€‚åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ç”¨æ¥å‚¨å­˜æ¯ä¸ªåŒºå—ã€‚</p><p>æŒæ¡äº†å—å’ŒåŒºå—é“¾å°±å¯ä»¥ç»™åŒºå—å®¶ç”µç»†èŠ‚ï¼Œè§‚å¯Ÿä»–ä»¬æ˜¯å¦‚ä½•è¿æ¥èµ·æ¥çš„ã€‚å¯¹äºä¸€ä¸ªåŒºå—è€Œè¨€ï¼Œå¯ä»¥é€šè¿‡å“ˆå¸Œç®—æ³•æ¦‚æ‹¬å…¨éƒ¨çš„ä¿¡å¿ƒï¼Œå“ˆå¸Œå€¼å°±æ˜¯åŒºå—çš„idå€¼ï¼ŒåŒæ—¶ç”¨æ¥æ£€æŸ¥åŒºå—æ‰€åŒ…å«çš„ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚</p><p>3.hashå‡½æ•°</p><p>é¦–å…ˆåˆ›é€ ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—åŒºå—çš„ä¿¡æ¯ã€‚åŒºå—çš„ä¿¡æ¯è¦è®²æ‰€æœ‰çš„ä¿¡æ¯åˆå¹¶æˆä¸€æ¡å­—èŠ‚ä¸²ä¾›è®¡ç®—å“ˆå¸Œå€¼ã€‚joinå‡½æ•°æ˜¯bytesåŒ…ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œå°†è®¸å¤šçš„åˆ‡ç‰‡è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p>ç„¶ååˆ©ç”¨å“ˆå¸Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Block)</span></span> SetHash() &#123;</span><br><span class="line">   information :=bytes.Join([][]<span class="type">byte</span>&#123;ToHexInt(b.Timestamp),b.PrevHash,b.Data&#125;,[]<span class="type">byte</span>&#123;&#125;)</span><br><span class="line">    <span class="comment">//informationæ˜¯æŠŠåŒºå—å„é¡¹å±æ€§ä¸²è”ä¹‹åçš„å­—èŠ‚ä¸²</span></span><br><span class="line">    <span class="comment">//bytes.joinå¯ä»¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²é“¾æ¥</span></span><br><span class="line">   hash:=sha256.Sum256(information)</span><br><span class="line">    b.Hash=hash[:]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TOHexIntæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨ä½œå°†intç±»å‹è½¬æ¢byteç±»å‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ToHexInt</span><span class="params">(num <span class="type">int64</span>)</span></span> []<span class="type">byte</span> &#123;</span><br><span class="line">   buff := <span class="built_in">new</span>(bytes.Buffer)</span><br><span class="line">   err := binary.Write(buff, binary.BigEndian, num)</span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      log.Panic(err)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span>  buff.Bytes()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºbytes.Bufferå˜é‡çš„ä¸»è¦ç”¨é€”æ˜¯ç”¨äºé«˜æ•ˆåœ°å¤„ç†å­—èŠ‚æ•°æ®ã€‚</p><p>å¤§ç«¯å­—èŠ‚åºï¼ˆBig Endianï¼‰æ˜¯æŒ‡æœ€é«˜ä½å­—èŠ‚åœ¨å†…å­˜ä¸­çš„ä½åœ°å€å¤„ï¼Œä½ä½å­—èŠ‚åœ¨é«˜åœ°å€å¤„ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å°ç«¯å­—èŠ‚åºï¼ˆLittle Endianï¼‰ï¼Œå³æœ€ä½ä½å­—èŠ‚åœ¨å†…å­˜ä¸­çš„ä½åœ°å€å¤„ï¼Œé«˜ä½å­—èŠ‚åœ¨é«˜åœ°å€å¤„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.Panic(err)</span><br></pre></td></tr></table></figure><p><em>ç”¨æ¥åœæ­¢ç¨‹åºè¾“å‡ºé”™è¯¯ã€‚</em></p><p>å¦‚æœéœ€è¦é¢‘ç¹è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œï¼Œä½¿ç”¨æ™®é€šçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ç¼“å†²åŒºï¼ˆBufferï¼‰æ¥ä¼˜åŒ–ã€‚å› ä¸º<code>bytes.Buffer</code>æ˜¯ä¸€ä¸ªå…·æœ‰è¯»å–å’Œå†™å…¥æ–¹æ³•çš„å¯å˜å¤§å°çš„å­—èŠ‚ç¼“å†²åŒºã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å…ˆå°†éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²å†™å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œå½“ç¼“å†²åŒºæ»¡äº†æˆ–è€…éœ€è¦å°†ç¼“å†²åŒºçš„å†…å®¹è¾“å‡ºæ—¶ï¼Œå†è¿›è¡Œå®é™…çš„IOæ“ä½œã€‚è¿™æ ·å°±å¯ä»¥å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚</p><p>è€Œç¼“å†²åŒºæ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—å¤šä¸ªå€¼çš„é€šé“ï¼Œç”¨ä½œå¯å˜å¤§å°çš„åˆ‡ç‰‡ï¼Œä¸å¼ºåˆ¶å¿…é¡»å®Œæˆå‘é€å’Œæ¥å—ã€‚</p><p>4.åŒºå—åˆ›å»ºä¸åˆ›å§‹åŒºå—</p><p> å¯ä»¥è·å¾—åŒºå—çš„å“ˆå¸Œå€¼äº†ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåˆ›å»ºåŒºå—äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateBlock</span><span class="params">(prevhash, data []<span class="type">byte</span>)</span></span> *Block &#123;</span><br><span class="line">block := Block&#123;time.Now().Unix(), []<span class="type">byte</span>&#123;&#125;, prevhash, data&#125;</span><br><span class="line">block.SetHash()</span><br><span class="line"><span class="keyword">return</span> &amp;block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å®šè¦å¼•ç”¨å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€‚</p><p>æ–°çš„åŒºå—è¦æœ‰æ—¶é—´æˆ³å’Œä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œä»¥åŠè¿™ä¸ªåŒºå—çš„æ•°æ®</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GenesisBlock</span><span class="params">()</span></span> *Block &#123;</span><br><span class="line">genesisWords := <span class="string">&quot;Hello, blockchain!&quot;</span></span><br><span class="line"><span class="keyword">return</span> CreateBlock([]<span class="type">byte</span>&#123;&#125;, []<span class="type">byte</span>(genesisWords))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›ä¸–åŒºå—é‡Œå­˜æ”¾helloè¿™æ®µä¿¡æ¯ï¼Œæ„å»ºå‡½æ•°ä½¿å¾—åŒºå—é“¾å¯ä»¥æ ¹æ®å…¶ä»–çš„ä¿¡æ¯åˆ›å»ºåŒºå—è¿›è¡Œå‚¨å­˜ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(bc *BlockChain)</span></span> AddBlock(data <span class="type">string</span>) &#123;</span><br><span class="line">newBlock := CreateBlock(bc.Blocks[<span class="built_in">len</span>(bc.Blocks)<span class="number">-1</span>].Hash, []<span class="type">byte</span>(data))</span><br><span class="line">bc.Blocks = <span class="built_in">append</span>(bc.Blocks, newBlock)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>appendç”¨æ¥åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ã€‚</p><p>åˆ›å»ºåŒºå—é“¾å‡½æ•°ï¼Œé¦–å…ˆæŠŠåˆ›ä¸–åŒºå—ä½œä¸ºç¬¬ä¸€ä¸ªåŒºå—</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateBlockChain</span><span class="params">()</span></span> *BlockChain &#123;</span><br><span class="line">blockchain := BlockChain&#123;&#125;</span><br><span class="line">blockchain.Blocks = <span class="built_in">append</span>(blockchain.Blocks, GenesisBlock())</span><br><span class="line"><span class="keyword">return</span> &amp;blockchain</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿ä½œä¸€ä¸‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">blockchain := CreateBlockChain()<span class="comment">// åˆ›å»ºä¸€ä¸ªåŒºå—é“¾å¯¹è±¡</span></span><br><span class="line">time.Sleep(time.Second)<span class="comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">blockchain.AddBlock(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">time.Sleep(time.Second)<span class="comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">blockchain.AddBlock(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">time.Sleep(time.Second)<span class="comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line">blockchain.AddBlock(<span class="string">&quot;C&quot;</span>)</span><br><span class="line">time.Sleep(time.Second)<span class="comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰</span></span><br><span class="line"><span class="comment">//éå†åŒºå—</span></span><br><span class="line"><span class="keyword">for</span> _, block := <span class="keyword">range</span> blockchain.Blocks &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;Timestamp: %d\n&quot;</span>, block.Timestamp)</span><br><span class="line">fmt.Printf(<span class="string">&quot;hash: %x\n&quot;</span>, block.Hash)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Previous hash: %x\n&quot;</span>, block.PrevHash)</span><br><span class="line">fmt.Printf(<span class="string">&quot;data: %s\n&quot;</span>, block.Data)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾&quot;&gt;&lt;a href=&quot;#å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾&quot; class=&quot;headerlink&quot; title=&quot;å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾&quot;&gt;&lt;/a&gt;å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾&lt;/h4&gt;&lt;p&gt;&lt;em&gt;å…¶å®ä¸»è¦æ˜¯å¯¹äºgoçš„åŸºç¡€è¯­æ³•åˆšåˆšå­¦å®Œæ‰€ä»¥æ‹¿æ¥ç»ƒæ‰‹&lt;/</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="åŒºå—é“¾" scheme="http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-é”™è¯¯</title>
    <link href="http://example.com/2023/11/26/goland-%E9%94%99%E8%AF%AF/"/>
    <id>http://example.com/2023/11/26/goland-%E9%94%99%E8%AF%AF/</id>
    <published>2023-11-26T08:33:26.000Z</published>
    <updated>2023-12-06T07:56:45.872Z</updated>
    
    <content type="html"><![CDATA[<h4 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h4><p>åœ¨Goè¯­è¨€ä¸­ï¼Œé”™è¯¯æ˜¯é€šè¿‡å†…ç½®çš„erroræ¥å£è¡¨ç¤ºçš„ã€‚</p><p>åªæœ‰ä¸€ä¸ªError()æ–¹æ³•ç”¨æ¥è¿”å›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h5 id="errorå·¥å‚å‡½æ•°"><a href="#errorå·¥å‚å‡½æ•°" class="headerlink" title="errorå·¥å‚å‡½æ•°"></a>errorå·¥å‚å‡½æ•°</h5><p>é™¤äº†å¯ä»¥ä½¿ç”¨å…¶ä»–å‡½æ•°ï¼Œè‡ªå·±å®šä¹‰çš„å‡½æ•°ä¹Ÿå¯ä»¥å‘æŒ¥é”™è¯¯ä¿¡æ¯ç»™è°ƒç”¨è€…ã€‚</p><p>addå‡½æ•°ä¼šåœ¨aæˆ–è€…bä»»ä½•ä¸€ä¸ªä¸ºè´Ÿæ•°çš„æƒ…å†µä¸‹ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼›å¦‚æœaã€béƒ½ä¸ä¸ºè´Ÿæ•°ï¼Œé”™è¯¯ä¿¡æ¯éƒ¨åˆ†ä¼šè¿”å›nilï¼Œè¿™ä¹Ÿæ˜¯å¸¸è§çš„åšæ³•ã€‚æ‰€ä»¥è°ƒç”¨è€…å¯ä»¥é€šè¿‡é”™è¯¯ä¿¡æ¯æ˜¯å¦ä¸ºnilè¿›è¡Œåˆ¤æ–­ã€‚ä¸‹é¢çš„addå‡½æ•°ç¤ºä¾‹æ˜¯ä½¿ç”¨errors.Newè¿™ä¸ªå·¥å‚å‡½æ•°æ¥ç”Ÿæˆé”™è¯¯ä¿¡æ¯çš„ã€‚errors.Newå‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªerroræ¥å£ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span>  <span class="title">add</span><span class="params">(a,b <span class="type">int</span>)</span></span> (<span class="type">int</span>,<span class="type">error</span>)&#123;</span><br><span class="line">   <span class="keyword">if</span> a&lt;<span class="number">0</span>||b&lt;<span class="number">0</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>,errors.New(<span class="string">&quot;a.bä¸èƒ½ä¸ºè´Ÿæ•°&quot;</span>)</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a+b,<span class="literal">nil</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sum,err:=add(<span class="number">-1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">if</span> err!=<span class="literal">nil</span>&#123;</span><br><span class="line">   fmt.Println(err)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">   fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="è‡ªå®šä¹‰error"><a href="#è‡ªå®šä¹‰error" class="headerlink" title="è‡ªå®šä¹‰error"></a>è‡ªå®šä¹‰error</h5><p>ä¸Šé¢çš„å·¥å‚å‡½æ•°è¿”å›é”™è¯¯ä¿¡æ¯åªèƒ½ç©¿ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœiæ˜‚è¦æºå¸¦æ›´å¤šä¿¡æ¯ï¼Œå§¿åŠ¿è‡ªå®šä¹‰errorã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> commonerror <span class="keyword">struct</span> &#123;</span><br><span class="line">   errorcode <span class="type">int</span><span class="comment">//é”™è¯¯ç¼–å·</span></span><br><span class="line">   errormsg <span class="type">string</span><span class="comment">//æŠ¥é”™å†…å®¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(ce *commonerror)</span></span> Error()<span class="type">string</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> ce.errormsg</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span>  <span class="title">add</span><span class="params">(a,b <span class="type">int</span>)</span></span> (<span class="type">int</span>,<span class="type">error</span>)&#123;</span><br><span class="line">   <span class="keyword">if</span> a&lt;<span class="number">0</span>||b&lt;<span class="number">0</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>,&amp;commonerror&#123;</span><br><span class="line">         errormsg: <span class="string">&quot;asd&quot;</span>,</span><br><span class="line">         errorcode:<span class="number">1</span>&#125;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a+b,<span class="literal">nil</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„æ€å°±æ˜¯æˆ‘ç¨‹åºçŠ¯é”™ï¼Œcommonerrorå°±ä¼šæŠŠå†…å®¹å†™æˆasdå’Œ1ã€‚</p><h5 id="erroræ–­è¨€"><a href="#erroræ–­è¨€" class="headerlink" title="erroræ–­è¨€"></a>erroræ–­è¨€</h5><p>æ‹¥æœ‰äº†è‡ªå®šä¹‰çš„errorï¼Œæºå¸¦äº†æ›´å¤šçš„é”™è¯¯ä¿¡æ¯åï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚éœ€è¦å…ˆæŠŠè¿”å›çš„erroræ¥å£è½¬æ¢ä¸ºè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sum,err:=add(<span class="number">-1</span>,<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> cm,ok:=err.(*commonerror);ok&#123;</span><br><span class="line">   fmt.Println(<span class="string">&quot;é”™è¯¯ä»£ç &quot;</span>,cm.errorcode,<span class="string">&quot;é”™è¯¯ä¿¡æ¯&quot;</span>,cm.errormsg)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">   fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„æ€å°±æ˜¯å®ç°äº†erroræ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰errorçš„æ•ˆæœã€‚</p><p>è¯»èµ·æ¥çœŸæ˜¯ä¸å¤ªç†è§£ï¼Œæ‰¾åŠå¤©æˆ‘çš„Errorç”¨åœ¨å“ªäº†ï¼ŒåŸæ¥æ˜¯å®ç°äº†åº•å±‚çš„æ¥å£ï¼Œæˆ‘å¹²ã€‚ğŸ˜“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cm,ok:=err.(*commonerror)</span><br></pre></td></tr></table></figure><p>æ›´æ˜¯é‡é‡çº§ï¼Œè¿™æ˜¯ä¸ªç±»å‹æ–­è¨€ï¼Œå¦‚æœerræ˜¯è¿™ä¸ªçš„ç±»å‹ï¼Œå°±ç»™èµ‹å€¼cmã€‚ä¸ç„¶å°±è¾“å‡ºsumäº†ã€‚</p><p>ä¸å®ç°é‚£ä¸ªErroræ¥å£å°±ä¸èƒ½è¿”å›errorå€¼ï¼Œå°±ä¸èƒ½è‡ªå®šä¹‰äº†ã€‚</p><hr><p><em>å­˜ä¸ªæ¡£ï¼Œé”™è¯¯å¤ªæŠ½è±¡äº†ã€‚ç°åœ¨ç”¨ä¸åˆ°å¤ªå¤šï¼Œä»¥ä¸‹çš„éƒ¨åˆ†ä»¥åå†æ¥æ¢ç´¢å§â€”â€”2023.11.29</em></p><h5 id="é”™è¯¯åµŒå¥—"><a href="#é”™è¯¯åµŒå¥—" class="headerlink" title="é”™è¯¯åµŒå¥—"></a>é”™è¯¯åµŒå¥—</h5><h6 id="error-wrappingåŠŸèƒ½"><a href="#error-wrappingåŠŸèƒ½" class="headerlink" title="error wrappingåŠŸèƒ½"></a>error wrappingåŠŸèƒ½</h6><h6 id="errors-unwrapå‡½æ•°"><a href="#errors-unwrapå‡½æ•°" class="headerlink" title="errors.unwrapå‡½æ•°"></a>errors.unwrapå‡½æ•°</h6><h6 id="errors-lså‡½æ•°"><a href="#errors-lså‡½æ•°" class="headerlink" title="errors.lså‡½æ•°"></a>errors.lså‡½æ•°</h6><h6 id="errors-Aså‡½æ•°"><a href="#errors-Aså‡½æ•°" class="headerlink" title="errors.Aså‡½æ•°"></a>errors.Aså‡½æ•°</h6><h6 id="deferå‡½æ•°"><a href="#deferå‡½æ•°" class="headerlink" title="deferå‡½æ•°"></a>deferå‡½æ•°</h6><h6 id="panicå‡½æ•°"><a href="#panicå‡½æ•°" class="headerlink" title="panicå‡½æ•°"></a>panicå‡½æ•°</h6>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;é”™è¯¯&quot;&gt;&lt;a href=&quot;#é”™è¯¯&quot; class=&quot;headerlink&quot; title=&quot;é”™è¯¯&quot;&gt;&lt;/a&gt;é”™è¯¯&lt;/h4&gt;&lt;p&gt;åœ¨Goè¯­è¨€ä¸­ï¼Œé”™è¯¯æ˜¯é€šè¿‡å†…ç½®çš„erroræ¥å£è¡¨ç¤ºçš„ã€‚&lt;/p&gt;
&lt;p&gt;åªæœ‰ä¸€ä¸ªError()æ–¹æ³•ç”¨æ¥è¿”å›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h5 id</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-structå’Œinterface</title>
    <link href="http://example.com/2023/11/23/goland-struct%E5%92%8Cinterface/"/>
    <id>http://example.com/2023/11/23/goland-struct%E5%92%8Cinterface/</id>
    <published>2023-11-23T04:30:38.000Z</published>
    <updated>2023-12-06T07:51:00.711Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h4><h5 id="ç»“æ„ä½“çš„å®šä¹‰"><a href="#ç»“æ„ä½“çš„å®šä¹‰" class="headerlink" title="ç»“æ„ä½“çš„å®šä¹‰"></a>ç»“æ„ä½“çš„å®šä¹‰</h5><p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼Œåç§°ä¸ºIPhoneï¼Œå«æœ‰å­—æ®µname</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å®šä¹‰ç»“æ„ä½“æ—¶ï¼Œå­—æ®µçš„å£°æ˜æ–¹æ³•ä¸å¹³æ—¶å£°æ˜ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å˜é‡ååœ¨å‰ï¼Œç±»å‹åœ¨åï¼Œåªä¸è¿‡åœ¨ç»“æ„ä½“ä¸­ï¼Œå˜é‡åç§°ä¸ºæˆå‘˜åæˆ–å­—æ®µåã€‚</p><h5 id="å£°æ˜å’Œä½¿ç”¨"><a href="#å£°æ˜å’Œä½¿ç”¨" class="headerlink" title="å£°æ˜å’Œä½¿ç”¨"></a>å£°æ˜å’Œä½¿ç”¨</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p:=IPhone&#123;</span><br><span class="line">   name: <span class="string">&quot;ASD&quot;</span>&#125;</span><br><span class="line">fmt.Println(p.name)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p:=IPhone&#123;&quot;ASD&quot;&#125;</span><br></pre></td></tr></table></figure><p>ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œç”šè‡³å¯ä»¥åªå£°æ˜å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆæ²¡å£°æ˜çš„éƒ¨åˆ†å°±é»˜è®¤é›¶å€¼</p><h5 id="ç»“æ„ä½“çš„å­—æ®µ"><a href="#ç»“æ„ä½“çš„å­—æ®µ" class="headerlink" title="ç»“æ„ä½“çš„å­—æ®µ"></a>ç»“æ„ä½“çš„å­—æ®µ</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> IPhone <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="type">string</span></span><br><span class="line">   aa kk</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> kk <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="type">int</span></span><br></pre></td></tr></table></figure><p>ç”¨ä»£ç æè¿°ç°å®ä¸­çš„å®ä½“ä¼šæ›´åŒ¹é…ï¼Œå¤ç”¨ç¨‹åº¦ä¹Ÿæ›´é«˜ã€‚å¯¹äºåµŒå¥—ç»“æ„ä½“å­—æ®µçš„ç»“æ„ä½“ï¼Œå…¶åˆå§‹åŒ–ä¸æ­£å¸¸çš„ç»“æ„ä½“å¤§åŒå°å¼‚ï¼Œåªéœ€è¦æ ¹æ®å­—æ®µå¯¹åº”çš„ç±»å‹åˆå§‹åŒ–å³å¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p:=IPhone&#123;</span><br><span class="line">name: <span class="string">&quot;s&quot;</span>,</span><br><span class="line">aa: kk&#123;</span><br><span class="line"><span class="number">6</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ç‚¹æ“ä½œç¬¦è°ƒç”¨å­—æ®µçš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(p.aa.id)</span><br></pre></td></tr></table></figure><h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><h5 id="æ¥å£çš„å®šä¹‰"><a href="#æ¥å£çš„å®šä¹‰" class="headerlink" title="æ¥å£çš„å®šä¹‰"></a>æ¥å£çš„å®šä¹‰</h5><p>æ¥å£è¦åšçš„æ˜¯å®šä¹‰å¥½çº¦å®šï¼Œå‘Šè¯‰è°ƒç”¨æ–¹è‡ªå·±å¯ä»¥åšä»€ä¹ˆï¼Œä½†è°ƒç”¨æ–¹ä¸ç”¨çŸ¥é“å®ƒçš„å†…éƒ¨å®ç°ã€‚</p><p>æ¥å£çš„å®šä¹‰ä¸ç»“æ„ä½“ç¨å¾®æœ‰äº›å·®åˆ«ï¼Œè™½ç„¶éƒ½ä»¥typeå…³é”®å­—å¼€å§‹ï¼Œä½†æ¥å£çš„å…³é”®å­—æ˜¯interfaceã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Phone <span class="keyword">interface</span> &#123;</span><br><span class="line">   speak()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªæ¥å£Phone æ‹¥æœ‰speakæ–¹æ³•ï¼ŒPhoneæ¥å£å‘Šè¯‰è°ƒç”¨è€…ä»–æ‹¥æœ‰æ–¹æ³•speakï¼Œè‡³äºè°speakå¦‚ä½•speakè°ƒç”¨è€…ä¸ç”¨å…³å¿ƒï¼Œè¿™æ˜¯ç”±æ¥å£å®ç°è€…æ¥åšçš„ã€‚</p><h5 id="æ¥å£çš„å®ç°"><a href="#æ¥å£çš„å®ç°" class="headerlink" title="æ¥å£çš„å®ç°"></a>æ¥å£çš„å®ç°</h5><p>æ¥å£çš„å®ç°è€…å¿…é¡»æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a IPhone)</span></span> speak() <span class="type">string</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;iiii&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨Iphoneæ¥åšç¤ºä¾‹ï¼Œè®©ä»–å®ç°Phoneæ¥å£ã€‚</p><p>ç»™Iphoneå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸æ¥å£é‡Œçš„æ–¹æ³•çš„ç­¾åä¸€æ ·ï¼Œè¿™æ ·çš„ç»“æ„ä½“Iphoneå°±å®ç°äº†è¿™ä¸ªPhoneçš„æ¥å£ï¼Œæ¥å£å¹¶æ²¡æœ‰é€šè¿‡ä»»ä½•çš„å…³é”®è¯æ¥å®ç°ï¼Œæ‰€ä»¥goçš„æ¥å£æ˜¯éšå¼å®ç°çš„ã€‚</p><p><strong>å¦‚æœä¸€ä¸ªæ¥å£æœ‰è®¸å¤šä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆéœ€è¦å®ç°æ¥å£çš„æ¯ä¸ªæ–¹æ³•æ‰æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</strong></p><p>å®ç°äº†æ¥å£ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒäº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(p Phone)</span></span>&#123;</span><br><span class="line">fmt.Println(p.speak())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªæ¥å£å¯ä»¥ç”¨æ¥æ‰“å°å®ç°Phoneæ¥å£çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªPhoneæ¥å£ç±»å‹çš„å‚æ•°ï¼Œç„¶åæ‰“å°å‡ºï¼Œä¸ç”¨è€ƒè™‘å…·ä½“çš„ç±»å‹å®ç°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a:=IPhone&#123;<span class="string">&quot;ASD&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h5 id="å€¼å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…"><a href="#å€¼å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…" class="headerlink" title="å€¼å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…"></a>å€¼å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…</h5><p>æœ‰å€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…ä¸¤ç§ã€‚äºŒè€…éƒ½å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼Œå› ä¸ºGoè¯­è¨€ç¼–è¯‘å™¨è‡ªåŠ¨åšäº†è½¬æ¢ï¼Œæ‰€ä»¥å€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯åœ¨æ¥å£çš„å®ç°ä¸­ï¼Œå€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…ä¸ä¸€æ ·ã€‚</p><p>æŠŠå®ç°è¿‡ç¨‹æ”¹æˆæŒ‡é’ˆï¼Œä¾æ—§å¯ä»¥ç¼–è¯‘è¿è¡Œæ­£å¸¸ã€‚è¿™å°±è¯æ˜äº†ä»¥å€¼ç±»å‹æ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯ç±»å‹æœ¬èº«ï¼Œè¿˜æ˜¯è¯¥ç±»å‹çš„æŒ‡é’ˆç±»å‹ï¼Œéƒ½å®ç°äº†è¯¥æ¥å£ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(&amp;a)</span><br></pre></td></tr></table></figure><p>å®ä¾‹ä¸­æ¥æ”¶è€…ï¼ˆa Iphoneï¼‰å®ç°äº†Phoneæ¥å£ï¼Œé‚£ä¹ˆIphoneå’Œä»–çš„æŒ‡é’ˆç±»å‹*Iphoneéƒ½å®ç°äº†Phoneæ¥å£ã€‚</p><p>æ¥ä¸‹æ¥æŠŠæ¥æ”¶è€…æ”¹ä¸ºæŒ‡é’ˆç±»å‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *IPhone)</span></span> speak() <span class="type">string</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;iiii&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æˆæŒ‡é’ˆèµ–å…´æ¥æ”¶è€…åä¼šå‘ç°ï¼Œå®ä¾‹ä¸­çš„printï¼ˆaï¼‰ï¼Œæ²¡åŠæ³•ç¼–è¯‘æˆåŠŸï¼Œé”™è¯¯æ˜¯IPhoneæ²¡æœ‰å®ç°Phoneæ¥å£ï¼Œè¿™å°±è¯æ˜äº†ä»¥æŒ‡é’ˆç±»å‹æ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œåªæœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ‰è¢«è®¤ä¸ºå®ç°äº†æ¥å£ã€‚</p><p>å¯ä»¥è¿™æ ·è§£è¯»ï¼šå½“å€¼ç±»å‹ä½œä¸ºæ¥æ”¶è€…æ—¶ï¼Œpersonç±»å‹å’Œ<em>personç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ã€‚å½“æŒ‡é’ˆç±»å‹ä½œä¸ºæ¥æ”¶è€…æ—¶ï¼Œåªæœ‰</em>personç±»å‹å®ç°äº†è¯¥æ¥å£ã€‚å¯ä»¥å‘ç°ï¼Œå®ç°æ¥å£çš„ç±»å‹éƒ½æœ‰*personï¼Œè¿™ä¹Ÿè¡¨æ˜æŒ‡é’ˆç±»å‹æ¯”è¾ƒä¸‡èƒ½ï¼Œä¸ç®¡å“ªä¸€ç§æ¥æ”¶è€…ï¼Œå®ƒéƒ½èƒ½å®ç°è¯¥æ¥å£ã€‚</p><h6 id="æ¥å£çš„ç†è§£æ˜¯ä¸€ä¸ªå›°éš¾çš„è¿‡ç¨‹-ä»¥ä¸‹æ˜¯æˆ‘ç†è§£æ¥å£çš„è¿‡ç¨‹å’Œç¨‹åºã€‚"><a href="#æ¥å£çš„ç†è§£æ˜¯ä¸€ä¸ªå›°éš¾çš„è¿‡ç¨‹-ä»¥ä¸‹æ˜¯æˆ‘ç†è§£æ¥å£çš„è¿‡ç¨‹å’Œç¨‹åºã€‚" class="headerlink" title="æ¥å£çš„ç†è§£æ˜¯ä¸€ä¸ªå›°éš¾çš„è¿‡ç¨‹,ä»¥ä¸‹æ˜¯æˆ‘ç†è§£æ¥å£çš„è¿‡ç¨‹å’Œç¨‹åºã€‚"></a>æ¥å£çš„ç†è§£æ˜¯ä¸€ä¸ªå›°éš¾çš„è¿‡ç¨‹,ä»¥ä¸‹æ˜¯æˆ‘ç†è§£æ¥å£çš„è¿‡ç¨‹å’Œç¨‹åºã€‚</h6><p>1.ä½¿ç”¨æ¥å£å’Œä¸ä½¿ç”¨æ¥å£çš„ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>ä½¿ç”¨æ¥å£ï¼š</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Doer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Do()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Foo <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f Foo)</span></span> Do() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Foo does something.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Bar <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b Bar)</span></span> Do() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Bar does something else.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoSomething</span><span class="params">(d Doer)</span></span> &#123;</span><br><span class="line">    d.Do()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f := Foo&#123;&#125;</span><br><span class="line">    b := Bar&#123;&#125;</span><br><span class="line"></span><br><span class="line">    DoSomething(f)</span><br><span class="line">    DoSomething(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£ <code>Doer</code> å’Œä¸¤ä¸ªç»“æ„ä½“ <code>Foo</code> å’Œ <code>Bar</code>ã€‚<code>Foo</code> å’Œ <code>Bar</code> åˆ†åˆ«å®ç°äº† <code>Doer</code> æ¥å£ã€‚åœ¨ <code>DoSomething</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶ä¸€ä¸ª <code>Doer</code> ç±»å‹çš„å‚æ•°ï¼Œå¹¶è°ƒç”¨å…¶ <code>Do</code> æ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>main</code> å‡½æ•°ä¸­ä¼ å…¥ <code>Foo</code> æˆ– <code>Bar</code> çš„å®ä¾‹ï¼Œä»è€Œä½¿å¾—ä»£ç å…·æœ‰æ›´å¥½çš„çµæ´»æ€§ã€‚</p><ol start="2"><li>ä¸ä½¿ç”¨æ¥å£ï¼š</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Foo <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f Foo)</span></span> Do() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Foo does something.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Bar <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b Bar)</span></span> Do() &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Bar does something else.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoSomethingWithFoo</span><span class="params">(f Foo)</span></span> &#123;</span><br><span class="line">    f.Do()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoSomethingWithBar</span><span class="params">(b Bar)</span></span> &#123;</span><br><span class="line">    b.Do()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f := Foo&#123;&#125;</span><br><span class="line">    b := Bar&#123;&#125;</span><br><span class="line"></span><br><span class="line">    DoSomethingWithFoo(f)</span><br><span class="line">    DoSomethingWithBar(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨æ¥å£ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸º <code>Foo</code> å’Œ <code>Bar</code> åˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•° <code>DoSomethingWithFoo</code> å’Œ <code>DoSomethingWithBar</code>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>main</code> å‡½æ•°ä¸­è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œä½†ç›¸æ¯”äºä½¿ç”¨æ¥å£çš„æ–¹å¼ï¼Œè¿™ç§è®¾è®¡ç¼ºä¹çµæ´»æ€§ï¼Œå› ä¸ºæ¯ä¸ªå‡½æ•°åªèƒ½å¤„ç†ä¸€ç§ç±»å‹çš„å€¼ã€‚</p><p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªç¤ºä¾‹çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨æ¥å£å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´å…·æœ‰æŠ½è±¡æ€§ã€å¯æ›¿æ¢æ€§å’Œçµæ´»æ€§ã€‚åœ¨éœ€è¦æŠ½è±¡ã€å¯æ›¿æ¢æ€§æˆ–çµæ´»æ€§çš„åœºæ™¯ä¸­ï¼Œä½¿ç”¨æ¥å£æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p><em>å®ç°æ¥å£çš„ä½œç”¨æ˜¯è®©ç”¨æˆ·çš„ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œç›¸åŒçš„ä»£ç å‡ºç°çš„é¢‘ç‡å˜ä½ï¼Œæ›´ä½çš„è€¦åˆåº¦ã€‚</em></p><h5 id="å·¥å‚å‡½æ•°"><a href="#å·¥å‚å‡½æ•°" class="headerlink" title="å·¥å‚å‡½æ•°"></a>å·¥å‚å‡½æ•°</h5><p>å·¥å‚å‡½æ•°ä¸€èˆ¬ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çš„ç»“æ„ä½“ï¼Œä¾¿äºä½¿ç”¨è€…è°ƒç”¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(a <span class="type">string</span>)</span></span> *IPhone&#123;</span><br><span class="line">   <span class="keyword">return</span> &amp;IPhone&#123;name: a&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘å®šä¹‰äº†ä¸€ä¸ªå·¥å‚å‡½æ•°new,æ¥å—ä¸€ä¸ªstringçš„ç±»å‹çš„å‚æ•°ï¼Œç”¨äºè¡¨ç¤ºæ‰‹æœºçš„åå­—ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ª*Iphoneã€‚</p><p>é€šè¿‡å·¥å‚å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ç»“æ„çš„æ–¹å¼ï¼Œè®©è°ƒç”¨è€…ä¸ç”¨å¤ªå…³æ³¨ç»“æ„ä½“å†…éƒ¨çš„å­—æ®µï¼Œåªç”¨ä¼ ç»™å·¥å‚å‡½æ•°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">interface</span> &#123;</span><br><span class="line">    Speak() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d Dog)</span></span> Speak() <span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Woof!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Cat)</span></span> Speak() <span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Meow!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateAnimal</span><span class="params">(kind <span class="type">string</span>)</span></span> Animal &#123;</span><br><span class="line">    <span class="keyword">switch</span> kind &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;dog&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> Dog&#123;&#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;cat&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> Cat&#123;&#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    dog := CreateAnimal(<span class="string">&quot;dog&quot;</span>)</span><br><span class="line">    fmt.Println(dog.Speak()) <span class="comment">// è¾“å‡ºï¼šWoof!</span></span><br><span class="line"></span><br><span class="line">    cat := CreateAnimal(<span class="string">&quot;cat&quot;</span>)</span><br><span class="line">    fmt.Println(cat.Speak()) <span class="comment">// è¾“å‡ºï¼šMeow!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨æ„ç»“æ„ä½“å†…éƒ¨çš„å­—æ®µï¼Œåªéœ€è¦ä¼ ç»™å·¥å‚å‡½æ•°å°±è¡Œäº†ã€‚</p><h4 id="ç»§æ‰¿å’Œç»„åˆ"><a href="#ç»§æ‰¿å’Œç»„åˆ" class="headerlink" title="ç»§æ‰¿å’Œç»„åˆ"></a>ç»§æ‰¿å’Œç»„åˆ</h4><p>åœ¨Goè¯­è¨€ä¸­æ²¡æœ‰ç»§æ‰¿çš„æ¦‚å¿µï¼Œæ‰€ä»¥ç»“æ„ä½“ã€æ¥å£ä¹‹é—´ä¹Ÿæ²¡æœ‰çˆ¶å­å…³ç³»ï¼ŒGoè¯­è¨€æå€¡çš„æ˜¯ç»„åˆï¼Œåˆ©ç”¨ç»„åˆè¾¾åˆ°ä»£ç å¤ç”¨çš„ç›®çš„ï¼Œè¿™ä¹Ÿæ›´çµæ´»ã€‚ç±»å‹çš„ç»„åˆå°±æ˜¯å¯ä»¥ç§°ä¹‹ä¸ºåµŒå¥—ã€‚</p><p>å½“ç„¶å¯ä»¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Go è¯­è¨€å®ç°çš„ç®€å•åµŒå¥—ç¤ºä¾‹ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåµŒå¥—ç»“æ„ä½“ï¼Œç”¨äºè¡¨ç¤ºå­¦ç”Ÿå’Œè¯¾ç¨‹ä¿¡æ¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">    Age <span class="type">int</span></span><br><span class="line">    Course []Course</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Course <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">    Credit <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Student</code> çš„ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«äº†å§“åï¼ˆNameï¼‰ã€å¹´é¾„ï¼ˆAgeï¼‰å’Œè¯¾ç¨‹ï¼ˆCourseï¼‰ä¿¡æ¯ã€‚è¯¾ç¨‹ä¿¡æ¯æ˜¯ç”±ä¸€ä¸ªåµŒå¥—ç»“æ„ä½“ <code>Course</code> è¡¨ç¤ºã€‚</p><h4 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h4><p>æœ‰äº†æ¥å£å’Œå®ç°æ¥å£çš„ç±»å‹ï¼Œå°±ä¼šæœ‰ç±»å‹æ–­è¨€ã€‚ç±»å‹æ–­è¨€ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ¥å£çš„å€¼æ˜¯å¦æ˜¯å®ç°è¯¥æ¥å£çš„æŸä¸ªå…·ä½“ç±»å‹ã€‚ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰ç”¨äºç¡®å®šä¸€ä¸ªæ¥å£å˜é‡ï¼ˆinterface{}ï¼‰å®é™…æŒ‡å‘çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">interface</span>&#123;&#125;.(T)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„ <code>value</code> æ˜¯ç±»å‹ä¸º <code>T</code> çš„å€¼ï¼Œ<code>ok</code> æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ–­è¨€æ˜¯å¦æˆåŠŸã€‚å¦‚æœæ–­è¨€æˆåŠŸï¼Œ<code>ok</code> ä¸º <code>true</code>ï¼Œ<code>value</code> åŒ…å«æ¥å£å˜é‡å®é™…æŒ‡å‘çš„å€¼ï¼›å¦‚æœæ–­è¨€å¤±è´¥ï¼Œ<code>ok</code> ä¸º <code>false</code>ï¼Œ<code>value</code> ä¸º <code>T</code> ç±»å‹çš„é›¶å€¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ç±»å‹æ–­è¨€çš„ç¤ºä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125; = <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line"></span><br><span class="line">    s, ok := x.(<span class="type">string</span>)</span><br><span class="line">    <span class="keyword">if</span> ok &#123;</span><br><span class="line">        fmt.Println(s)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;æ–­è¨€å¤±è´¥&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i, ok := x.(<span class="type">int</span>)</span><br><span class="line">    <span class="keyword">if</span> ok &#123;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;æ–­è¨€å¤±è´¥&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªæ¥å£å˜é‡ <code>x</code>ï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸ºå­—ç¬¦ä¸² â€œHello, World!â€ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»å‹æ–­è¨€å°è¯•å°†è¯¥æ¥å£å˜é‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹å’Œæ•´æ•°ç±»å‹ã€‚æˆåŠŸæ—¶ï¼Œ<code>ok</code> ä¸º <code>true</code>ï¼Œ<code>value</code> åŒ…å«å®é™…å€¼ï¼›å¤±è´¥æ—¶ï¼Œ<code>ok</code> ä¸º <code>false</code>ï¼Œ<code>value</code> ä¸ºç›¸åº”ç±»å‹çš„é›¶å€¼ã€‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ç»“æ„ä½“&quot;&gt;&lt;a href=&quot;#ç»“æ„ä½“&quot; class=&quot;headerlink&quot; title=&quot;ç»“æ„ä½“&quot;&gt;&lt;/a&gt;ç»“æ„ä½“&lt;/h4&gt;&lt;h5 id=&quot;ç»“æ„ä½“çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#ç»“æ„ä½“çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;ç»“æ„ä½“çš„å®šä¹‰&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-å‡½æ•°å’Œæ–¹æ³•</title>
    <link href="http://example.com/2023/11/21/goland-%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"/>
    <id>http://example.com/2023/11/21/goland-%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/</id>
    <published>2023-11-21T11:52:23.000Z</published>
    <updated>2023-12-06T07:50:26.577Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><h5 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a <span class="type">int</span>,b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> a+b</span><br></pre></td></tr></table></figure><p><em>æ³¨æ„å½¢å‚åååŠ ç±»å‹</em></p><p>å‡½æ•°å®šä¹‰ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><p>1.å…³é”®è¯func</p><p>2.å‡½æ•°åsum</p><p>3.å‡½æ•°å‚æ•°aï¼Œb</p><p>4.è¿”å›å€¼</p><p>5.ä»£ç å®ä½“</p><h5 id="å¤šå€¼è¿”å›"><a href="#å¤šå€¼è¿”å›" class="headerlink" title="å¤šå€¼è¿”å›"></a>å¤šå€¼è¿”å›</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a <span class="type">int</span>,b <span class="type">int</span>)</span></span> (<span class="type">int</span>,<span class="type">error</span>)&#123;</span><br><span class="line">   <span class="keyword">return</span> a+b,errors.New(<span class="string">&quot;f&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>erroræ˜¯goè¯­è¨€å†…ç½®çš„é”™è¯¯ä¿¡æ¯</em></p><h5 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a ...<span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">   sum:=<span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> _,a:= <span class="keyword">range</span> params&#123;</span><br><span class="line">      sum +=a</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> sum</span><br></pre></td></tr></table></figure><p>è¯¥å¯å˜å‚æ•°é€šè¿‡for rangeå‡½æ•°å¾ªç¯è®¡ç®—è¿™äº›å‚æ•°å€¼å’Œï¼Œå¯å˜å‚æ•°ç±»å‹å…¶å®å°±æ˜¯åˆ‡ç‰‡ï¼Œaçš„å‚æ•°ç±»å‹æ˜¯ã€ã€‘intï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡for rangeè¿›è¡Œå¾ªç¯ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœå‚æ•°ä¸­æœ‰å¯å˜å‚æ•°å’Œæ™®é€šå‚æ•°ï¼Œé‚£ä¹ˆå¯å˜å‚æ•°æ”¾åœ¨æœ«å°¾ã€‚</p><h5 id="åŒ…çº§å‡½æ•°"><a href="#åŒ…çº§å‡½æ•°" class="headerlink" title="åŒ…çº§å‡½æ•°"></a>åŒ…çº§å‡½æ•°</h5><p>ä¸è½å®æˆ‘ä»¬ä½¿ç”¨çš„sumè¿˜æ˜¯printlnï¼Œéƒ½æ˜¯ä»å±äºä¸€ä¸ªåŒ…ï¼Œsumå‡½æ•°å±äºmainåŒ…ï¼Œprintlnå±äºfmtåŒ…ï¼ŒåŒä¸€ä¸ªåŒ…å¯ä»¥è°ƒç”¨ï¼Œå½“ä¸åŒçš„åŒ…å‡½æ•°è¦è°ƒç”¨ï¼Œå¿…é¡»æ˜¯å±äºå…±æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„é¦–å­—æ¯è¦å¤§å†™ã€‚</p><p><em>goè¯­è¨€æ²¡æœ‰publicå’Œprivateæ¥åŒºåˆ«å…±æœ‰ç§æœ‰</em></p><h5 id="åŒ¿åå‡½æ•°å’Œé—­åŒ…"><a href="#åŒ¿åå‡½æ•°å’Œé—­åŒ…" class="headerlink" title="åŒ¿åå‡½æ•°å’Œé—­åŒ…"></a>åŒ¿åå‡½æ•°å’Œé—­åŒ…</h5><p>åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œè¿™æ˜¯å®ƒä¸æ­£å¸¸å‡½æ•°çš„åŒºåˆ«ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   sum:= <span class="function"><span class="keyword">func</span><span class="params">(a,b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> a+b</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(sum(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sumå°±æ˜¯å¼¥æ˜å‡½æ•°ï¼Œæœ‰äº†åŒ¿åå‡½æ•°å°±å¯ä»¥åœ¨å‡½æ•°ä¸­è¿›è¡Œå‡½æ•°åµŒå¥—ï¼Œå®šä¹‰çš„åŒ¿åå‡½æ•°å«åšå†…éƒ¨å‡½æ•°ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œ<strong>å‡½æ•°å†…å®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œå¯ä»¥ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¿™ç§æ–¹å¼ä¹Ÿå«åšé—­åŒ…</strong></p><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«åœ¨äºæ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ªæ¥æ”¶è€…ï¼Œæ¥æ”¶è€…æ˜¯ä¸€ä¸ªç±»å‹ï¼Œè¿™æ ·æ–¹æ³•å°±ä¸è¿™ä¸ªç±»å‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œç§°ä¸ºè¿™ä¸ªç±»å‹çš„æ–¹æ³•</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">type</span> Age <span class="type">uint</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(age Age)</span></span>String()&#123;</span><br><span class="line">   fmt.Println(age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a:=Age(<span class="number">1</span>)</span><br><span class="line">a.String()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚åŒäºç±»ä¸€æ ·ï¼Œå¿…é¡»ä½¿ç”¨ç‰¹å®šç±»å‹çš„æ¥æ”¶è€…æ‰èƒ½è¢«è°ƒç”¨</p><p>å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§ï¼Œç®€ä¾¿æ€§ã€‚</p><h5 id="å€¼å’ŒæŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"><a href="#å€¼å’ŒæŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="å€¼å’ŒæŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"></a>å€¼å’ŒæŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(age *Age)</span></span>S()&#123;</span><br><span class="line">   *age=Age(<span class="number">30</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := Age(<span class="number">25</span>)</span><br><span class="line">a.String()</span><br><span class="line">a.S()</span><br><span class="line">a.String()</span><br></pre></td></tr></table></figure><p>å‘ç°å€¼å˜åŒ–äº†ï¼Œå› ä¸ºæŒ‡é’ˆå¯¹åº”çš„æ›´æ”¹ã€‚</p><p>ç¤ºä¾‹ä¸­çš„å˜é‡aå¹¶ä¸æ˜¯æŒ‡é’ˆç±»å‹ï¼Œè€Œæ˜¯goè‡ªåŠ¨æ›´æ”¹çš„ã€‚</p><p>ä¹Ÿå¯ä»¥è¿™æ ·</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&amp;a).S()</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ä½¿ç”¨æ—¶ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ¥æ”¶è€…ç±»å‹çš„é€‰æ‹©ï¼Œè°ƒç”¨è€…çš„ç±»å‹ä¼šè‡ªå·±è½¬å˜ï¼Œå¤§å¤§æé«˜æ•ˆç‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å‡½æ•°&quot;&gt;&lt;a href=&quot;#å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°&quot;&gt;&lt;/a&gt;å‡½æ•°&lt;/h4&gt;&lt;h5 id=&quot;å‡½æ•°å£°æ˜&quot;&gt;&lt;a href=&quot;#å‡½æ•°å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°å£°æ˜&quot;&gt;&lt;/a&gt;å‡½æ•°å£°æ˜&lt;/h</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-é›†åˆç±»å‹</title>
    <link href="http://example.com/2023/11/21/goland-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/"/>
    <id>http://example.com/2023/11/21/goland-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/</id>
    <published>2023-11-21T10:37:49.000Z</published>
    <updated>2023-12-06T07:50:15.679Z</updated>
    
    <content type="html"><![CDATA[<h4 id="æ•°ç»„çš„å£°æ˜"><a href="#æ•°ç»„çš„å£°æ˜" class="headerlink" title="æ•°ç»„çš„å£°æ˜"></a>æ•°ç»„çš„å£°æ˜</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array:=[<span class="number">5</span>]<span class="type">string</span>&#123;<span class="string">&quot;s&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;f&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p><em>æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„.æ¯ä¸ªå…ƒç´ æœ‰è‡ªå·±çš„ä¸‹æ ‡iï¼ˆndexï¼‰ï¼Œä»0å¼€å§‹</em></p><p>é•¿åº¦åœ¨å®šä¹‰æ—¶å¯ä»¥å–æ¶ˆï¼Œå®ƒä¼šæ ¹æ®å†…å®¹æ•°é‡è‡ªå·±è¿›è¡Œè®¡æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array:=[]<span class="type">string</span>&#123;<span class="string">&quot;s&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;f&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p><em>åªç”¨äºæ‰€æœ‰å…ƒç´ éƒ½è¢«åˆå§‹åŒ–çš„åœºæ™¯ï¼Œå¦‚æœæœ‰ç‰¹å®šçš„ç´¢å¼•å…ƒç´ è¢«åˆå§‹åŒ–çš„æƒ…å†µï¼Œå°±ä¸é€‚åˆäº†</em></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array:=[]<span class="type">string</span>&#123;<span class="number">1</span>:<span class="string">&quot;s&quot;</span>,<span class="number">3</span>:<span class="string">&quot;a&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>å…ƒç´ é•¿åº¦ä¸º4ï¼Œä¸ä¸€å®šç¬¦åˆæ ‡å‡†</p><h4 id="æ•°ç»„çš„å¾ªç¯"><a href="#æ•°ç»„çš„å¾ªç¯" class="headerlink" title="æ•°ç»„çš„å¾ªç¯"></a>æ•°ç»„çš„å¾ªç¯</h4><p>åˆ©ç”¨rangeè¿›è¡Œéå†ï¼Œiæ˜¯ç´¢å¼•å€¼ï¼Œvæ˜¯å…·ä½“å€¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array:=[]<span class="type">string</span>&#123;<span class="number">1</span>:<span class="string">&quot;s&quot;</span>,<span class="number">3</span>:<span class="string">&quot;a&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i,v:=<span class="keyword">range</span> array&#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;ç´¢å¼• :%d,å¯¹åº” :%v\n&quot;</span>,i,v)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”ä¹‹ä¸‹for rangeæ›´ä¸ºç®€ä¾¿</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _,v:=<span class="keyword">range</span> array &#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;å€¼:%v\n&quot;</span>,v)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>_è¡¨ç¤ºè¢«ä¸¢å¼ƒçš„å€¼</em></p><h4 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h4><p><em>åº•å±‚å°±æ˜¯æ•°ç»„ï¼Œå¯¹æ•°ç»„çš„ä»»æ„åˆ†å‰²å¾—åˆ°åˆ‡ç‰‡ï¼ŒåŠ¨æ€æ•°ç»„</em></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array:=[]<span class="type">string</span>&#123;<span class="string">&quot;s&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;q&quot;</span>,<span class="string">&quot;g&quot;</span>&#125;</span><br><span class="line">slice:= array[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">fmt.Println(slice)</span><br></pre></td></tr></table></figure><p><em>åŒ…å«2ä¸åŒ…å«4ç´¢å¼•ä¸‹çš„å€¼</em></p><p>åˆ‡ç‰‡å’Œæ•°ç»„çš„æ“ä½œæ˜¯å·®ä¸å¤šçš„ï¼ŒåŒæ ·å¯ä»¥ç»è¿‡ç´¢å¼•å®šä½å€¼ï¼Œåªä¸è¿‡è¿™é‡Œçš„å€¼æ˜¯é‡æ–°ä»0å¼€å§‹å®šä½çš„</p><h5 id="åˆ‡ç‰‡çš„ä¿®æ”¹"><a href="#åˆ‡ç‰‡çš„ä¿®æ”¹" class="headerlink" title="åˆ‡ç‰‡çš„ä¿®æ”¹"></a>åˆ‡ç‰‡çš„ä¿®æ”¹</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array:=[]<span class="type">string</span>&#123;<span class="string">&quot;s&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;q&quot;</span>,<span class="string">&quot;g&quot;</span>&#125;</span><br><span class="line">slice:= array[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">slice[<span class="number">0</span>]=<span class="string">&quot;l&quot;</span></span><br><span class="line">fmt.Println(array)</span><br></pre></td></tr></table></figure><p>åˆ‡ç‰‡æ‰€è¿ç”¨çš„ä¾æ—§æ˜¯æ•°ç»„çš„åº•å±‚æ•°æ®ï¼Œåˆ‡ç‰‡çš„å€¼æ›´æ”¹ï¼Œç›¸åº”çš„æ•°ç»„ä¹Ÿä¼šè¢«ä¿®æ”¹</p><h5 id="åˆ‡ç‰‡çš„å£°æ˜"><a href="#åˆ‡ç‰‡çš„å£°æ˜" class="headerlink" title="åˆ‡ç‰‡çš„å£°æ˜"></a>åˆ‡ç‰‡çš„å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slice:=<span class="built_in">make</span>([]<span class="type">string</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>1æ˜¯é•¿åº¦ï¼Œ2æ˜¯å®¹é‡ï¼Œæ„æ€æ˜¯å¼€é˜”ä¸€ä¸ªå®¹é‡ä¸º8çš„ç©ºé—´ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæœ‰æ•°æ®ï¼Œå…¶ä»–çš„å±äºç©ºé—²çŠ¶æ€</p><p>åˆ‡ç‰‡å±äºåŠ¨æ€æ•°ç»„ï¼Œç›¸æ¯”äºæ•°ç»„æ›´ä¸ºçµæ´»ï¼Œæ•°ç»„å±äºå€¼ç±»å‹ï¼ŒåŠ¨æ€æ•°ç»„æ˜¯æŒ‡é’ˆç±»å‹</p><h5 id="åˆ‡ç‰‡çš„è¿½åŠ "><a href="#åˆ‡ç‰‡çš„è¿½åŠ " class="headerlink" title="åˆ‡ç‰‡çš„è¿½åŠ "></a>åˆ‡ç‰‡çš„è¿½åŠ </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> silce2:=<span class="built_in">append</span>(slice1,<span class="string">&quot;f&quot;</span>)</span><br><span class="line">silce2:=<span class="built_in">append</span>(slice1,<span class="string">&quot;f&quot;</span>,<span class="string">&quot;g&quot;</span>)</span><br><span class="line">silce2:=<span class="built_in">append</span>(slice1,slice3...)</span><br></pre></td></tr></table></figure><h4 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameAgeMap:=<span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br></pre></td></tr></table></figure><p>keyå€¼æ˜¯stringç±»å‹ï¼Œvalueåˆ™æ˜¯intç±»å‹,ç„¶åå¯ä»¥è¿›è¡Œæ“ä½œäº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameAgeMap[&quot;SS&quot;=2]</span><br></pre></td></tr></table></figure><p> éªŒè¯æ˜¯å¦å­˜åœ¨ï¼Œasdæ˜¯valueå€¼ï¼Œokæ˜¯keyå€¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nameAgeMap:=<span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">nameAgeMap[<span class="string">&quot;SS&quot;</span>]=<span class="number">2</span></span><br><span class="line">asd,ok:=nameAgeMap[<span class="string">&quot;SS&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> ok&#123;</span><br><span class="line">   fmt.Println(asd)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>mapæ˜¯å¯ä»¥ç”¨for rangeéå†çš„ï¼Œä¸»ä¹‰çš„æ˜¯éå†æ˜¯æ— åºçš„</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;æ•°ç»„çš„å£°æ˜&quot;&gt;&lt;a href=&quot;#æ•°ç»„çš„å£°æ˜&quot; class=&quot;headerlink&quot; title=&quot;æ•°ç»„çš„å£°æ˜&quot;&gt;&lt;/a&gt;æ•°ç»„çš„å£°æ˜&lt;/h4&gt;&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-æ§åˆ¶ç»“æ„</title>
    <link href="http://example.com/2023/11/21/goland-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84/"/>
    <id>http://example.com/2023/11/21/goland-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84/</id>
    <published>2023-11-21T10:15:47.000Z</published>
    <updated>2023-12-06T07:49:54.740Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-ifè¯­å¥"><a href="#1-ifè¯­å¥" class="headerlink" title="1.ifè¯­å¥"></a>1.ifè¯­å¥</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> æ¡ä»¶è¯­å¥ &#123;</span><br><span class="line">   </span><br><span class="line">&#125;erse <span class="keyword">if</span> æ¡ä»¶è¯­å¥&#123;</span><br><span class="line">   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="2-switché€‰æ‹©è¯­å¥"><a href="#2-switché€‰æ‹©è¯­å¥" class="headerlink" title="2.switché€‰æ‹©è¯­å¥"></a>2.switché€‰æ‹©è¯­å¥</h4><p>1.åˆ†æ”¯è¾ƒå¤šé€‰æ‹©switchè¯­å¥.é»˜è®¤ä»ä¸Šåˆ°ä¸‹é€ä¸€åˆ†æ.ä¸€æ—¦æ»¡è¶³æ¡ä»¶å°±ä¼šæ‰§è¡Œå¹¶ä¸”è¿”å›.è‡ªå¸¦breakã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> i:=<span class="number">6</span>; &#123;</span><br><span class="line">   <span class="keyword">case</span> i&gt;<span class="number">10</span>:</span><br><span class="line">      fmt.Println(i)</span><br><span class="line">   <span class="keyword">case</span> i&gt;<span class="number">5</span> &amp;&amp; i&lt;<span class="number">10</span>:</span><br><span class="line">      fmt.Println(i)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;i&lt;=5&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.switchåå¸¦è¡¨è¾¾å¼.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> i:=<span class="number">6</span>;j</span><br></pre></td></tr></table></figure><p>å‡å¦‚è®¾ç½®</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> j=<span class="number">3.66</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> i:=<span class="number">6</span>;j &#123;</span><br><span class="line">   <span class="keyword">case</span> i&gt;<span class="number">10</span>:</span><br><span class="line">      fmt.Println(i)</span><br><span class="line">   <span class="keyword">case</span> i&gt;<span class="number">5</span> &amp;&amp; i&lt;<span class="number">10</span>:</span><br><span class="line">      fmt.Println(i)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;i&lt;=5&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼šæ•´ä½“æŠ¥é”™.å› ä¸ºcaseåçš„å€¼çš„ç±»å‹å¿…é¡»æ˜¯å’Œï¼›åçš„jç±»å‹ä¸€æ ·</p><p>åŒæ ·ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹ç­‰</p><p>3.switchè¯­å¥è¾ƒä¸ºå¼ºå¤§</p><p>æ‰€ä»¥è¡¨è¾¾å¼å¯ä»¥å¾ˆéšæ„</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> <span class="number">1</span>&lt;<span class="number">5</span> &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="literal">true</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;t&quot;</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;f&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;n&quot;</span>)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="3-forè¯­å¥"><a href="#3-forè¯­å¥" class="headerlink" title="3.forè¯­å¥"></a>3.forè¯­å¥</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ç®€å•è¯­å¥;æ¡ä»¶;æ›´æ–°è¯­å¥ &#123;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;1-ifè¯­å¥&quot;&gt;&lt;a href=&quot;#1-ifè¯­å¥&quot; class=&quot;headerlink&quot; title=&quot;1.ifè¯­å¥&quot;&gt;&lt;/a&gt;1.ifè¯­å¥&lt;/h4&gt;&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>goland-å˜é‡å¸¸é‡</title>
    <link href="http://example.com/2023/11/17/goland-%E5%8F%98%E9%87%8F%E5%B8%B8%E9%87%8F/"/>
    <id>http://example.com/2023/11/17/goland-%E5%8F%98%E9%87%8F%E5%B8%B8%E9%87%8F/</id>
    <published>2023-11-17T06:32:30.000Z</published>
    <updated>2023-12-06T07:50:49.533Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å˜é‡å¸¸é‡"><a href="#å˜é‡å¸¸é‡" class="headerlink" title="å˜é‡å¸¸é‡"></a>å˜é‡å¸¸é‡</h4><h5 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h5><p>1.æ™®é€šå®šä¹‰æ–¹æ³•<!--æ–¹æ³•å®šä¹‰çš„å˜é‡å¿…é¡»ä½¿ç”¨--></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="type">int</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure><p>2.é»˜è®¤intç±»å‹.goè¯­è¨€æœ‰ç±»å‹æ¨å¯¼çš„ä½œç”¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i=<span class="number">10</span></span><br></pre></td></tr></table></figure><p>3.ç®€çŸ­å£°æ˜</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i:=<span class="number">10</span></span><br></pre></td></tr></table></figure><p>4.ä¸€æ¬¡å¤šä¸ªå£°æ˜</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>(</span><br><span class="line">j <span class="type">int</span>=<span class="number">0</span></span><br><span class="line">k =<span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h5 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h5><p>1.æ•´å½¢ï¼šåˆ†ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ç±»å‹ æœ‰ç¬¦å·ç±»å‹int,int8,int16â€¦æ— ç¬¦å·ç±»å‹uint,uint8â€¦  å·®åˆ«åœ¨äºæœ‰ç¬¦å·æ•´å½¢çš„è¡¨ç¤ºå¯ä»¥ä¸ºè´Ÿæ•°</p><p>2.æµ®ç‚¹å‹ï¼šç›¸è¾ƒäºfloat32è€Œè¨€float64æ˜¯æ›´å¸¸ç”¨çš„æµ®ç‚¹å‹.ç›¸æ¯”ä¹‹ä¸‹ç²¾åº¦æ›´é«˜.è¯¯å·®æ›´å°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f32 <span class="type">float32</span> =<span class="number">6.3663363663</span></span><br><span class="line"><span class="keyword">var</span> f64 <span class="type">float64</span> =<span class="number">5.662626</span></span><br><span class="line">fmt.Println(f32,f64)</span><br></pre></td></tr></table></figure><p><em>å®è¡Œä»£ç å‘ç°64ä½ä¸¢å¤±æ•°æ®æ›´å°‘</em></p><p>3.å¸ƒå°”ç±»å‹</p><p>å¸ƒå°”ç±»å‹åªæœ‰falseå’Œtrueä¸¤ç§.ä¹Ÿå¯ç”¨äºä¸€å…ƒæ“ä½œç¬¦ï¼ äºŒå…ƒæ“ä½œç¬¦&amp;&amp;å’Œ||é€»è¾‘ä¸å’Œé€»è¾‘æˆ–</p><p>4.å­—ç¬¦ä¸²</p><p>å­—ç¬¦ä¸²ç±»å‹é€šè¿‡stringæ¥å£°æ˜.+å·å¯ä»¥ç”¨æ¥å­—ç¬¦ä¸²çš„ç›¸åŠ </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1=<span class="string">&quot;sss&quot;</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">&quot;aaa&quot;</span></span><br><span class="line"><span class="built_in">println</span>(s1+s2)</span><br></pre></td></tr></table></figure><h5 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi:=&amp;i</span><br><span class="line"><span class="comment">//piæŒ‡å‘içš„åœ°å€</span></span><br></pre></td></tr></table></figure><h5 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constå®šä¹‰å¸¸é‡</span></span><br><span class="line"><span class="comment">//iotaç”¨æ¥åˆå§‹åŒ–å¸¸é‡çš„</span></span><br><span class="line"><span class="keyword">const</span>(</span><br><span class="line">one=<span class="number">1</span></span><br><span class="line">two=<span class="number">2</span></span><br><span class="line">three=<span class="number">3</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span>(</span><br><span class="line">one=<span class="number">1</span>+itoa</span><br><span class="line">two </span><br><span class="line">three)</span><br><span class="line"><span class="comment">//ä¸¤ä¸ªä»£ç æ•ˆæœæ˜¯ä¸€æ ·çš„</span></span><br></pre></td></tr></table></figure><h5 id="æ ¼å¼è½¬æ¢"><a href="#æ ¼å¼è½¬æ¢" class="headerlink" title="æ ¼å¼è½¬æ¢"></a>æ ¼å¼è½¬æ¢</h5><p><em>goè¿›è¡Œä½¿ç”¨å’Œè®¡ç®—å¼åŒç±»å‹çš„å˜é‡å¿…é¡»è¿›è¡Œè½¬æ¢</em></p><p>ä¸‹é¢æ˜¯intç±»å‹å’Œstringç±»å‹çš„è½¬æ¢æ–¹å¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i=<span class="number">3</span></span><br><span class="line">s:=strconv.Itoa(i)</span><br><span class="line">d,err:=strconv.Atoi(s)</span><br><span class="line">fmt.Println(s,d,err)</span><br></pre></td></tr></table></figure><p>å¼ºåˆ¶è½¬æ¢intå’Œfloatç±»å‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i2f:=<span class="type">float64</span>(i)</span><br><span class="line">f2i:=<span class="type">int</span>(f64)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å˜é‡å¸¸é‡&quot;&gt;&lt;a href=&quot;#å˜é‡å¸¸é‡&quot; class=&quot;headerlink&quot; title=&quot;å˜é‡å¸¸é‡&quot;&gt;&lt;/a&gt;å˜é‡å¸¸é‡&lt;/h4&gt;&lt;h5 id=&quot;å®šä¹‰&quot;&gt;&lt;a href=&quot;#å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;å®šä¹‰&quot;&gt;&lt;/a&gt;å®šä¹‰&lt;/h</summary>
      
    
    
    
    <category term="goland" scheme="http://example.com/categories/goland/"/>
    
    
    <category term="goland" scheme="http://example.com/tags/goland/"/>
    
  </entry>
  
  <entry>
    <title>çˆ¬è™«çˆ¬å–bç«™è§†é¢‘</title>
    <link href="http://example.com/2023/11/15/%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96b%E7%AB%99%E8%A7%86%E9%A2%91/"/>
    <id>http://example.com/2023/11/15/%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96b%E7%AB%99%E8%A7%86%E9%A2%91/</id>
    <published>2023-11-15T04:25:28.000Z</published>
    <updated>2023-12-06T07:49:28.988Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚"><a href="#å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚" class="headerlink" title="å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚"></a><em>å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘</em>ã€‚</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> os<span class="comment">#ç”¨äºæ“ä½œç³»ç»Ÿçš„äº¤æ¢æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> requests<span class="comment">#å‘é€httpè¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> json<span class="comment">#è§£æjson</span></span><br><span class="line"><span class="keyword">import</span> re<span class="comment">#æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint<span class="comment">#ç¾è§‚æ‰“å°è¾“å‡ºjson</span></span><br><span class="line"><span class="comment">#è¾“å…¥è§†é¢‘ç½‘å€.åªè¾“å…¥å‰åŠéƒ¨åˆ†ã€‚</span></span><br><span class="line"><span class="comment">#ç½‘å€æ ¼å¼æœ€ååˆ°/BV****/</span></span><br><span class="line">url=<span class="string">r&#x27;https://www.bilibili.com/video/BV15H4y1o7UH/&#x27;</span></span><br><span class="line"><span class="comment">#è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">header=&#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Preferer&quot;</span>:<span class="string">&quot;https://www.bilibili.com/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resp=requests.get(url=url,headers=header)<span class="comment">#è·å–http</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#print(resp.text)</span></span><br><span class="line"><span class="comment"># è·å–ç½‘é¡µ.baseurlæ˜¯è§†é¢‘åœ°å€</span></span><br><span class="line">obj=re.<span class="built_in">compile</span>(<span class="string">r&#x27;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;</span>,re.S)</span><br><span class="line">html_data=re.findall(obj,resp.text)[<span class="number">0</span>]<span class="comment">#è¿”å›ä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line"><span class="comment">#æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”åŒ¹é…ç½‘é¡µè§†é¢‘éŸ³é¢‘</span></span><br><span class="line"><span class="comment">#è½¬å­—ç¬¦ä¸²åˆ°json</span></span><br><span class="line"><span class="comment">#print(html_data)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">json_data=json.loads(html_data)</span><br><span class="line"><span class="comment">#pprint(json_data)</span></span><br><span class="line"><span class="comment">#æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line"><span class="comment">#videoå’Œaudioåˆ†åˆ«æ˜¯è§†é¢‘å’ŒéŸ³é¢‘.çˆ¬å–ä¸‹æ¥éœ€è¦åˆæˆ</span></span><br><span class="line">videos=json_data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;dash&#x27;</span>][<span class="string">&#x27;video&#x27;</span>]<span class="comment">#åˆ—è¡¨</span></span><br><span class="line">video_url=videos[<span class="number">0</span>][<span class="string">&#x27;baseUrl&#x27;</span>]<span class="comment">#è§†é¢‘åœ°å€</span></span><br><span class="line">audios=json_data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;dash&#x27;</span>][<span class="string">&#x27;audio&#x27;</span>]</span><br><span class="line">audios_url=audios[<span class="number">0</span>][<span class="string">&#x27;baseUrl&#x27;</span>]<span class="comment">#éŸ³é¢‘åœ°å€</span></span><br><span class="line"><span class="comment">#ä¸‹è½½è§†é¢‘éŸ³é¢‘</span></span><br><span class="line">resp1=requests.get(url=video_url,headers=header)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.mp4&#x27;</span>,mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(resp1.content)</span><br><span class="line">resp2=requests.get(url=audios_url,headers=header)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span> (<span class="string">&#x27;test.mp3&#x27;</span>,mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(resp2.content)</span><br><span class="line"><span class="comment">#çˆ¬å–å®Œæˆåˆå¹¶è§†é¢‘éŸ³é¢‘</span></span><br><span class="line"><span class="comment">#åˆ©ç”¨ffmpegåˆå¹¶</span></span><br><span class="line">command=<span class="string">r&#x27;ffmpeg -i test.mp4 -i test.mp3 -acodec copy -vcodec copy testout.mp4&#x27;</span></span><br><span class="line">os.system(command=command)</span><br></pre></td></tr></table></figure><p><em>ç„¶åå·¦ä¾§æ–‡ä»¶å¤¹å‡ºç°çˆ¬å–çš„è§†é¢‘éŸ³é¢‘å’Œåˆæˆçš„è§†é¢‘</em>ã€‚</p><h4 id="å…³äºæˆ‘ä»£ç è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œè§£å†³çš„è¿‡ç¨‹"><a href="#å…³äºæˆ‘ä»£ç è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œè§£å†³çš„è¿‡ç¨‹" class="headerlink" title="å…³äºæˆ‘ä»£ç è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œè§£å†³çš„è¿‡ç¨‹"></a><strong>å…³äºæˆ‘ä»£ç è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œè§£å†³çš„è¿‡ç¨‹</strong></h4><h5 id="1-ç½‘é¡µå¼€å‘è€…æ¨¡å¼è·å–è¿‡ç¨‹ä¸­éš¾ä»¥æ‰¾åˆ°è¯·æ±‚å¤´-åˆ·æ–°è§£å†³ã€‚"><a href="#1-ç½‘é¡µå¼€å‘è€…æ¨¡å¼è·å–è¿‡ç¨‹ä¸­éš¾ä»¥æ‰¾åˆ°è¯·æ±‚å¤´-åˆ·æ–°è§£å†³ã€‚" class="headerlink" title="1.ç½‘é¡µå¼€å‘è€…æ¨¡å¼è·å–è¿‡ç¨‹ä¸­éš¾ä»¥æ‰¾åˆ°è¯·æ±‚å¤´.åˆ·æ–°è§£å†³ã€‚"></a>1.ç½‘é¡µå¼€å‘è€…æ¨¡å¼è·å–è¿‡ç¨‹ä¸­éš¾ä»¥æ‰¾åˆ°è¯·æ±‚å¤´.åˆ·æ–°è§£å†³ã€‚</h5><h5 id="2-ffmpegçš„ç¯å¢ƒæ­å»ºå‡ºé—®é¢˜-é€šè¿‡å®˜ç½‘ä¸‹è½½æ’ä»¶-å°†æ–‡ä»¶å¤¹ä¸­binä½ç½®æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚"><a href="#2-ffmpegçš„ç¯å¢ƒæ­å»ºå‡ºé—®é¢˜-é€šè¿‡å®˜ç½‘ä¸‹è½½æ’ä»¶-å°†æ–‡ä»¶å¤¹ä¸­binä½ç½®æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚" class="headerlink" title="2.ffmpegçš„ç¯å¢ƒæ­å»ºå‡ºé—®é¢˜.é€šè¿‡å®˜ç½‘ä¸‹è½½æ’ä»¶.å°†æ–‡ä»¶å¤¹ä¸­binä½ç½®æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚"></a>2.ffmpegçš„ç¯å¢ƒæ­å»ºå‡ºé—®é¢˜.é€šè¿‡å®˜ç½‘ä¸‹è½½æ’ä»¶.å°†æ–‡ä»¶å¤¹ä¸­binä½ç½®æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚</h5><blockquote><p>1.cmdæµ‹è¯•å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;ffmpeg</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>2.pipå®‰è£…ffmpy</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ffmpy</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>3.pipå®‰è£…ffmpy3<br>ï¼ˆç›®å‰ ffmpy3 å…·æœ‰ffmpegå’Œffprobeå‘½ä»¤çš„åŒ…è£…å™¨ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ffmpy3</span><br></pre></td></tr></table></figure></blockquote><pre><code>* æˆ‘çš„é—®é¢˜è¿™é‡Œå°±è§£å†³äº†.æ— æ³•è§£å†³è¿˜æœ‰é…ç½®è·¯å¾„çš„æ–¹æ³•*</code></pre><h5 id="3-ä»£ç å®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ã€‚"><a href="#3-ä»£ç å®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ã€‚" class="headerlink" title="3.ä»£ç å®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ã€‚"></a>3.ä»£ç å®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ã€‚</h5><h5 id="4-é™„åŠ ffmpyçš„ä¸‹è½½é€”å¾„ã€‚"><a href="#4-é™„åŠ ffmpyçš„ä¸‹è½½é€”å¾„ã€‚" class="headerlink" title="4.é™„åŠ ffmpyçš„ä¸‹è½½é€”å¾„ã€‚"></a>4.é™„åŠ ffmpyçš„ä¸‹è½½é€”å¾„ã€‚</h5><blockquote><p><a href="https://www.gyan.dev/ffmpeg/builds/#release-builds">Builds - CODEX FFMPEG @ gyan.dev</a></p><p><em>ä¸‹è½½æ³¨æ„ä¸è¦ä¸‹è½½æºç ç‰ˆæœ¬</em></p></blockquote><h5 id="5-å‡ºç°ä¸­æ–‡ä¹±ç -è®¾ç½®è°ƒutl-8å’Œç”µè„‘è®¾ç½®é‡Œçš„åŒºåŸŸä¸­å‹¾é€‰utl-8ã€‚"><a href="#5-å‡ºç°ä¸­æ–‡ä¹±ç -è®¾ç½®è°ƒutl-8å’Œç”µè„‘è®¾ç½®é‡Œçš„åŒºåŸŸä¸­å‹¾é€‰utl-8ã€‚" class="headerlink" title="5.å‡ºç°ä¸­æ–‡ä¹±ç .è®¾ç½®è°ƒutl-8å’Œç”µè„‘è®¾ç½®é‡Œçš„åŒºåŸŸä¸­å‹¾é€‰utl-8ã€‚"></a>5.å‡ºç°ä¸­æ–‡ä¹±ç .è®¾ç½®è°ƒutl-8å’Œç”µè„‘è®¾ç½®é‡Œçš„åŒºåŸŸä¸­å‹¾é€‰utl-8ã€‚</h5><h5 id="6-æ³¨æ„loadå’Œloadsçš„ç”¨æ³•loadçš„æ˜¯æ–‡ä»¶æµå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç”„åˆ«ã€‚"><a href="#6-æ³¨æ„loadå’Œloadsçš„ç”¨æ³•loadçš„æ˜¯æ–‡ä»¶æµå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç”„åˆ«ã€‚" class="headerlink" title="6.æ³¨æ„loadå’Œloadsçš„ç”¨æ³•loadçš„æ˜¯æ–‡ä»¶æµå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç”„åˆ«ã€‚"></a>6.æ³¨æ„loadå’Œloadsçš„ç”¨æ³•loadçš„æ˜¯æ–‡ä»¶æµå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç”„åˆ«ã€‚</h5><h5 id="7-é¦–å…ˆæ­£åˆ™è¡¨è¾¾å¼è·å–æ‰èƒ½ç”¨ç›¸åº”çš„å­—ç¬¦ä¸²ä»£ç è¿›è¡Œæ“ä½œã€‚"><a href="#7-é¦–å…ˆæ­£åˆ™è¡¨è¾¾å¼è·å–æ‰èƒ½ç”¨ç›¸åº”çš„å­—ç¬¦ä¸²ä»£ç è¿›è¡Œæ“ä½œã€‚" class="headerlink" title="7.é¦–å…ˆæ­£åˆ™è¡¨è¾¾å¼è·å–æ‰èƒ½ç”¨ç›¸åº”çš„å­—ç¬¦ä¸²ä»£ç è¿›è¡Œæ“ä½œã€‚"></a>7.é¦–å…ˆæ­£åˆ™è¡¨è¾¾å¼è·å–æ‰èƒ½ç”¨ç›¸åº”çš„å­—ç¬¦ä¸²ä»£ç è¿›è¡Œæ“ä½œã€‚</h5>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚&quot;&gt;&lt;a href=&quot;#å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚&quot; class=&quot;headerlink&quot; title=&quot;å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚&quot;&gt;&lt;/a&gt;&lt;em&gt;å°è¯•ç”¨pythonçˆ¬å–bi</summary>
      
    
    
    
    <category term="python" scheme="http://example.com/categories/python/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="çˆ¬è™«" scheme="http://example.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
</feed>
