{"meta":{"title":"ğŸ˜€","subtitle":"ä¸€äº›studyçš„è¿‡ç¨‹","description":"","author":"yangyan","url":"http://example.com","root":"/"},"pages":[{"title":"","date":"2023-10-26T14:35:39.492Z","updated":"2023-10-26T14:17:46.536Z","comments":true,"path":"jquery.min.js","permalink":"http://example.com/jquery.min.js","excerpt":"","text":"/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */ !function(a,b){\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error(\"jQuery requires a window with a document\");return b(a)}:b(a)}(\"undefined\"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m=\"2.1.3\",n=function(a,b){return new n.fn.init(a,b)},o=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,p=/^-ms-/,q=/-([\\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:\"\",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for(\"boolean\"==typeof g&&(j=g,g=arguments[h]||{},h++),\"object\"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:\"jQuery\"+(m+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return\"function\"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return\"object\"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,\"isPrototypeOf\")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?h[i.call(a)]||\"object\":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf(\"use strict\")?(b=l.createElement(\"script\"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,\"ms-\").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?\"\":(a+\"\").replace(o,\"\")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,\"string\"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return\"string\"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(a,b){h[\"[object \"+b+\"]\"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return\"function\"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:\"array\"===c||0===b||\"number\"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=\"sizzle\"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1"},{"title":"","date":"2023-10-26T14:35:39.492Z","updated":"2023-10-26T14:17:46.549Z","comments":true,"path":"main.js","permalink":"http://example.com/main.js","excerpt":"","text":"console.log('jså®Œæˆ'); let input_text = document.querySelector('#text_input') let text_false = false function put(){ if(text_false){ input_text.style.opacity = \"1\" }else { input_text.style.opacity = \"0\" } } put() input_text.addEventListener('mouseenter',function(){ text_false = true; put() }) input_text.addEventListener('mouseleave',function(){ text_false = false; put() }) function LoadSearch(){ var searchFunc = function(path, search_id, content_id) { 'use strict'; //ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ $.ajax({ url: path, dataType: \"xml\", success: function( xmlResponse ) { // ä»xmlä¸­è·å–ç›¸åº”çš„æ ‡é¢˜ç­‰æ•°æ® var datas = $( \"entry\", xmlResponse ).map(function() { return { title: $( \"title\", this ).text(), content: $(\"content\",this).text(), url: $( \"url\" , this).text() }; }).get(); //IDé€‰æ‹©å™¨ var $input = document.getElementById(search_id); var $resultContent = document.getElementById(content_id); $input.addEventListener('input', function(){ var str= ` ` var keywords = this.value.trim().toLowerCase().split(/[\\s\\-]+/); $resultContent.innerHTML = \"\"; if (this.value.trim().length /g,\"\").toLowerCase(); var data_url = data.url; var index_title = -1; var index_content = -1; var first_occur = -1; // åªåŒ¹é…éç©ºæ–‡ç«  if(data_title != '' && data_content != '') { keywords.forEach(function(keyword, i) { index_title = data_title.indexOf(keyword); index_content = data_content.indexOf(keyword); if( index_title < 0 && index_content < 0 ){ isMatch = false; } else { if (index_content < 0) { index_content = 0; } if (i == 0) { first_occur = index_content; } } }); } // è¿”å›æœç´¢ç»“æœ if (isMatch) { //ç»“æœæ ‡ç­¾ str += ` ${data_title} âˆš ` var content = data.content.trim().replace(/]+>/g,\"\"); if (first_occur >= 0) { // æ‹¿å‡ºå«æœ‰æœç´¢å­—çš„éƒ¨åˆ† var start = first_occur - 6; var end = first_occur + 6; if(start < 0){ start = 0; } if(start == 0){ end = 10; } if(end > content.length){ end = content.length; } var match_content = content.substr(start, end); // åˆ—å‡ºæœç´¢å…³é”®å­—ï¼Œå®šä¹‰classåŠ é«˜äº® keywords.forEach(function(keyword){ var regS = new RegExp(keyword, \"gi\"); match_content = match_content.replace(regS, \"\"+keyword+\"\"); }) } } }) $resultContent.innerHTML = str; }) } }) }; var path = \"/search.xml\"; console.log('æ–‡ç« æ•°æ®åŠ è½½å®Œæ¯•'); searchFunc(path, 'text_input', 'text_output'); console.log('æœç´¢æ¨¡å—åˆå§‹åŒ–å®Œæˆ'); } $(function() { var $input = $(\"input\"); $input.each(function() { var $title = $(this).attr(\"title\"); $(this).val($title); $(this).focus(function() { if($(this).val() === $title) { $(this).val(''); } }) .blur(function() { if($(this).val() === \"\") { $(this).val($title); } }); }); }); window.onload = function() { LoadSearch(); }"},{"title":"","date":"2023-12-05T12:28:22.197Z","updated":"2023-10-26T14:17:46.567Z","comments":true,"path":"style.css","permalink":"http://example.com/style.css","excerpt":"","text":"/* wenzhang=æ–‡ç«  */ /* pai = æ’ */ /* kong = ç©º */ /* jiao = è„š */ /* ä¸»é¡µæ¡†æ¡† */ #content-wrap > div { margin: 0 auto; } /* æ¡†æ¡†ä½ç½® */ #content-wrap > div > div > p{ display: flex; width: 100%; height: 100%; justify-content: space-around; } .Text>a{ color:#000; font-size: 20px; } .pai { display: flex; width: 100%; justify-content: space-around; font-size: 25px; margin: 30px 30px 40px 0px; } a > span { color:#000; } strong > a { color:#000; } h1,h2,h3,h4,h5 > a{ color:#000; } h1>a, h2>a, h3>a, h4>a { color:#000; } .category-list-item>.category-list-link{ color:#000; } .kong{ color:#000; margin: 0px 0px 0px 0px; } .box{ border-style:solid; border-width:medium; } /* æ¢é¡µ */ /* .jiao{ color:#000; margin: 0px 0px 0px 0px; } */ .konga { display: flex; width: 100%; justify-content: space-around; margin: 5% 0px 0px 0px; color:#000; } /* æœç´¢æ¡†ä¸‹é¢çš„æ–‡å­— å˜çŸ­åŸå›  span */ .konga2 { display: flex; width: 100%; justify-content: space-around; margin: 5% 0px 0px 0px; color:#000; } #content-wrap > div > div > h1{ display: flex; width: 100%; justify-content: space-around; font-size: 25px; /* margin: 30px 30px 40px 0px; */ } #content-wrap > div > div > h3{ display: flex; width: 100%; justify-content: space-around; font-size: 25px; } img{ width: 100%; } /* æ—¥æœŸæ¡†æ¡† */ .bx{ border-style:solid; border-width:medium; font-size: 1px; font-weight: bold; color:#000; } p > a{ color:#000; } /* æ–‡ç« å¸ƒå±€ */ .wenzhang-container { margin: auto; max-width: 960px; padding: 16px 16px; overflow-wrap: break-word; word-break: break-word; line-height: 1.6; font-size: larger; } /* è¡¨æ ¼ */ #content-wrap > div > div > wenzhang > table > tbody > tr > td{ border: 1px solid; border-spacing: 2px; border-color: #000; } /* åˆ†ç±»ä¸­é—´å¯¹å…¶ */ #content-wrap > div > span > h2 > ul { display: flex; justify-content: center; flex-wrap: wrap; } #content-wrap > div > span > h2 > ul > li{ /* é˜´å½± */ box-shadow: 0 .5em 1em -.125em rgba(10, 10, 10, .1), 0 0 0 1px rgba(10, 10, 10, .02); /* margin-bottom: 1.6rem; */ /* border-style:solid; */ /* color:#000; */ /* overflow-wrap: break-word; */ /* word-break: break-word; */ font-size: larger; /* é•¿åº¦ */ margin-bottom: 1.6rem; /* è¾¹æ¡† */ border: 2px solid #000000; padding: 10px 10px 10px 10px; background: #fffefe; border-radius: 10px; border-style:solid; border-width:medium; display: inline-block; margin: 10px 10px 10px 10px; text-decoration: none; color: #000; } /* å…³äºæ¡†æ¡† */ #text1{ border-spacing: 2px; border: 3px solid; background: #fffefe; border-color: #000; border-radius: 10px; padding: 30px; } /* æ¡†æ¡†æ–‡å­— */ #text2{ margin: 0 auto; text-align: center; font-weight:900; font-size: 2rem;; } /* åˆ†ç±»æ¡†æ¡† */ #text3{ min-width: 100vh; display: flex; justify-content: center; align-items: center; } /* åˆ†é¡µå­—ä½“ */ #text4{ /* font-size: 75%; margin: 10px 10px 10px 10px; */ /* é˜´å½± */ display: flex; justify-content: center; box-shadow: 0 .5em 1em -.125em rgba(10, 10, 10, .1), 0 0 0 1px rgba(10, 10, 10, .02); /* margin-bottom: 1.6rem; */ /* border-style:solid; */ /* color:#000; */ /* overflow-wrap: break-word; */ /* word-break: break-word; */ font-size: larger; /* é•¿åº¦ */ margin-bottom: 1.6rem; /* è¾¹æ¡† */ border: 2px solid #000000; padding: 10px 10px 10px 10px; background: #fffefe; border-radius: 10px; border-style:solid; border-width:medium; display: inline-block; margin: 10px 10px 10px 10px; text-decoration: none; color: #000; } /* æœç´¢ */ /* æ¢é¡µ */ #text_input, .jiao { /* è¾¹æ¡† */ border: 3px solid #000000; background: #fffefe; border-radius: 10px; color: #000; text-align: center; margin: 0 auto; display:flex; } #footer > span > a{ font-size: 2.1875rem; } /* è¾“å‡º */ #text_output{ text-align: center; margin: 0 auto; } #text_output > div > div{ border: 2px solid #000000; color: #000; font-size:25px; border-radius: 10px; margin: 10px 10px 10px 10px; padding: 1px 1px 1px 1px; } /* æ¡†æ¡†ä½ç½®ä¸Šä¸‹ä½ç½® */ .box:not(:last-child){ margin-bottom: 1.6rem; } body { color: #4a4a4a; font-size: 1em; font-weight: 500px; line-height: 1.5 } a { cursor: pointer; text-decoration: none } .box { background-color: #ffffff; border-radius: 6px; box-shadow: 0 .5em 1em -.125em rgba(10, 10, 10, .1), 0 0 0 1px rgba(10, 10, 10, .02); color: #4a4a4a; display: block; padding: 1.25rem } /* æ¡†æ¡†å®½åº¦ */ @media screen and (min-width:64.0625rem) { .container { max-width: 64.0625rem !important; } } /* ä»£ç æ¡†èƒŒæ™¯é¢œè‰² */ /* #content-wrap > div > div > wenzhang > figure{ background-color: rgb(249, 249, 249); } */ /* æ–‡ç« åˆ†ç±» */ #content-wrap > div > div > ul > li > a{ border-style:solid; border-width:medium; -webkit-text-stroke: 0.3px !important; background-color: #ffffff; border-radius: 6px; box-shadow: 0 .5em 1em -.125em rgba(10, 10, 10, .1), 0 0 0 1px rgba(10, 10, 10, .02); color: #4a4a4a; display: block; padding: 1.25rem; margin: 1rem; } /* æ–‡ç« åˆ†ç±»æ–‡å­—åŠ æ·± */ #content-wrap > div > div > ul > li > a{ color: #000; font-size: 20px; } /* æ–‡ç« æ—¶é—´ */ #content-wrap > div > div > wenzhang > div > div > a{ padding: 1px !important; margin-bottom: 4px !important; border-radius: 4px; } /* å…³äºçš„æ¡†æ¡† */ #content-wrap > div > div > wenzhang > kuankuan { border-style:solid; border-width:medium; background-color: #ffffff; border-radius: 6px; color: #4a4a4a; display: block; padding: 1.25rem; } /* åšå®¢ç‰ˆæƒ */ body > bokebangquan,#content-wrap > bokebangquan > p{ background-color: #ffffff; color: #4a4a4a; display: flex; align-items: center; justify-content: center; } #content-wrap > div > div > wenzhang > figure > table{ border-style:solid; border-width:medium; background-color: #ffffff; border-radius: 6px; color: #4a4a4a; display: block; padding: 1.25rem; } /* å±è”½æ¥å¿…åŠ›å¹¿å‘Š */ #trc_wrapper_52443{ display: none !important; } #trc_header_56062 > span{ display: none !important; } #taboola-livere > div{ display: none !important; } /* è¯„è®ºåŒºé»‘ç™½ */ /* #lv-container{ filter: grayscale(100%) !important; color: #000 !important; } */ /* æ—¶é—´æ­£åº æ—¶é—´å€’åº åŒæ„Ÿæ­£åº */ /* #container { display: none !important; filter: grayscale(100%) !important; color: #000 !important; } */ /* å›¾ç‰‡å˜é»‘ç™½ */ /* img{ filter: grayscale(100%) !important; } #sns-login > button{ filter: grayscale(100%) !important; } #list > div > div > div > ul > li > button > img{ filter: grayscale(100%) !important; } */ /* è¯„è®ºå˜é»‘ç™½ bodyæ•´ä¸ªå˜æˆé»‘ç™½ å› ä¸ºå®åœ¨å¤ªå¤šäº† æ‰€ä»¥æ‡’å¾—é€‰ */ body{ filter: grayscale(100%) !important; color: rgb(8, 4, 4) !important; } /* ä»£ç é«˜æš— */ /* */ .hljs-name { color: #6b6b6b } /* æ–œä½“ */ .hljs-emphasisï¼Œ.hljs-meta, .hljs-tag { font-style: italic } .hljs { color: #444; } .hljs-comment { color: #888 } .hljs-attribute, .hljs-doctag, .hljs-keyword, .hljs-meta .hljs-keyword, .hljs-name, .hljs-selector-tag { font-weight: 700 } .hljs-deletion, .hljs-number, .hljs-quote, .hljs-selector-class, .hljs-selector-id, .hljs-string, .hljs-template-tag, .hljs-type { color: #444d5c } .hljs-section, .hljs-title { color: #323233; font-weight: 700 } .hljs-link, .hljs-regexp, .hljs-selector-attr, .hljs-selector-pseudo, .hljs-symbol, .hljs-template-variable, .hljs-variable { color: #5c5151 } .hljs-literal { color: #202020 } .hljs-addition, .hljs-built_in, .hljs-bullet, .hljs-code { color: #0b1414 } .hljs-meta .hljs-string { color: #000000 } .hljs-emphasis { font-style: italic } .hljs-strong { font-weight: 700 }"},{"title":"æ ‡ç­¾","date":"2023-12-05T14:00:43.000Z","updated":"2023-12-05T15:56:13.113Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2023-12-05T15:11:08.000Z","updated":"2023-12-05T15:59:36.842Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"about","date":"2023-12-05T14:02:30.000Z","updated":"2023-12-05T14:04:01.430Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":"å…¶å®æ²¡ä»€ä¹ˆå†™çš„ï¼Œä½†æ˜¯ä¸å†™ï¼Œç‚¹äº†å°±ä¼š404.ğŸ˜¶ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–“â–“â–“â–“â–“â–“â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–“â–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–‘â–‘â–‘â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€"}],"posts":[{"title":"åŒºå—é“¾çš„å­˜å‚¨è¯»å–å’Œç®¡ç†","slug":"åŒºå—é“¾çš„å­˜å‚¨è¯»å–å’Œç®¡ç†","date":"2024-01-18T01:15:49.000Z","updated":"2024-01-31T04:55:32.046Z","comments":true,"path":"2024/01/18/åŒºå—é“¾çš„å­˜å‚¨è¯»å–å’Œç®¡ç†/","link":"","permalink":"http://example.com/2024/01/18/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E5%AD%98%E5%82%A8%E8%AF%BB%E5%8F%96%E5%92%8C%E7%AE%A1%E7%90%86/","excerpt":"","text":"Goè¯­è¨€å®ç°åŒºå—é“¾å­˜å‚¨ã€è¯»å–ä¸ç®¡ç†ã€‚ä¹‹å‰äº†è§£çš„åŸºæœ¬ç»“æ„ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒè¯•éƒ½è¦åˆ›å»ºï¼Œé‡æ„åŒºå—é“¾ï¼Œä½†æ˜¯åŒºå—é“¾å¹¶æ²¡æœ‰çš„åˆ°ä¿å­˜ï¼Œè¿™ä¸å®é™…çš„åŒºå—é“¾ç³»ç»Ÿä¸ç¬¦ï¼Œä¼´éšæˆ‘ä»¬æ‰©å±•æˆ‘ä»¬çš„åŒºå—é“¾ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„åŠŸèƒ½ç®¡ç†æ¨¡å—æ¥æ“ä½œã€‚ Badgeré”®å€¼å¯¹æ•°æ®åº“å¯¹äºåŒºå—é“¾çš„å‚¨å­˜ï¼Œä¸€ç§æƒ³æ³•æ˜¯åºåˆ—åŒ–ï¼Œç„¶åç”¨æ¯ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ä½œä¸ºæ–‡ä»¶åå‚¨å­˜åœ¨ç£ç›˜ä¸Šï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬é¢‘ç¹çš„å¯¹å·²ç»å­˜å‚¨çš„åŒºå—è¿›è¡ŒæŸ¥è¯¢ï¼Œæˆ‘ä»¬ç”¨æ•°æ®åº“æ–¹å¼å­˜å‚¨ç®¡ç†åŒºå—ã€‚ Badgeræ˜¯dgraph.ioå¼€å‘çš„ä¸€æ¬¾åŸºäº Log Structured Merge (LSM) Tree çš„ key-value æœ¬åœ°æ•°æ®åº“ï¼Œä»€ä¹ˆé”®å€¼å¯¹å¯¹åº”å­˜å‚¨å¯¹åº”åŒºå—é“¾çš„å­˜å‚¨è¿˜æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚ éå¸¸è®©äººéš¾ä»¥æ¥å—å°±æ˜¯å‰å‡ å¤©å†™å¥½çš„ä¸œè¥¿ï¼Œå…³æœºå¿˜äº†ä¿å­˜äº†ï¼Œéƒ½å¾—é‡æ–°å†™ï¼Œåˆä¸èƒ½å› ä¸ºå·²ç»å­¦äº†ä¸€ç‚¹äº†å°±å†™çš„å”çªï¼Œæƒ³æ­»ã€‚ 1go get github.com/dgraph-io/badger è¿™ä¸ªæ˜¯å®‰è£…çš„å‘½ä»¤ï¼Œå®‰è£…è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ä½†æ˜¯ä¸çŸ¥é“ä¹‹å‰çš„ç‰ˆæœ¬ä¸ºä»€ä¹ˆå®‰è£…ä¸äº†ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬æœ‰ç‚¹è€äº†å§ï¼Œç„¶åæ¢äº†ä¸ªæœ€æ–°ç‰ˆçš„ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚ å­˜å‚¨åœ°å€è®¾å®šåˆ›å»ºä¸€ä¸ªtmpæ–‡ä»¶å¤¹ï¼Œå°±ç”¨æ¥å‚¨å­˜æˆ‘ä»¬å°†è¦å­˜å‚¨çš„åŒºå—é“¾äº†ã€‚ æ‰“å¼€constcoe.goè®¾å®šä¸€äº›å…¨å±€å˜é‡ã€‚ 123const TransactionPoolFile = &quot;./tmp/transaction_pool.data&quot; //ç¼“å†²æ± å­˜æ”¾äº¤æ˜“ä¿¡æ¯const BCPath = &quot;./tmp/blocks&quot;const BCFile = &quot;./tmp/blocks/MANIFEST&quot; è¿™ä¸‰ä¸ªæ˜¯æ–°çš„ï¼Œè€Œä¸”è¿™é‡Œå½“æ—¶ä¹Ÿå‡ºé—®é¢˜äº†ï¼Œé—®é¢˜å°±å‡ºåœ¨ä¸‹æ–‡éªŒè¯åŒºå—é“¾å­˜ä¸å­˜åœ¨çš„ä»£ç é‡Œï¼Œå› ä¸ºè·¯å¾„é”™äº†å†™æˆäº†.tmpç„¶åä¸€ç›´å°±æ˜¯éªŒè¯æ–‡ä»¶ä¸å­˜åœ¨&#x3D; &#x3D;ã€‚æˆ‘è¿˜å»æœäº†æ˜¯ä¸æ˜¯æƒé™çš„é—®é¢˜æˆ–è€…å…¶ä»–çš„ä¸œè¥¿éƒ½å ç”¨äº†ï¼Œæœç„¶ä»£ç è¿™ä¸œè¥¿å·®ä¹‹æ¯«å˜å¤±ä¹‹åƒé‡Œäº†ã€‚ BCPathä¸BCFileéƒ½æ˜¯æŒ‡å‘çš„æˆ‘ä»¬å³å°†åˆ›å»ºçš„åŒºå—é“¾æ•°æ®åº“çš„ç›¸å…³åœ°å€ã€‚ util.goä¸­å¢åŠ ä¸€ä¸ªæ£€æŸ¥æ–‡ä»¶åœ°å€ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨çš„å‡½æ•°ã€‚ 123456func FileExists(fileAddr string) bool &#123; if _, err := os.Stat(fileAddr); os.IsNotExist(err) &#123; return false &#125; return true&#125; statæ˜¯è·å–æ–‡ä»¶ä¿¡æ¯çš„ï¼Œä¸å­˜åœ¨å°±è¿”å›é”™è¯¯ï¼Œç„¶ååè¾¹çš„isnotexistå°±æ˜¯æ£€è½¦é”™è¯¯æ˜¯ä¸æ˜¯ä»£è¡¨æ–‡ä»¶ä¸å­˜åœ¨äº†ã€‚ åŒºå—æ”¹åŠ¨å¥¥å¯¹äº†ï¼Œå°±æ˜¯æˆ‘å†™çš„ä»£ç éƒ½æ²¡æœ‰å¼•å…¥åº“å› ä¸ºè½¯ä»¶è‡ªå·±å°±ç»™æˆ‘æ•´äº†ï¼Œä¸è¿‡ç”¨æœ€åŸºæœ¬çš„é‚£ä¸ªå¥½åƒè¦æ‰‹å†™å¼•å…¥çš„åº“çš„ã€‚ é¦–å…ˆæ˜¯åˆ›å§‹åŒºå—çš„æ„å»ºå‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ä»–ç°åœ¨å¯ä»¥æ›´åŠ ä¸ªæ€§åŒ–ä¸€ç‚¹ï¼Œè®©åˆ›å§‹äº¤æ˜“ä¿¡æ¯æŒ‡å‘æˆ‘ä»¬æä¾›çš„åœ°å€ã€‚ 1234567//block.gofunc GenesisBlock(address []byte) *Block &#123; tx := transaaction.BaseTx(address)//åˆå§‹äº¤æ˜“ genesis := CreateBlock([]byte(&quot;YY&quot;), []*transaction.Transaction&#123;tx&#125;) genesis.SetHash() return genesis&#125; ç„¶åæˆ‘ä»¬çš„createblockå‡½æ•°æ˜¯è¦ç”¨ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå’Œè¿™ä¸ªåŒºå—æ•°æ®çš„ï¼Œåˆ›ä¸–åŒºå—æ²¡æœ‰ä¸Šä¸€ä¸ªåŒºå—ï¼Œå“ˆå¸Œå°±å¯ä»¥éšä¾¿å®šä¹‰äº†ã€‚ 123456789101112131415//block.gofunc (b *Block) Serialize() []byte &#123; var res bytes.Buffer//å­—èŠ‚ç¼“å†²åŒº encoder := gob.NewEncoder(&amp;res)//ç¼–ç å™¨ err := encoder.Encode(b)//å†™å…¥ç¼“å†²åŒº utils.Handle(err) return res.Bytes()&#125;func DeSerializeBlock(data []byte) *Block &#123; var block Block decoder := gob.NewDecoder(bytes.NewReader(data)) err := decoder.Decode(&amp;block) utils.Handle(err) return &amp;block æ·»åŠ ä¸¤ä¸ªå‡½æ•°ç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œæ•°æ®åº“åªèƒ½æ”¯æŒå­—èŠ‚ä¸²çš„å­˜å‚¨å½¢å¼ã€‚ åŒºå—é“¾ç»“æ„ä½“é‡æ„ä¹‹å‰æˆ‘ä»¬çš„åŒºå—é“¾ç»“æ„ä½“æ˜¯åŒºå—ç»„æˆçš„åˆ‡ç‰‡ï¼Œç°åœ¨æˆ‘ä»¬çš„åŒºå—å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åŒºå—é“¾ç»“æ„ä½“åº”è¯¥æŒ‡å‘å­˜å‚¨åŒºå—çš„æ•°æ®åº“ï¼Œé‡æ„æˆ‘ä»¬çš„ç»“æ„ä½“ 12345//blockchain.gotype BlockChain struct &#123; LastHash []byte Database *badger.DB&#125; LastHashå±æ€§æ˜¯æŒ‡å½“å‰åŒºå—é“¾æœ€åä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œå®ƒå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¯ä»¥é¿å…æˆ‘ä»¬åœ¨åé¢çš„å‡½æ•°ç¼–å†™ä¸­æ¯æ¬¡éƒ½å»æ•°æ®åº“ä¸­æŸ¥æ‰¾LastHashã€‚ ç„¶åæˆ‘ä»¬æ›´æ”¹æ‰æˆ‘ä»¬çš„CreateBlockChainï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åˆ›å»ºä¸€ä¸ªåŒºå—é“¾ç„¶åè¿”å›åŒºå—é“¾çš„æŒ‡é’ˆçš„ï¼Œæˆ‘ä»¬è¦å®ç°åŒºå—é“¾çš„åˆ›å»ºå­˜å‚¨å’Œè¯»å–ï¼Œå°±è¦åˆ æ‰è¿™ä¸ªäº†ã€‚ 123456789101112131415161718192021222324252627282930func InitBlockChain(address []byte) *BlockChain &#123; var lastHash []byte if utils.FileExists(constcoe.BCFile) &#123; fmt.Println(&quot;blockchain already exists&quot;) runtime.Goexit()//å®‰å…¨é€€å‡º &#125;//éªŒè¯æ˜¯ä¸æ˜¯å·²ç»åˆ›å»ºäº†åŒºå—é“¾äº† opts := badger.DefaultOptions(constcoe.BCPath)//è¿”å›ä¸€ä¸ªç»“æ„ä½“å°±å¯ä»¥ç”¨æ¥æ“ä½œäº† opts.Logger = nil//æ“ä½œä¿¡æ¯ db, err := badger.Open(opts) utils.Handle(err) err = db.Update(func(txn *badger.Txn) error &#123; genesis := GenesisBlock(address)//åˆ›å»ºåˆ›ä¸–åŒºå— fmt.Println(&quot;Genesis Created&quot;) err = txn.Set(genesis.Hash, genesis.Serialize())//å“ˆå¸Œå€¼å’Œåºåˆ—åŒ–åçš„æ•°æ® utils.Handle(err) err = txn.Set([]byte(&quot;lh&quot;), genesis.Hash) //store the hash of the block in blockchain utils.Handle(err) err = txn.Set([]byte(&quot;ogprevhash&quot;), genesis.PrevHash) //store the prevhash of genesis(original) block utils.Handle(err) lastHash = genesis.Hash return err &#125;) utils.Handle(err) blockchain := BlockChain&#123;lastHash, db&#125; return &amp;blockchain&#125; updateæŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œ 12345678910111213func (db *DB) Update(fn func(txn *Txn) error) error &#123; if db.opt.managedTxns &#123; panic(&quot;Update can only be used with managedDB=false.&quot;) &#125; txn := db.NewTransaction(true)//æŠŠå¼•å…¥çš„å€¼txnä½œä¸ºä¸€ä¸ªäº‹åŠ¡è¿™æ ·ä½ æ‰å¯ä»¥åœ¨updateå†…éƒ¨çš„å‡½æ•°è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚ defer txn.Discard() if err := fn(txn); err != nil &#123; return err &#125; return txn.Commit()&#125; æˆ‘ä»¬ç°åœ¨æœŸæœ›èƒ½å¤Ÿé€šè¿‡å·²æœ‰çš„æ•°æ®åº“è¯»å–å¹¶åŠ è½½æˆ‘ä»¬çš„åŒºå—é“¾ï¼Œè¿™å°±éœ€è¦æ„å»ºContinueBlockChainå‡½æ•°ã€‚ 1234567891011121314151617181920212223242526272829func ContinueBlockChain() *BlockChain &#123; if utils.FileExists(constcoe.BCFile) == false &#123; fmt.Println(&quot;No blockchain found, please create one first&quot;) runtime.Goexit() &#125; var lastHash []byte opts := badger.DefaultOptions(constcoe.BCPath) opts.Logger = nil db, err := badger.Open(opts) utils.Handle(err)//è¿™ä¸Šè¾¹è·Ÿä¸Šè¾¹ä¸€æ · //viewè°ƒå–è§†å›¾ err = db.View(func(txn *badger.Txn) error &#123; item, err := txn.Get([]byte(&quot;lh&quot;))//è·å–lhå¯¹åº”çš„æœ€ååŒºå—çš„å€¼ï¼Œgetè·å–é”®å€¼å¯¹ utils.Handle(err)//å¤„ç†é”™è¯¯ err = item.Value(func(val []byte) error &#123; lastHash = val return nil &#125;)//è¿™ä¸€æ­¥ä½œç”¨å°±æ˜¯æå–è¿™ä¸ªitemé‡Œçš„å€¼ï¼Œå› ä¸ºitemæ˜¯ä¸€ä¸ªåŒ…æ‹¬é”®å’Œå€¼çš„ç±»å‹ã€‚ utils.Handle(err) return err &#125;) utils.Handle(err) chain := BlockChain&#123;lastHash, db&#125; return &amp;chain&#125; è¦å°†ä¸€ä¸ªåŒºå—åŠ å…¥åˆ°åŒºå—é“¾ä¸­ï¼Œå°±éœ€è¦é€šè¿‡æ•°æ®åº“æ¥å®Œæˆã€‚ä¿®æ”¹AddBlockå‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930//blockchain.gofunc (bc *BlockChain) AddBlock(newBlock *Block) &#123; var lastHash []byte//è·å–ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ err := bc.Database.View(func(txn *badger.Txn) error &#123; item, err := txn.Get([]byte(&quot;lh&quot;)) utils.Handle(err) err = item.Value(func(val []byte) error &#123; lastHash = val return nil &#125;) utils.Handle(err) return err &#125;) utils.Handle(err) if !bytes.Equal(newBlock.PrevHash, lastHash) &#123; fmt.Println(&quot;This block is out of age&quot;) runtime.Goexit() &#125;//åˆ¤æ–­æ–°åŒºå¿«å’Œä¸Šä¸ªåŒºå—å“ˆå¸Œå€¼æ˜¯å¦å¯¹åº” err = bc.Database.Update(func(transaction *badger.Txn) error &#123; err := transaction.Set(newBlock.Hash, newBlock.Serialize()) utils.Handle(err) err = transaction.Set([]byte(&quot;lh&quot;), newBlock.Hash) bc.LastHash = newBlock.Hash//å°†bc.LastHashè®¾ç½®ä¸ºæ–°åŒºå—çš„å“ˆå¸Œå€¼ return err &#125;) utils.Handle(err)&#125; åŒºå—é“¾çš„éå†å°½ç®¡æ‹¥æœ‰ContinueBlockChainå‡½æ•°åæˆ‘ä»¬å®ç°äº†å¯¹åŒºå—é“¾çš„åŠ è½½ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°å¯¹äºåŒºå—é“¾çš„éå†ä¸åƒä¹‹å‰é‚£ä¹ˆæ–¹ä¾¿äº†ï¼ŒFindUnspentTransactionså‡½æ•°ä¸€æ—¶ä¸çŸ¥å¦‚ä½•ä¿®æ”¹ã€‚è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŸºäºåŒºå—çš„è¿­ä»£å™¨æ¥å®ç°åŒºå—é“¾çš„éå†ã€‚åœ¨blockchain.goä¸­åˆ›å»ºç»“æ„ä½“ã€‚ 12345//blockchain.gotype BlockChainIterator struct &#123; CurrentHash []byte Database *badger.DB&#125; åˆ›å»ºè¿­ä»£å™¨çš„åˆå§‹åŒ–å‡½æ•°,åœ¨åˆå§‹åŒ–æ—¶ï¼Œå°†é“¾çš„æœ€åä¸€ä¸ªå“ˆå¸Œå€¼å’Œæ•°æ®åº“å®ä¾‹ä¼ é€’ç»™è¿­ä»£å™¨ã€‚ 12345//blockchain.gofunc (chain *BlockChain) Iterator() *BlockChainIterator &#123; iterator := BlockChainIterator&#123;chain.LastHash, chain.Database&#125; return &amp;iterator&#125; åˆ›å»ºè¿­ä»£å™¨çš„è¿­ä»£å‡½æ•°ï¼Œè®©æ¯æ¬¡è¿­ä»£è¿”å›ä¸€ä¸ªblockï¼Œç„¶åè¿­ä»£å™¨æŒ‡å‘å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€‚ 123456789101112131415161718192021//blockchain.gofunc (iterator *BlockChainIterator) Next() *Block &#123; var block *Block err := iterator.Database.View(func(txn *badger.Txn) error &#123; item, err := txn.Get(iterator.CurrentHash) utils.Handle(err) err = item.Value(func(val []byte) error &#123; block = DeSerializeBlock(val)//ååºåˆ—åŒ–æˆä¸ºä¸€ä¸ªåŒºå—å¯¹è±¡ return nil &#125;) utils.Handle(err) return err &#125;) utils.Handle(err) iterator.CurrentHash = block.PrevHash return block&#125; æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥å¸®åŠ©åˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦ç»ˆæ­¢ã€‚ 12345678910111213141516171819//blockchain.gofunc (chain *BlockChain) BackOgPrevHash() []byte &#123; var ogprevhash []byte err := chain.Database.View(func(txn *badger.Txn) error &#123; item, err := txn.Get([]byte(&quot;ogprevhash&quot;)) utils.Handle(err) err = item.Value(func(val []byte) error &#123; ogprevhash = val return nil &#125;) utils.Handle(err) return err &#125;) utils.Handle(err) return ogprevhash&#125; é€šè¿‡æ¯”è¾ƒè¿­ä»£å™¨çš„CurrentHashä¸æ•°æ®åº“å­˜å‚¨çš„OgPrevHashæ˜¯å¦ç›¸ç­‰å°±èƒ½å¤Ÿåˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦å·²ç»è¿­ä»£åˆ°åˆ›å§‹åŒºå—ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¿®æ”¹FindUnspentTransactionså‡½æ•°äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243//blockchain.gofunc (bc *BlockChain) FindUnspentTransactions(address []byte) []transaction.Transaction &#123; var unSpentTxs []transaaction.Transaction spentTxs := make(map[string][]int) // can&#x27;t use type []byte as key value iter := bc.Iterator()all: for &#123; block := iter.Next() for _, tx := range block.Transactions &#123; txID := hex.EncodeToString(tx.ID) IterOutputs: for outIdx, out := range tx.Outputs &#123; if spentTxs[txID] != nil &#123; for _, spentOut := range spentTxs[txID] &#123; if spentOut == outIdx &#123; continue IterOutputs &#125; &#125; &#125; if out.ToAddressRight(address) &#123; unSpentTxs = append(unSpentTxs, *tx) &#125; &#125; if !tx.IsBase() &#123; for _, in := range tx.Inputs &#123; if in.FromAddressRight(address) &#123; inTxID := hex.EncodeToString(in.TxID) spentTxs[inTxID] = append(spentTxs[inTxID], in.OutIdx) &#125; &#125; &#125; &#125; if bytes.Equal(block.PrevHash, bc.BackOgPrevHash()) &#123; break all &#125; &#125; return unSpentTxs&#125; è¿™é‡Œä¹‹å‰è®²è¿‡äº†ï¼Œè¿˜æ˜¯å¾ˆéš¾ç†è§£çš„ï¼Œè¿˜æœ‰é‚£ä¸ªè¿­ä»£å™¨&#x3D; &#x3D;ã€‚ äº¤æ˜“ä¿¡æ¯æ± æˆ‘ä»¬æ˜¯ä¸€ä¸ªåŒºå—å†…è£…å¥½å¤šäº¤æ˜“ä¿¡æ¯ï¼Œæ”¾åœ¨ä¸€ä¸ªäº¤æ˜“ä¿¡æ¯æ± ä¸­ï¼Œå½“å‚¨å­˜çš„ä¿¡æ¯è¾¾åˆ°ä¸€å®šé‡å°±è¿›è¡ŒæŒ–çŸ¿æ“ä½œï¼ŒæŠŠèŠ‚ç‚¹åŠ å…¥åŒºå—é“¾ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäº¤æ˜“ä¿¡æ¯æ± çš„ç»“æ„ä½“ã€‚ 1234//transactionpool.gotype TransactionPool struct &#123; PubTx []*transaction.Transaction&#125; PubTxç”¨äºå‚¨å­˜èŠ‚ç‚¹æ”¶é›†åˆ°çš„äº¤æ˜“ä¿¡æ¯ã€‚ 1234//transactionpool.gofunc (tp *TransactionPool) AddTransaction(tx *transaction.Transaction) &#123; tp.PubTx = append(tp.PubTx, tx)&#125; æˆ‘ä»¬å¸Œæœ›å­˜å‚¨æˆ‘ä»¬æ–°æ”¶é›†åˆ°çš„äº¤æ˜“ä¿¡æ¯ï¼Œå°±éœ€è¦èƒ½å¤Ÿä¿å­˜æˆ‘ä»¬çš„äº¤æ˜“ä¿¡æ¯æ± è¿™ä¸€ç»“æ„ä½“ã€‚ 123456789//transactionpool.gofunc (tp *TransactionPool) SaveFile() &#123; var content bytes.Buffer encoder := gob.NewEncoder(&amp;content) err := encoder.Encode(tp) utils.Handle(err) err = ioutil.WriteFile(constcoe.TransactionPoolFile, content.Bytes(), 0644) utils.Handle(err)&#125; åŠ è½½æˆ‘ä»¬çš„äº¤æ˜“ä¿¡æ¯æ± ã€‚ 12345678910111213141516171819202122func (tp *TransactionPool) LoadFile() error &#123; if !utils.FileExists(constcoe.TransactionPoolFile) &#123; return nil &#125; var transactionPool TransactionPool fileContent, err := ioutil.ReadFile(constcoe.TransactionPoolFile) if err != nil &#123; return err &#125; decoder := gob.NewDecoder(bytes.NewBuffer(fileContent)) err = decoder.Decode(&amp;transactionPool) if err != nil &#123; return err &#125; tp.PubTx = transactionPool.PubTx return nil&#125; 123456func CreateTransactionPool() *TransactionPool &#123; transactionPool := TransactionPool&#123;&#125; err := transactionPool.LoadFile() utils.Handle(err) return &amp;transactionPool&#125;","categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"ç®—æ³•","slug":"ç®—æ³•","date":"2023-12-18T11:27:53.000Z","updated":"2024-01-11T06:44:18.762Z","comments":true,"path":"2023/12/18/ç®—æ³•/","link":"","permalink":"http://example.com/2023/12/18/%E7%AE%97%E6%B3%95/","excerpt":"","text":"1.P1000 è¶…çº§ç›ä¸½æ¸¸æˆP1000 è¶…çº§ç›ä¸½æ¸¸æˆ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567package mainimport &quot;fmt&quot;func main() &#123;fmt.Println(&quot; ********\\n ************\\n ####....#.\\n #..###.....##....\\n ###.......###### ### ###\\n ........... #...# #...#\\n ##*####### #.#.# #.#.#\\n ####*******###### #.#.# #.#.#\\n ...#***.****.*###.... #...# #...#\\n ....**********##..... ### ###\\n ....**** *****....\\n #### ####\\n ###### ######\\n##############################################################\\n#...#......#.##...#......#.##...#......#.##------------------#\\n###########################################------------------#\\n#..#....#....##..#....#....##..#....#....#####################\\n########################################## #----------#\\n#.....#......##.....#......##.....#......# #----------#\\n########################################## #----------#\\n#.#..#....#..##.#..#....#..##.#..#....#..# #----------#\\n########################################## ############&quot;)&#125; 2.P1001 A+B ProblemP1001 A+B Problem - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011package mainimport &quot;fmt&quot;func main() &#123; var a int var b int_,_=fmt.Scanln(&amp;a,&amp;b) var sum = a+bfmt.Println(sum)&#125; 3.P4327 [COCI2006-2007#1] Okviri[P4327 COCI2006-2007#1] Okviri - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768package mainimport ( &quot;fmt&quot; &quot;strings&quot;)func main() &#123; var input string fmt.Scan(&amp;input) input = strings.ToUpper(input) for g, _ := range input &#123; fmt.Print(&quot;.&quot;) if (g+1)%3 == 0 &#123; fmt.Print(&quot;.*.&quot;) continue &#125; fmt.Print(&quot;.#.&quot;) &#125; fmt.Print(&quot;.&quot;) fmt.Println(&quot;&quot;) fmt.Print(&quot;.&quot;) for g, _ := range input &#123; if (g+1)%3 == 0 &#123; fmt.Print(&quot;*.*.&quot;) continue &#125; fmt.Print(&quot;#.#.&quot;) &#125; fmt.Println(&quot;&quot;) fmt.Print(&quot;#&quot;) for g, va := range input &#123; if (g+2)%3 == 0 || (g+1)%3==0&#123; if g+1==len(input)&amp;&amp;(g+1)%3!=0 &#123; fmt.Printf(&quot;.%c.#&quot;, va) continue &#125; fmt.Printf(&quot;.%c.*&quot;, va) continue &#125; fmt.Printf(&quot;.%c.#&quot;,va) &#125; fmt.Println(&quot;&quot;) fmt.Print(&quot;.&quot;) for g, _ := range input &#123; if (g+1)%3 == 0 &#123; fmt.Print(&quot;*.*.&quot;) continue &#125; fmt.Print(&quot;#.#.&quot;) &#125; fmt.Println(&quot;&quot;) for g, _ := range input &#123; fmt.Print(&quot;.&quot;) if (g+1)%3 == 0 &#123; fmt.Print(&quot;.*.&quot;) continue &#125; fmt.Print(&quot;.#.&quot;) &#125; fmt.Print(&quot;.&quot;)&#125; çœŸçš„éº»çƒ¦å•Šæˆ‘è¶…ï¼Œå·®ç‚¹æ²¡æ­»äº†ï¼Œä¸è¿‡å°±æ˜¯æ§åˆ¶è¯­å¥çš„å……åˆ†åˆ©ç”¨ï¼ŒæˆåŠŸäº†å°±è§‰å¾—å…¶å®æ²¡ä»€ä¹ˆéš¾åº¦äº†ğŸ˜¶ã€‚ 4.P1003 [NOIP2011 æé«˜ç»„] é“ºåœ°æ¯¯[P1003 NOIP2011 æé«˜ç»„] é“ºåœ°æ¯¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526272829303132333435363738package mainimport (&quot;fmt&quot;)type di struct &#123;ditans []*ditan&#125;//è¿™é‡Œå®šä¹‰çš„æ˜¯æ•°ç»„ç±»å‹çš„ç»“æ„ä½“åµŒå¥—ï¼Ÿtype ditan struct &#123; a int b int g int k int&#125;func creatditan(a,b,g,k int) *ditan &#123; ditan:=ditan&#123;a,b,g,k&#125; return &amp;ditan&#125;//è¾“å…¥æ•°æ®è¾“å‡ºä¸€ä¸ªditanç±»å‹çš„ç»“æ„ä½“func (dit *di)addditan(a,b,g,k int)&#123;newditan:=creatditan(a,b,g,k)dit.ditans=append(dit.ditans,newditan)&#125;//æŠŠditanåŠ åˆ°dié‡Œï¼Œå°±å¯ä»¥æ•°ç»„è°ƒç”¨äº†ã€‚func main() &#123; var ( n int l int a, b, g, k int ) fmt.Scan(&amp;n) var newditan di for l = 0; l &lt; n; l++ &#123;fmt.Scan(&amp;a, &amp;b, &amp;g, &amp;k) newditan.addditan(a, b, g, k) &#125; var (x,y int) fmt.Scan(&amp;x,&amp;y) var q = 0 for num,bb:=range newditan.ditans&#123; if (x&gt;=bb.a || x&lt;=(bb.g+bb.a))||(y&gt;=bb.b || y&lt;=(bb.k+bb.b))&#123; q+=1 fmt.Print(n-num) break&#125; &#125; if q==0 &#123;fmt.Print(-1)&#125;&#125; è¿™ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå¯¹ç»“æ„ä½“åµŒå¥—çš„é‚£ä¸ªç®—ä¸ªæ‰©å±•ï¼Œå®é™…ä¸‹è¾¹çš„æ–¹æ³•å¯¹äºåˆ‡ç‰‡çš„ä½¿ç”¨æ›´åˆé€‚ã€‚ è¿˜æœ‰ç¬¬äºŒä¸ªæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536package mainimport ( &quot;fmt&quot;)type Carpet struct &#123;x1, y1, x2, y2 int&#125;func main() &#123; var x,y intn := 0fmt.Scan(&amp;n)carpets := make([]Carpet, n)//è¿™é‡Œå¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªæ•°ç»„ç±»å‹çš„ç»“æ„ä½“ã€‚æ¯”ä¸Šè¾¹æ–¹ä¾¿å¤šäº†for i := 0; i &lt; n; i++ &#123;fmt.Scan(&amp;carpets[i].x1, &amp;carpets[i].y1, &amp;carpets[i].x2, &amp;carpets[i].y2)&#125;fmt.Scan(&amp;x, &amp;y)maxCovered := -1covered := falsefor i := n - 1; i &gt;= 0; i-- &#123;if x &gt;= carpets[i].x1 &amp;&amp; x &lt;= (carpets[i].x2+carpets[i].x1) &amp;&amp; y &gt;= carpets[i].y1 &amp;&amp; y &lt;= (carpets[i].y2+carpets[i].y1) &#123;covered = truemaxCovered = i + 1break&#125;&#125;if covered &#123;fmt.Println(maxCovered)&#125; else &#123;fmt.Println(-1)&#125;&#125; ä¸‹è¾¹çš„æ–¹æ³•æ›´ç®€å•ï¼Œå› ä¸ºä¸Šè¾¹çš„æ˜¯æˆ‘ä»åŒºå—é“¾å­¦çš„ï¼Œå¿˜äº†æ€ä¹ˆæ•´è¿™ä¸ªåˆ‡ç‰‡äº†ğŸ˜”ã€‚ 5.P1035 [NOIP2002 æ™®åŠç»„] çº§æ•°æ±‚å’Œ[P1035 NOIP2002 æ™®åŠç»„] çº§æ•°æ±‚å’Œ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617package mainimport &quot;fmt&quot;func main() &#123; var k float64 var num float64 var n float64 = 1 fmt.Scan(&amp;k) for ; ; n++ &#123; num += (1 / n) if num &gt; k &#123; fmt.Println(n) break &#125; &#125;&#125; è¿™é“é¢˜å¾ˆç®€å•å•Šï¼Œé”™è¯¯ç‚¹å°±æ˜¯ä¼šä¸€ç›´å¾ªç¯è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å®šä¹‰çš„æ•°æ®ç±»å‹æ˜¯æ•´å½¢æ•°æ®ï¼Œæ”¹æˆæµ®ç‚¹å‹å°±å¥½äº†ã€‚ 6.P1046 [NOIP2005 æ™®åŠç»„] é™¶é™¶æ‘˜è‹¹æœ[P1046 NOIP2005 æ™®åŠç»„] é™¶é™¶æ‘˜è‹¹æœ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920package mainimport &quot;fmt&quot;func main() &#123; var x1, x2, x3, x4, x5, x6, x7, x8, x9, x10 int fmt.Scan(&amp;x1, &amp;x2, &amp;x3, &amp;x4, &amp;x5, &amp;x6, &amp;x7, &amp;x8, &amp;x9, &amp;x10) a := []int&#123;x1, x2, x3, x4, x5, x6, x7, x8, x9, x10&#125; var high int var n int fmt.Scan(&amp;high) for _, h := range a &#123; if high &gt;= h &#123; n++ &#125; else if high+30 &gt;= h &#123; n++ &#125; &#125; fmt.Print(n)&#125; å¾ˆç®€å•çš„ä¸€é¢˜ï¼Œæ²¡ä»€ä¹ˆå¼ºè°ƒçš„ã€‚ 7.P1047 [NOIP2005 æ™®åŠç»„] æ ¡é—¨å¤–çš„æ ‘[P1047 NOIP2005 æ™®åŠç»„] æ ¡é—¨å¤–çš„æ ‘ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 12345678910111213141516171819202122232425package mainimport ( &quot;fmt&quot;)func main() &#123; var l, m int fmt.Scan(&amp;l, &amp;m) var a, b int list := make([]int, l+1) for ; m &gt; 0; m-- &#123; a = 0 b = 0 fmt.Scan(&amp;a, &amp;b) for ; a &lt;= b; a++ &#123; list[a] = 1 &#125; &#125; var num int for _, n := range list &#123; num += n &#125; fmt.Print(l + 1 - num)&#125; è¿™é“é¢˜å¦‚æœç”¨é‚£ç§åˆ’åˆ†èŒƒå›´çš„æ¯”å¤§å°å¤ªéº»çƒ¦äº†ï¼Œè¿™ç§ç”¨åˆ‡ç‰‡çš„æ–¹æ³•å¥½åƒæ›´å¥½ä¸€ç‚¹ã€‚ è¿™é“é¢˜å‡ºç°ä¸€ä¸ªé”™è¯¯å°±æ˜¯å®šä¹‰liståˆ‡ç‰‡é‚£ä¸€è¡Œï¼Œä¸ç„¶æ ‘æœ¨æ€»æ•°ä¸ä¸€æ ·ã€‚å› ä¸ºå®¹é‡æ˜¯ä»1å¼€å§‹çš„å¦‚æœä¸åŠ 1çš„è¯å°±å°‘ä¸€ä¸ªäº†ã€‚ 8.P1075 [NOIP2012 æ™®åŠç»„] è´¨å› æ•°åˆ†è§£[P1075 NOIP2012 æ™®åŠç»„] è´¨å› æ•°åˆ†è§£ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) å‚»æ–¹æ³•ä½†æ˜¯è¶…æ—¶ 1234567891011121314151617181920212223242526272829303132333435package mainimport &quot;fmt&quot;func zhishu(int2 int) bool &#123; if int2 &lt;= 1 &#123; return false &#125; for i := 2; i &lt; int2; i++ &#123; if int2%i == 0 &#123; return false &#125; &#125; return true&#125;func maxzhishu(int2 int) (int, bool) &#123; for n := int2; n &gt;= 0; n-- &#123; if zhishu(n) &#123; if int2%n == 0 &#123; if zhishu(int2 / n) &#123; return n, true &#125; &#125; &#125; &#125; return 0, false&#125;func main() &#123; var num int fmt.Scan(&amp;num) num, bool := maxzhishu(num) if bool &#123; fmt.Print(num) &#125;&#125; äºŒè§£ï¼Œå…¶å®æˆ‘è§‰å¾—ä»–è¿™ä¸ªä¸å¤ªåˆé€‚è¿™ä¸ªé¢˜ã€‚å¯èƒ½é¢˜ç›®æœ‰é—®é¢˜ã€‚ 1234567891011121314package mainimport &quot;fmt&quot;func main() &#123; var n, i int64 fmt.Scan(&amp;n) for i = 2; i &lt;= n; i++ &#123; if n%i == 0 &#123; fmt.Println(n / i) break &#125; &#125;&#125; 9.P1085 [NOIP2004 æ™®åŠç»„] ä¸é«˜å…´çš„æ´¥æ´¥[P1085 NOIP2004 æ™®åŠç»„] ä¸é«˜å…´çš„æ´¥æ´¥ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 12345678910111213141516171819202122232425262728package mainimport ( &quot;fmt&quot;)func main() &#123; var a, b, num int var n []int for i := 1; i &lt;= 7; i++ &#123; fmt.Scan(&amp;a, &amp;b) num = a + b n = append(n, num) &#125; max := 8 xingqi := 0 for we, time := range n &#123; if time &gt; max &#123; max = time xingqi = we + 1 &#125; &#125; if max &gt; 8 &#123; fmt.Print(xingqi) &#125; else &#123; fmt.Print(0) &#125;&#125; æ³¨æ„æ¯”è¾ƒå¤§å°ï¼Œæ²¡æœ‰éš¾åº¦ã€‚ 10.P1089 [NOIP2004 æé«˜ç»„] æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’[P1089 NOIP2004 æé«˜ç»„] æ´¥æ´¥çš„å‚¨è“„è®¡åˆ’ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526272829303132333435363738package mainimport &quot;fmt&quot;func main() &#123; var money int var sum int var lost int var a [12]int i := 1 for ; i &lt;= 12; i++ &#123; fmt.Scan(&amp;money) lost = lost + 300 - money if lost &gt;= 100 &#123; sum += lost - lost%100 lost = lost % 100 &#125; if lost &lt; 0 &#123; a[i] = 1 &#125; &#125; q := 0 for w, nu := range a &#123; if nu == 1 &#123; fmt.Print(-w) return &#125; if nu == 0 &#123; q++ if q == 12 &#123; var over1 float64 = float64(lost) var over float64 = float64(sum) fmt.Print(1.2*over + over1) &#125; &#125; &#125;&#125; é‡ç‚¹åœ¨ç±»å‹è½¬æ¢å’Œæœ€åè¦åŠ ä¸Š12æœˆæ²¡ç”¨å®Œçš„é’±å‘¢ã€‚ 11.P1150 Peter çš„çƒŸP1150 Peter çš„çƒŸ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526package mainimport &quot;fmt&quot;func main() &#123; var n, k int fmt.Scan(&amp;n, &amp;k) var sum int var l, o int o = n for &#123; if o &lt; k &#123; o += l l = 0 &#125; if o &lt; k &#123; break &#125; if o &gt;= k &#123; o -= k l++ sum++ &#125; &#125; fmt.Print(n + sum)&#125; æ²¡éš¾åº¦ï¼Œå°±æ˜¯æœ‰ç‚¹ç»•å¼¯ã€‚ 12.P1151 å­æ•°æ•´æ•°P1151 å­æ•°æ•´æ•° - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223package mainimport &quot;fmt&quot;func main() &#123; var k int fmt.Scan(&amp;k) var o int = 0 for i := 10000; i &lt;= 30000; i++ &#123; var s1, s2, s3 int s1 = (i - i%100) / 100 s2 = ((i % 10000) - (i%10000)%10) / 10 s3 = i % 1000 if s1%k == 0 &amp;&amp; s2%k == 0 &amp;&amp; s3%k == 0 &#123; fmt.Println(i) o++ &#125; &#125; if o == 0 &#123; fmt.Print(&quot;No&quot;) &#125;&#125; æ²¡éš¾åº¦ 13.P1152 æ¬¢ä¹çš„è·³P1152 æ¬¢ä¹çš„è·³ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package mainimport ( &quot;fmt&quot;)func isAvailable(alpha []int, str int) bool &#123; for i := 0; i &lt; len(alpha); i++ &#123; if alpha[i] == str &#123; return true &#125; &#125; return false&#125;func main() &#123; var n, num int fmt.Scan(&amp;n) list := make([]int, n) for i := 0; i &lt;= n-1; i++ &#123; fmt.Scan(&amp;num) list[i] = num &#125; var cha []int var chazhi int for i := 0; i &lt;= n-2; i++ &#123; chazhi = list[i+1] - list[i] cha = append(cha, chazhi) &#125; for x, y := range cha &#123; if y &lt; 0 &#123; cha[x] = -y &#125; &#125; var t int for m := 1; m &lt;= n-1; m++ &#123; if isAvailable(cha, m) &#123; t = t + 1 &#125; if isAvailable(cha, m) == false &#123; fmt.Println(&quot;Not jolly&quot;) return &#125; &#125; if t &gt;= n-1 &#123; fmt.Print(&quot;Jolly&quot;) &#125;&#125; æ²¡éš¾åº¦ï¼Œæ·»åŠ ä¸ªå‡½æ•°å°±è¿‡äº†ã€‚ 14.P1161 å¼€ç¯P1161 å¼€ç¯ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 12345678910111213141516171819202122232425262728package mainimport &quot;fmt&quot;func main() &#123; var n int fmt.Scan(&amp;n) var t float64 var a float64 light := make(map[int]int) for i := 0; i &lt; n; i++ &#123; fmt.Scan(&amp;a, &amp;t) for n := 1.0; n &lt;= t; n++ &#123; b := int(a * n) if light[b] == 1 &#123; light[b] = 0 continue &#125; light[b] = 1 &#125; &#125; for k, l := range light &#123; if l == 1 &#123; fmt.Println(k) &#125; &#125;&#125; ä»æœªæœ‰å¦‚æ­¤é¡ºåˆ©çš„ä¸€é“é¢˜ï¼Œä¸€æ¬¡ç›´æ¥è¿‡ï¼Œæˆ‘åªèƒ½è¯´è¿™é¢˜ç”¨æ˜ å°„çœŸçš„æ²¡æ¯›ç—…ã€‚ 15.P1179 [NOIP2010 æ™®åŠç»„] æ•°å­—ç»Ÿè®¡[P1179 NOIP2010 æ™®åŠç»„] æ•°å­—ç»Ÿè®¡ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 123456789101112131415161718192021222324252627package mainimport ( &quot;fmt&quot;)func main() &#123; var l, r, n, a int fmt.Scan(&amp;l, &amp;r) for e := r; e &gt;= 10; &#123; e = e / 10 a++ &#125; for ; l &lt;= r; l++ &#123; q := l if q%10 == 2 &#123; n++ &#125; for i := 1; i &lt;= a; i++ &#123; q = q / 10 if q%10 == 2 &#123; n++ &#125; &#125; &#125; fmt.Println(n)&#125; åˆ°æœ€åè¶…æ—¶äº†ï¼Œæœ¬æ¥é‚£ä¸ªè®¡ç®—açš„forå¾ªç¯æ˜¯åœ¨ä¸‹è¾¹çš„foré‡Œè¾¹çš„ï¼Œä¸è¿‡æ„Ÿè§‰ç°åœ¨è¿™ä¸ªè¿˜æ˜¯æœ‰å¥½å¤šè®¡ç®—æ˜¯æ²¡ç”¨çš„ï¼Œä¸è¿‡æ•ˆç‡å±…ç„¶æé«˜äº†ä¸€åŠå¤šã€‚ 16.P1200 [USACO1.1] ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿ Your Ride Is Here[P1200 USACO1.1] ä½ çš„é£ç¢Ÿåœ¨è¿™å„¿ Your Ride Is Here - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package mainimport ( &quot;fmt&quot; &quot;math&quot;)func main() &#123; map1 := make(map[string]int) map1[&quot;A&quot;] = 1 map1[&quot;B&quot;] = 2 map1[&quot;C&quot;] = 3 map1[&quot;D&quot;] = 4 map1[&quot;E&quot;] = 5 map1[&quot;F&quot;] = 6 map1[&quot;G&quot;] = 7 map1[&quot;H&quot;] = 8 map1[&quot;I&quot;] = 9 map1[&quot;J&quot;] = 10 map1[&quot;K&quot;] = 11 map1[&quot;L&quot;] = 12 map1[&quot;M&quot;] = 13 map1[&quot;N&quot;] = 14 map1[&quot;O&quot;] = 15 map1[&quot;P&quot;] = 16 map1[&quot;Q&quot;] = 17 map1[&quot;R&quot;] = 18 map1[&quot;S&quot;] = 19 map1[&quot;T&quot;] = 20 map1[&quot;U&quot;] = 21 map1[&quot;V&quot;] = 22 map1[&quot;W&quot;] = 23 map1[&quot;X&quot;] = 24 map1[&quot;Y&quot;] = 25 map1[&quot;Z&quot;] = 26 var hui, dui string fmt.Scan(&amp;hui) fmt.Scan(&amp;dui) huin := 1 duin := 1 for _, Q := range hui &#123; P := string(Q) huin *= map1[P] &#125; for _, Q := range dui &#123; P := string(Q) duin *= map1[P] &#125; var duif = float64(duin) var huif = float64(huin) if math.Mod(duif, 47) == math.Mod(huif, 47) &#123; fmt.Println(&quot;GO&quot;) &#125; else &#123; fmt.Println(&quot;STAY&quot;) &#125;&#125; ç±»å‹è½¬æ¢å¤šä¸€ç‚¹ 17.P1304 å“¥å¾·å·´èµ«çŒœæƒ³P1304 å“¥å¾·å·´èµ«çŒœæƒ³ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn) 12345678910111213141516171819202122232425262728293031323334package mainimport ( &quot;fmt&quot;)func zhishu(n int) bool &#123; if n &lt;= 1 &#123; return false &#125; for i := 2; i &lt; n; i++ &#123; if n%i == 0 &#123; return false &#125; &#125; return true&#125;func zhishuhe(int2 int) (int, int) &#123; for i := 2; i &lt;= int2; i++ &#123; if zhishu(i) &amp;&amp; zhishu(int2-i) &#123; return i, (int2 - i) &#125; &#125; return 0, 0&#125;func main() &#123; var N int fmt.Scan(&amp;N) for i := 4; i &lt;= N; i += 2 &#123; x, y := zhishuhe(i) fmt.Print(i, &quot;=&quot;, x, &quot;+&quot;, y) fmt.Println() &#125;&#125; å†™ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦æ˜¯è´¨æ•°çš„å‡½æ•°å°±okäº†","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://example.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://example.com/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Badgerå­¦ä¹ ä½¿ç”¨","slug":"Badgerå­¦ä¹ ä½¿ç”¨","date":"2023-12-18T08:49:04.000Z","updated":"2023-12-22T12:14:50.788Z","comments":true,"path":"2023/12/18/Badgerå­¦ä¹ ä½¿ç”¨/","link":"","permalink":"http://example.com/2023/12/18/Badger%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/","excerpt":"","text":"BADGERç®€å•å®ç”¨ç®€ä»‹ä¸€ç§kvå¼•æ“ï¼ŒKV å¼•æ“æ˜¯ä¸€ç§é”®å€¼å­˜å‚¨å¼•æ“ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ã€‚å…¶ä¸­ï¼Œé”®æ˜¯å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå€¼æ˜¯ä»»æ„æ•°æ®ç±»å‹ã€‚KV å¼•æ“é€šå¸¸ç”¨äºç¼“å­˜ã€æ•°æ®åº“ç­‰åœºæ™¯ã€‚æ˜¯ go ç”Ÿæ€ä¸­æ¯”è¾ƒç”Ÿäº§çº§çš„å­˜å‚¨å¼•æ“ã€‚ å®‰è£…æŒ‡ä»¤è¾“å…¥ 1go get github.com/dgraph-io/badger åœ¨è¿™é‡Œæˆ‘çš„å®‰è£…å‡ºäº†ä¸€äº›é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘æ˜¯è‡ªå·±ä¸‹è½½çš„ç„¶åè‡ªå·±å®‰è£…çš„ï¼Œå¦‚æœä½ ä¹Ÿå‡ºé”™äº†å¯ä»¥ä¸‹è½½ä»“åº“ Â· Gitee æé€Ÿä¸‹è½½&#x2F;Badger - Gitee.comä¸‹è½½ä¹‹åï¼Œé€šè¿‡golandçš„å‘½ä»¤è¡Œcdåˆ°ä½ ä¸‹è½½&#x2F;badgeré‡Œï¼Œç„¶åå‘½ä»¤è¡Œè¾“å…¥go installå°±å¥½äº†ã€‚ æ•°æ®åº“æ“ä½œæ‰“å¼€æ•°æ®åº“123456789101112131415161718func Open(path string) (*badger.DB, error) &#123; if _, err := os.Stat(path); os.IsNotExist(err) &#123; os.MkdirAll(path, 0755) &#125; opts := badger.DefaultOptions(path) opts.Dir = path opts.ValueDir = path opts.SyncWrites = false opts.ValueThreshold = 256 opts.CompactL0OnClose = true db, err := badger.Open(opts) if err != nil &#123; log.Println(&quot;badger open failed&quot;, &quot;path&quot;, path, &quot;err&quot;, err) return nil, err &#125; return db, nil&#125; ç”¨äºæ‰“å¼€æˆ–åˆ›å»ºBadgeræ•°æ®åº“çš„å‡½æ•°ã€‚ å‡½æ•°åä¸ºOpenï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°pathï¼Œè¡¨ç¤ºæ•°æ®åº“æ–‡ä»¶çš„è·¯å¾„ã€‚å‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡å‘badger.DBç±»å‹çš„æŒ‡é’ˆå’Œä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚ å‡½æ•°é¦–å…ˆä½¿ç”¨os.Stat(path)æ£€æŸ¥æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨os.MkdirAll(path, 0755)åˆ›å»ºè¯¥è·¯å¾„åŠå…¶æ‰€æœ‰çˆ¶ç›®å½•ï¼Œå¹¶è®¾ç½®æƒé™ä¸º755ã€‚ æ¥ä¸‹æ¥ï¼Œå‡½æ•°åˆ›å»ºä¸€ä¸ªbadger.DefaultOptions(path)å¯¹è±¡ï¼Œç”¨äºé…ç½®Badgeræ•°æ®åº“çš„é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹åŒ…æ‹¬ï¼š Dir: æ•°æ®åº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ ValueDir: å­˜å‚¨å€¼çš„ç›®å½•ã€‚ SyncWrites: æ˜¯å¦åŒæ­¥å†™å…¥ç£ç›˜ã€‚è®¾ç½®ä¸ºfalseå¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†å¯èƒ½ä¼šé™ä½æ•°æ®çš„ä¸€è‡´æ€§ã€‚ ValueThreshold: è§¦å‘L0å‹ç¼©çš„é˜ˆå€¼ã€‚å½“å­˜å‚¨çš„å€¼æ•°é‡è¶…è¿‡è¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œä¼šè§¦å‘L0å‹ç¼©ä»¥é‡Šæ”¾ç©ºé—´ã€‚ CompactL0OnClose: æ˜¯å¦åœ¨å…³é—­æ•°æ®åº“æ—¶è‡ªåŠ¨è¿›è¡ŒL0å‹ç¼©ã€‚è®¾ç½®ä¸ºtrueå¯ä»¥åœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨å‹ç¼©ï¼Œå‡å°‘ç£ç›˜ç©ºé—´çš„ä½¿ç”¨ã€‚ ç„¶åï¼Œå‡½æ•°ä½¿ç”¨badger.Open(opts)æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶å°†ç»“æœèµ‹å€¼ç»™å˜é‡dbã€‚å¦‚æœæ‰“å¼€è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå‡½æ•°ä¼šè®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¿”å›nilå’Œé”™è¯¯ä¿¡æ¯ã€‚ æœ€åï¼Œå‡½æ•°è¿”å›æŒ‡å‘æ•°æ®åº“çš„æŒ‡é’ˆå’Œnilä½œä¸ºé”™è¯¯ä¿¡æ¯ï¼Œè¡¨ç¤ºæˆåŠŸæ‰“å¼€äº†æ•°æ®åº“ã€‚ å†…å­˜æ¨¡å¼&#x2F;æ— ç›˜æ¨¡å¼é»˜è®¤Badger æ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨ç£ç›˜ä¸Šã€‚å®ƒè¿˜æ”¯æŒçº¯å†…å­˜æ¨¡å¼ã€‚å½“ Badger åœ¨å†…å­˜æ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚åœ¨å†…å­˜æ¨¡å¼ä¸‹è¯»å†™é€Ÿåº¦è¦å¿«å¾—å¤šï¼Œä½†åœ¨å´©æºƒæˆ–å…³é—­çš„æƒ…å†µä¸‹ï¼Œå­˜å‚¨åœ¨ Badger ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚è¦åœ¨å†…å­˜æ¨¡å¼ä¸‹æ‰“å¼€ badgerï¼Œè®¾ç½®InMemoryé€‰é¡¹ã€‚ 1opts := badger.DefaultOptions(path).WithInMemory(true) å…³é—­æ•°æ®åº“12345678func Close() &#123; err := badgerDB.Close() if err == nil &#123; log.Println(&quot;database closed&quot;, &quot;err&quot;, err) &#125; else &#123; log.Println(&quot;failed to close database&quot;, &quot;err&quot;, err) &#125;&#125; çš„ä½œç”¨æ˜¯å…³é—­ä¸€ä¸ªåä¸ºbadgerDBçš„æ•°æ®åº“è¿æ¥ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆè°ƒç”¨badgerDB.Close()æ–¹æ³•æ¥å…³é—­æ•°æ®åº“è¿æ¥ï¼Œå¹¶å°†è¿”å›çš„é”™è¯¯ä¿¡æ¯å­˜å‚¨åœ¨å˜é‡errä¸­ã€‚ç„¶åï¼Œé€šè¿‡åˆ¤æ–­erræ˜¯å¦ä¸ºnilæ¥ç¡®å®šå…³é—­æ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœerrä¸ºnilï¼Œåˆ™è¡¨ç¤ºå…³é—­æ“ä½œæˆåŠŸï¼Œä½¿ç”¨log.Printlnæ‰“å°ä¸€æ¡æ—¥å¿—ä¿¡æ¯ï¼Œæ˜¾ç¤ºâ€database closedâ€å’Œé”™è¯¯ä¿¡æ¯ï¼›å¦åˆ™ï¼Œè¡¨ç¤ºå…³é—­æ“ä½œå¤±è´¥ï¼ŒåŒæ ·ä½¿ç”¨log.Printlnæ‰“å°ä¸€æ¡æ—¥å¿—ä¿¡æ¯ï¼Œæ˜¾ç¤ºâ€failed to close databaseâ€å’Œé”™è¯¯ä¿¡æ¯ã€‚ å­˜å‚¨æ“ä½œå†™å…¥æ•°æ®ä¿å­˜é”®å€¼å¯¹ï¼Œä½¿ç”¨ä¸‹é¢Txn.Set()æ–¹æ³•ã€‚ 12345678910111213func Set(key []byte, value []byte) &#123; wb := badgerDB.NewWriteBatch() defer wb.Cancel() err := wb.SetEntry(badger.NewEntry(key, value).WithMeta(0)) if err != nil &#123; log.Println(&quot;Failed to write data to cache.&quot;,&quot;key&quot;, string(key), &quot;value&quot;, string(value), &quot;err&quot;, err) &#125; err = wb.Flush() if err != nil &#123; log.Println(&quot;Failed to flush data to cache.&quot;,&quot;key&quot;, string(key), &quot;value&quot;, string(value), &quot;err&quot;, err) &#125;&#125; è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç”¨äºå°†é”®å€¼å¯¹å­˜å‚¨åˆ°Badgeræ•°æ®åº“ä¸­çš„å‡½æ•°ã€‚å‡½æ•°åä¸ºSetï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼škeyå’Œvalueï¼Œå®ƒä»¬éƒ½æ˜¯å­—èŠ‚åˆ‡ç‰‡ç±»å‹ã€‚ å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªbadgerDB.WriteBatch()å¯¹è±¡ï¼Œå‘½åä¸ºwbã€‚ç„¶åä½¿ç”¨defer wb.Cancel()æ¥ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚ æ¥ä¸‹æ¥ï¼Œé€šè¿‡è°ƒç”¨wb.SetEntry(badger.NewEntry(key, value).WithMeta(0))å°†é”®å€¼å¯¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚è¿™é‡Œä½¿ç”¨äº†badger.NewEntry(key, value)æ¥åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ¡ç›®ï¼Œå¹¶é€šè¿‡.WithMeta(0)è®¾ç½®å…ƒæ•°æ®ä¸º0ã€‚ å¦‚æœå­˜å‚¨è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to write data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚ æœ€åï¼Œè°ƒç”¨wb.Flush()å°†æ‰¹å¤„ç†ä¸­çš„æ‰€æœ‰æ›´æ”¹åˆ·æ–°åˆ°æ•°æ®åº“ä¸­ã€‚å¦‚æœåˆ·æ–°è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼ŒåŒæ ·ä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to flush data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚ è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„badgerDBæ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–æˆ–å¯¼å…¥ç›¸åº”çš„åº“ã€‚ é€šè¿‡ä½¿ç”¨deferå…³é”®å­—ï¼Œå¯ä»¥åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åè‡ªåŠ¨è°ƒç”¨wb.Cancel()æ–¹æ³•æ¥é‡Šæ”¾è¿™äº›èµ„æºï¼Œé¿å…èµ„æºæ³„æ¼å’Œç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€‚ è®¾ç½®TTLçš„å†™å…¥æ•°æ®Badger å…è®¸åœ¨é”®ä¸Šè®¾ç½®å¯é€‰çš„ç”Ÿå­˜æ—¶é—´ (TTL) å€¼ã€‚ä¸€æ—¦ TTL è¿‡å»ï¼Œå¯†é’¥å°†ä¸å†å¯æ£€ç´¢ï¼Œå¹¶ä¸”å°†æœ‰èµ„æ ¼è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚ å¯ä»¥ä½¿ç”¨å’ŒAPI æ–¹æ³•å°† TTL è®¾ç½®ä¸ºtime.Durationå€¼ã€‚ 123456789101112func SetWithTTL(key []byte, value []byte, ttl int64) &#123; wb := badgerDB.NewWriteBatch() defer wb.Cancel() err := wb.SetEntry(badger.NewEntry(key, value).WithMeta(0).WithTTL(time.Duration(ttl * time.Second.Nanoseconds()))) if err != nil &#123; log.Println(&quot;Failed to write data to cache.&quot;,&quot;key&quot;, string(key), &quot;value&quot;, string(value), &quot;err&quot;, err) &#125; err = wb.Flush() if err != nil &#123; log.Println(&quot;Failed to flush data to cache.&quot;,&quot;key&quot;, string(key), &quot;value&quot;, string(value), &quot;err&quot;, err) &#125;&#125; åä¸ºSetWithTTLçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼škeyã€valueå’Œttlã€‚è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†é”®å€¼å¯¹å­˜å‚¨åˆ°Badgeræ•°æ®åº“ä¸­ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ã€‚ å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªbadgerDB.WriteBatch()å¯¹è±¡ï¼Œå‘½åä¸ºwbã€‚ç„¶åä½¿ç”¨defer wb.Cancel()æ¥ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚ æ¥ä¸‹æ¥ï¼Œé€šè¿‡è°ƒç”¨wb.SetEntry()æ–¹æ³•å°†é”®å€¼å¯¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä½¿ç”¨badger.NewEntry(key, value)åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ¡ç›®ï¼Œå¹¶é€šè¿‡.WithMeta(0)è®¾ç½®å…ƒæ•°æ®ä¸º0ã€‚ç„¶åï¼Œä½¿ç”¨.WithTTL(time.Duration(ttl * time.Second.Nanoseconds()))è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºä¼ å…¥çš„ttlå‚æ•°æ‰€è¡¨ç¤ºçš„æ—¶é—´ã€‚ å¦‚æœåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to write data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚ æœ€åï¼Œè°ƒç”¨wb.Flush()å°†æ‰¹å¤„ç†ä¸­çš„æ›´æ”¹åˆ·æ–°åˆ°æ•°æ®åº“ä¸­ã€‚å¦‚æœåˆ·æ–°è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼ŒåŒæ ·ä¼šæ•è·å¼‚å¸¸å¹¶æ‰“å°æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬â€Failed to flush data to cache.â€ã€é”®ã€å€¼å’Œé”™è¯¯ä¿¡æ¯ã€‚ è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„badgerDBæ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œéœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–æˆ–å¯¼å…¥ç›¸åº”çš„åº“ã€‚ è¯»å–æ•°æ®è¦è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹Txn.Get()æ–¹æ³• 123456789101112131415func Get(key []byte) string &#123; var ival []byte err := badgerDB.View(func(txn *badger.Txn) error &#123; item, err := txn.Get(key) if err != nil &#123; return err &#125; ival, err = item.ValueCopy(nil) return err &#125;) if err != nil &#123; log.Println(&quot;Failed to read data from the cache.&quot;,&quot;key&quot;, string(key), &quot;error&quot;, err) &#125; return string(ival)&#125; æ¥å—ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ä½œä¸ºå‚æ•°ï¼ˆkeyï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸ªå‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä»åä¸ºbadgerDBçš„æ•°æ®åº“ä¸­è¯»å–æ•°æ®ã€‚ å‡½æ•°é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªç©ºçš„å­—èŠ‚åˆ‡ç‰‡ivalï¼Œç”¨äºå­˜å‚¨ä»æ•°æ®åº“ä¸­è·å–çš„å€¼ã€‚ç„¶åï¼Œå®ƒè°ƒç”¨badgerDBçš„Viewæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°æ¥å—ä¸€ä¸ªbadger.Txnç±»å‹çš„å‚æ•°txnï¼Œå¹¶è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨åŒ¿åå‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆå°è¯•ä»æ•°æ®åº“ä¸­è·å–ä¸ç»™å®šé”®å…³è”çš„é¡¹ç›®ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°å°†ç«‹å³è¿”å›é”™è¯¯ã€‚å¦åˆ™ï¼Œå®ƒå°†ä½¿ç”¨item.ValueCopyæ–¹æ³•å°†é¡¹ç›®çš„å€¼å¤åˆ¶åˆ°ivalåˆ‡ç‰‡ä¸­ã€‚å¦‚æœåœ¨å¤åˆ¶è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¹Ÿå°†è¿”å›é”™è¯¯ã€‚ æœ€åï¼Œå¦‚æœåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•é”™è¯¯ï¼Œå‡½æ•°å°†ä½¿ç”¨log.Printlnæ‰“å°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼ŒåŒ…æ‹¬é”®å’Œé”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œå‡½æ•°å°†è¿”å›ivalåˆ‡ç‰‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ç»“æœã€‚ å­˜åœ¨é”®1234567891011121314151617func Has(key []byte) (bool, error) &#123; var exist bool = false err := badgerDB.View(func(txn *badger.Txn) error &#123; _, err := txn.Get(key) if err != nil &#123; return err &#125; else &#123; exist = true &#125; return err &#125;) // align with leveldb, if the key doesn&#x27;t exist, leveldb returns nil if strings.HasSuffix(err.Error(), &quot;not found&quot;) &#123; err = nil &#125; return exist, err&#125; åä¸ºHasçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ç±»å‹çš„å‚æ•°keyï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼å’Œä¸€ä¸ªé”™è¯¯ã€‚è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯æ£€æŸ¥ç»™å®šçš„é”®æ˜¯å¦å­˜åœ¨äºæ•°æ®åº“ä¸­ã€‚ å‡½æ•°å†…éƒ¨é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªå¸ƒå°”å˜é‡existå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºfalseã€‚ç„¶åï¼Œä½¿ç”¨badgerDB.Viewæ–¹æ³•æ¥éå†æ•°æ®åº“ä¸­çš„æ¯ä¸ªäº‹åŠ¡ã€‚åœ¨æ¯ä¸ªäº‹åŠ¡ä¸­ï¼Œé€šè¿‡è°ƒç”¨txn.Get(key)æ¥è·å–ä¸ç»™å®šé”®å…³è”çš„å€¼ã€‚å¦‚æœè·å–æˆåŠŸï¼Œåˆ™å°†existè®¾ç½®ä¸ºtrueã€‚å¦‚æœåœ¨è·å–è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥é”™è¯¯ã€‚ æœ€åï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†å¯¹åº”çš„é”®ã€‚å¦‚æœé”™è¯¯ä¿¡æ¯ä»¥â€not foundâ€ç»“å°¾ï¼Œè¯´æ˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é”®ï¼Œæ­¤æ—¶å°†é”™è¯¯è®¾ç½®ä¸ºnilã€‚æœ€ç»ˆï¼Œå‡½æ•°è¿”å›existå’Œerrä¸¤ä¸ªå€¼ï¼Œå…¶ä¸­existè¡¨ç¤ºé”®æ˜¯å¦å­˜åœ¨ï¼Œerrè¡¨ç¤ºå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚ åˆ é™¤é”®ä½¿ç”¨Txn.Delete()æ–¹æ³•åˆ é™¤ keyã€‚ 12345func Delete(key []byte) error &#123; wb := badgerDB.NewWriteBatch() defer wb.Cancel() return wb.Delete(key)&#125; è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç”¨äºåˆ é™¤é”®å€¼å¯¹çš„å‡½æ•°ã€‚å®ƒä½¿ç”¨äº†BadgerDBæ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨Deleteæ–¹æ³•æ¥åˆ é™¤æŒ‡å®šçš„é”®ã€‚ å‡½æ•°çš„å‚æ•°æ˜¯keyï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼ˆ[]byteï¼‰ï¼Œè¡¨ç¤ºè¦åˆ é™¤çš„é”®ã€‚ å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªWriteBatchå¯¹è±¡wbï¼Œç„¶åä½¿ç”¨defer wb.Cancel()ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå–æ¶ˆæ‰¹å¤„ç†æ“ä½œã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨wb.Delete(key)æ¥åˆ é™¤æŒ‡å®šçš„é”®ï¼Œå¹¶è¿”å›é”™è¯¯ä¿¡æ¯ã€‚ è¯·æ³¨æ„ï¼Œè¿™æ®µä»£ç ä¸­çš„badgerDBæ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„å˜é‡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„BadgerDBå®ä¾‹ã€‚ æŸ¥è¯¢æ“ä½œéå†keyå’Œvalueè¦è¿­ä»£é”®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Iteratorï¼Œå¯ä»¥ä½¿ç”¨ Txn.NewIterator()æ–¹æ³•è·å¾—ã€‚è¿­ä»£ä»¥æŒ‰å­—èŠ‚æ’åºçš„å­—å…¸é¡ºåºå‘ç”Ÿã€‚ 12345678910111213141516171819202122232425func IteratorKeysAndValues()&#123; err := badgerDB.View(func(txn *badger.Txn) error &#123; opts := badger.DefaultIteratorOptions opts.PrefetchSize = 10 it := txn.NewIterator(opts) defer it.Close() for it.Rewind(); it.Valid(); it.Next() &#123; item := it.Item() k := item.Key() err := item.Value(func(v []byte) error &#123; fmt.Printf(&quot;key=%s, value=%s\\n&quot;, k, v) return nil &#125;) if err != nil &#123; return err &#125; &#125; return nil &#125;) if err != nil &#123; log.Println(&quot;Failed to iterator keys and values from the cache.&quot;,&quot;error&quot;, err) &#125;&#125; åä¸ºIteratorKeysAndValuesã€‚å®ƒçš„ä½œç”¨æ˜¯éå†BadgerDBæ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œå¹¶æ‰“å°å‡ºæ¯ä¸ªé”®å’Œå¯¹åº”çš„å€¼ã€‚ å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†badgerDB.Viewæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªäº‹åŠ¡è§†å›¾ï¼Œç„¶åä½¿ç”¨txn.NewIteratoræ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡itã€‚é€šè¿‡è®¾ç½®è¿­ä»£å™¨çš„é€‰é¡¹optsï¼Œå¯ä»¥æŒ‡å®šé¢„å–å¤§å°ä¸º10ã€‚ æ¥ä¸‹æ¥ï¼Œå‡½æ•°ä½¿ç”¨it.Rewind()å°†è¿­ä»£å™¨é‡ç½®åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åä½¿ç”¨it.Valid()åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæœ‰ï¼Œå°±ä½¿ç”¨it.Next()ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå‡½æ•°ä½¿ç”¨it.Item()è·å–å½“å‰å…ƒç´ çš„é”®å€¼å¯¹ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡itemä¸­ã€‚ ç„¶åï¼Œå‡½æ•°ä½¿ç”¨item.Key()è·å–é”®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡kä¸­ã€‚æ¥ç€ï¼Œå‡½æ•°ä½¿ç”¨item.Value()è·å–å€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚åœ¨è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­ï¼Œä½¿ç”¨fmt.Printfæ‰“å°å‡ºé”®å’Œå€¼ã€‚ å¦‚æœåœ¨è·å–å€¼çš„è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šè¿”å›è¯¥é”™è¯¯ã€‚å¦‚æœè¿­ä»£å®Œæˆï¼Œå‡½æ•°ä¼šè¿”å›nilã€‚ æœ€åï¼Œå‡½æ•°ä½¿ç”¨log.Printlnè®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œå¦‚æœè¿­ä»£è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¾“å‡ºâ€Failed to iterator keys and values from the cache.â€ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚ éå†keysBadger æ”¯æŒä¸€ç§ç‹¬ç‰¹çš„è¿­ä»£æ¨¡å¼ï¼Œç§°ä¸ºkey-onlyè¿­ä»£ã€‚å®ƒæ¯”å¸¸è§„è¿­ä»£å¿«å‡ ä¸ªæ•°é‡çº§ï¼Œå› ä¸ºå®ƒåªæ¶‰åŠå¯¹ LSM æ ‘çš„è®¿é—®ï¼Œå®ƒé€šå¸¸å®Œå…¨é©»ç•™åœ¨ RAM ä¸­ã€‚è¦å¯ç”¨ä»…é”®è¿­ä»£ï¼Œæ‚¨éœ€è¦å°†è¯¥IteratorOptions.PrefetchValues å­—æ®µè®¾ç½®ä¸ºfalse. è¿™ä¹Ÿå¯ç”¨äºåœ¨è¿­ä»£æœŸé—´å¯¹é€‰å®šé”®è¿›è¡Œç¨€ç–è¯»å–ï¼Œitem.Value()ä»…åœ¨éœ€è¦æ—¶è°ƒç”¨ã€‚ 123456789101112131415161718func IteratorKeys()&#123; err := badgerDB.View(func(txn *badger.Txn) error &#123; opts := badger.DefaultIteratorOptions opts.PrefetchValues = false it := txn.NewIterator(opts) defer it.Close() for it.Rewind(); it.Valid(); it.Next() &#123; item := it.Item() k := item.Key() fmt.Printf(&quot;key=%s\\n&quot;, k) &#125; return nil &#125;) if err != nil &#123; log.Println(&quot;Failed to iterator keys from the cache.&quot;,&quot;error&quot;, err) &#125;&#125; è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåä¸ºIteratorKeysçš„å‡½æ•°ï¼Œå®ƒç”¨äºéå†BadgerDBæ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®ã€‚å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†badgerDB.Viewæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªäº‹åŠ¡è§†å›¾ï¼Œç„¶åä½¿ç”¨txn.NewIteratoræ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡itã€‚é€šè¿‡è®¾ç½®è¿­ä»£å™¨çš„é€‰é¡¹optsï¼Œå¯ä»¥æŒ‡å®šé¢„å–å€¼ï¼ˆPrefetchValuesï¼‰ä¸ºfalseã€‚ åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ä½¿ç”¨it.Rewind()å°†è¿­ä»£å™¨é‡ç½®åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åä½¿ç”¨it.Valid()åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæœ‰ï¼Œå°±ä½¿ç”¨it.Next()ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå‡½æ•°ä½¿ç”¨it.Item()è·å–å½“å‰å…ƒç´ çš„é”®å€¼å¯¹ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡itemä¸­ã€‚ç„¶åï¼Œä½¿ç”¨item.Key()è·å–é”®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡kä¸­ã€‚æœ€åï¼Œä½¿ç”¨fmt.Printfæ‰“å°å‡ºé”®ã€‚ å¦‚æœè¿­ä»£è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šè¿”å›è¯¥é”™è¯¯ã€‚å¦‚æœè¿­ä»£å®Œæˆï¼Œå‡½æ•°ä¼šè¿”å›nilã€‚ å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå‡½æ•°ä¼šä½¿ç”¨log.Printlnè®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºâ€Failed to iterator keys from the cache.â€ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚ å‰ç¼€æ‰«æè¦éå†ä¸€ä¸ªé”®å‰ç¼€ï¼Œæ‚¨å¯ä»¥ç»„åˆSeek()and ValidForPrefix()ï¼š 12345678910111213141516171819202122func SeekWithPrefix(prefixStr string)&#123; err := badgerDB.View(func(txn *badger.Txn) error &#123; it := txn.NewIterator(badger.DefaultIteratorOptions) defer it.Close() prefix := []byte(prefixStr) for it.Seek(prefix); it.ValidForPrefix(prefix); it.Next() &#123; item := it.Item() k := item.Key() err := item.Value(func(v []byte) error &#123; fmt.Printf(&quot;key=%s, value=%s\\n&quot;, k, v) return nil &#125;) if err != nil &#123; return err &#125; &#125; return nil &#125;) if err != nil &#123; log.Println(&quot;Failed to seek prefix from the cache.&quot;, &quot;prefix&quot;, prefixStr,&quot;error&quot;, err) &#125;&#125; è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåä¸ºSeekWithPrefixçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°prefixStrã€‚è¯¥å‡½æ•°ä½¿ç”¨BadgerDBæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå¹¶éå†æ‰€æœ‰ä»¥ç»™å®šå‰ç¼€å¼€å¤´çš„é”®å€¼å¯¹ã€‚ å‡½æ•°å†…éƒ¨é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡itï¼Œç„¶åä½¿ç”¨txn.NewIterator(badger.DefaultIteratorOptions)æ–¹æ³•åˆå§‹åŒ–è¿­ä»£å™¨ã€‚æ¥ä¸‹æ¥ï¼Œå°†prefixStrè½¬æ¢ä¸ºå­—èŠ‚åˆ‡ç‰‡prefixï¼Œå¹¶ä½¿ç”¨it.Seek(prefix)æ–¹æ³•ä»ç¬¬ä¸€ä¸ªåŒ¹é…çš„å‰ç¼€å¼€å§‹éå†ã€‚ åœ¨å¾ªç¯ä¸­ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šæ£€æŸ¥å½“å‰é¡¹æ˜¯å¦ä»ç„¶å…·æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨it.ValidForPrefix(prefix)å®ç°çš„ã€‚å¦‚æœå½“å‰é¡¹ä»ç„¶å…·æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œåˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä»£ç ã€‚ åœ¨å¾ªç¯ä½“ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰é¡¹çš„é”®å’Œå€¼ï¼Œåˆ†åˆ«å­˜å‚¨åœ¨å˜é‡kå’Œvä¸­ã€‚ç„¶åï¼Œä½¿ç”¨item.Value()æ–¹æ³•è·å–å€¼ï¼Œå¹¶å°†å…¶æ‰“å°å‡ºæ¥ã€‚æœ€åï¼Œè¿”å›nilè¡¨ç¤ºæˆåŠŸå¤„ç†äº†å½“å‰é¡¹ã€‚ å¦‚æœåœ¨å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šç«‹å³è¿”å›é”™è¯¯ä¿¡æ¯ã€‚å¦åˆ™ï¼Œåœ¨å¾ªç¯ç»“æŸåè¿”å›nilè¡¨ç¤ºæˆåŠŸå®Œæˆéå†ã€‚ å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°ä»»ä½•é”™è¯¯ï¼Œå‡½æ•°ä¼šä½¿ç”¨log.Println()è®°å½•æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‰ç¼€å­—ç¬¦ä¸²ã€é”™è¯¯ä¿¡æ¯ç­‰ã€‚","categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]},{"title":"UTXOä»£ç çš„åŠ å…¥","slug":"fileUTXOä»£ç çš„åŠ å…¥","date":"2023-12-03T05:28:37.000Z","updated":"2023-12-13T12:59:11.245Z","comments":true,"path":"2023/12/03/fileUTXOä»£ç çš„åŠ å…¥/","link":"","permalink":"http://example.com/2023/12/03/fileUTXO%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8A%A0%E5%85%A5/","excerpt":"","text":"äº¤æ˜“ä¿¡æ¯ä¸UTXOæ¨¡å‹åŒºå—é“¾ä¸­çš„è´§å¸å­˜å‚¨æ˜¯è®°å½•äº¤æ˜“çš„è¿‡ç¨‹ï¼Œè€Œéè®°å½•æœ€ç»ˆçš„è´§å¸æ•°é‡ã€‚å¹³æ—¶ä½¿ç”¨æ”¯ä»˜å®å’Œå¾®ä¿¡æ”¯ä»˜æ—¶ï¼Œè´§å¸çš„å­˜å‚¨åœ¨ä¸­å¤®ï¼Œæ‰€ä»¥è°ƒç”¨å’Œæ›´æ”¹å¾ˆå®¹æ˜“ï¼Œåœ¨ç¡®ä¿ä¸­å¿ƒè¯šå®å¯ä¿¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„è´§å¸æ‰æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ä¸€æ—¦å®ƒè¢«æ”»ç ´æˆ–è€…æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆäº¤æ˜“å°±ä¼šè¢«ç»ˆæ­¢ï¼Œæˆ‘ä»¬çš„è´§å¸ä¹Ÿå¤„åœ¨ä¸€ç§ä¸å®‰å…¨çš„çŠ¶æ€ã€‚uxtoè®°å½•çš„äº¤æ˜“è¿‡ç¨‹æ‹¥æœ‰ä¸€ä¸ªå­˜åœ¨è¾“å…¥å’Œè¾“å‡ºçš„è´¦æœ¬ï¼Œå‰©ä½™çš„è´§å¸åˆ™ä¼šåœ¨åˆ›å»ºä¸€ä¸ªè¾“å‡ºåˆ°è‡ªå·±çš„è¿‡ç¨‹ã€‚ é¦–å…ˆåˆ›å»ºäº¤æ˜“ä¿¡æ¯çš„ä¸¤éƒ¨åˆ†ï¼Œinputå’Œoutputã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªtransactionæ–‡ä»¶å¤¹ï¼Œç”¨äºåˆ†ç±»ï¼Œè£…æˆ‘ä»¬è¦ç”¨çš„äº¤æ˜“å†…å®¹ä¸€ç±»ã€‚ é¦–å…ˆåˆ›å»ºinoutput.goåˆ›å»ºç»“æ„ä½“ä½œäº¤æ˜“è´¦æœ¬ã€‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ 123456789type TXoutput struct &#123; Value int Toaddress []byte&#125;type TXintput struct&#123; TXid []byte Outidx int Fromaddress []byte&#125; è¾“å…¥çš„æœ‰txidæ˜¯ä¸Šä¸€æ¬¡äº¤æ˜“çš„ä¿¡æ¯ï¼Œè¿˜æœ‰æœ‰å‘èµ·äººçš„åœ°å€å’Œä½äºä¸Šæ¬¡äº¤æ˜“çš„ç¬¬å‡ æ¡ã€‚è¾“å‡ºçš„æ˜¯è¾“å‡ºå¤šå°‘å¸å’Œæ¥æ”¶è€…çš„åœ°å€ã€‚ åˆ›å»ºtransaction.goï¼Œæ”¾å…¥æœ¬æ¬¡äº¤æ˜“çš„ç»“æ„ä½“ 12345type Transaction struct &#123; Id []byte Inputs []TXintput Outputs []TXoutput&#125; é¦–å­—æ¯å¤§å†™æ‰èƒ½åœ¨åˆ«çš„fileé‡Œè¾¹ç”¨è¿™äº›å‚æ•°ï¼Œä¸ç„¶æ²¡åŠæ³•å¼•ç”¨çš„ã€‚ transactioné‡Œç”±æœ¬èº«çš„å“ˆå¸Œå€¼å’Œè¾“å…¥è¾“å‡ºçš„äº¤æ˜“ã€‚inoutsåˆ™ä¼šè®°è½½ä¸Šä¸€æ¬¡äº¤æ˜“ä¸­å¯¹æœ¬idè¿›è¡Œçš„outputsã€‚txoutputåˆ™å¯ä»¥å®ç°æ‰¾é›¶ï¼Œå³å¤šå‡ºæ¥çš„å¸è¦äº¤æ˜“ç»™è‡ªå·±ã€‚ é¦–å…ˆè®¡ç®—æ¯ä¸ªtransactionçš„å“ˆå¸Œå€¼ã€‚ç„¶åè¿”å›å……å½“idã€‚ 12345678910111213func (tx *Transaction)TXhash() []byte &#123; var encoded bytes.Buffer var hash [32]byte encoder:=gob.NewEncoder(&amp;encoded) err:=encoder.Encode(tx) utils.Handle(err) hash=sha256.Sum256(encoded.Bytes()) return hash[:]&#125;func (tx* Transaction)Setid() &#123; tx.Id=tx.TXhash()&#125; var encoded bytes.Bufferåˆ›å»ºä¸€ä¸ªå­—èŠ‚ç¼“å†²åŒºï¼Œç”¨äºäº‹åçš„ç¼–ç å’Œå“ˆå¸Œå€¼çš„è®¡ç®—ã€‚è€Œhandleæˆ‘ä»¬ä¹‹å‰å·²ç»è¯´è¿‡äº†ï¼Œæ˜¯å¤„ç†é”™è¯¯çš„å‡½æ•° ç¬¬äºŒæ­¥setidå°†è®¡ç®—å¥½çš„å“ˆå¸Œå€¼è¿”å›ç»™ç»“æ„ä½“ã€‚ ä¹‹å‰åˆ›å»ºäº†åˆå§‹åŒºå—ï¼Œç°åœ¨ä¸°å¯Œä¸€ä¸‹åˆå§‹åŒºå—çš„äº¤æ˜“ä¿¡æ¯ä½œä¸ºå†…å®¹ï¼Œä¹‹å‰çš„dateå¾—æ·˜æ±°äº†ã€‚ 123456789func BaseTX (toaddress []byte) *Transaction &#123; txin:=TXintput&#123;[]byte&#123;&#125;,-1,[]byte&#123;&#125;&#125; txout:=TXoutput&#123;constcoe.Initcoin,toaddress&#125; tx:=Transaction&#123;[]byte(&quot;god&quot;),[]TXintput&#123;txin&#125;,[]TXoutput&#123;txout&#125;&#125; return &amp;tx&#125;func (tx *Transaction )Isbase() bool&#123; return len(tx.Inputs)==1 &amp;&amp; tx.Inputs[0].Outidx==-1 åˆ›å»ºä¸€ä¸ªbasetxçš„å‡½æ•°ï¼Œè¾“å…¥ç¬¬ä¸€ç¬”äº¤æ˜“è¦ç»™çš„åœ°å€ï¼Œå› ä¸ºç¬¬ä¸€ç¬”äº¤æ˜“ä¹‹å‰æ²¡æœ‰äº¤æ˜“ï¼Œæ‰€ä»¥-1è¡¨ç¤ºã€‚constcoeåˆ™æ˜¯æˆ‘ä»¬å®šä¹‰çš„å¸¸é‡ç”¨ä½œæˆ‘ä»¬åˆ›å»ºæ—¶çš„æ€»çš„æ¯”ç‰¹å¸æ•°ç›®ï¼Œæˆ‘ä»¬è½¬åˆ°ä¹‹å‰å°±åˆ›å»ºçš„constcoe.goä¸­è®¾ç½®ã€‚ 12const Difficulty = 10const Initcoin=500 isbaseåˆ™åˆ¤æ–­æ˜¯å¦æ˜¯åˆå§‹äº¤æ˜“ï¼Œç”¨ä½œä¹‹åçš„è®¡ç®—utxoçš„è¾…åŠ©ã€‚åªç”¨åˆ¤æ–­é•¿åº¦æ˜¯ä¸æ˜¯1ï¼Œå’Œå†…å®¹çš„outidxæ˜¯ä¸æ˜¯-1å°±å¥½äº†ã€‚ æˆ‘ä»¬ä¸Šè¾¹è®¾ç½®äº†ç¬¬ä¸€ç¬”äº¤æ˜“çš„å†…å®¹ï¼Œidæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æƒã€‚ 123456func (in *TXintput)Fromaddressright(address []byte) bool&#123; return bytes.Equal(in.Fromaddress,address)&#125;func (out *TXoutput)Toaddressright(address []byte) bool&#123;return bytes.Equal(out.Toaddress,address)&#125; è½¬åˆ°inoutput.goåˆ›å»ºä¸Šè¾¹çš„ä¿©ä¸ªå‡½æ•°ï¼Œä»¥åè®¡ç®—utxoæ—¶èƒ½èµ·åˆ°è¾…åŠ©ä½œç”¨ã€‚ ç°åœ¨ä»£ç å†™å®Œäº†ï¼Œé‡æ„ä¸€ä¸‹ä¹‹å‰çš„å†…å®¹ã€‚é¦–å…ˆæ˜¯ç»“æ„ä½“blockã€‚ 12345678type Block struct &#123; Timestamp int64 Hash []byte PrevHash []byte Target []byte Nonce int64 transactions []*transaaction.Transaction&#125; åœ¨è¿”å›åŒºå—å“ˆå¸Œçš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¤„ç†äº¤æ˜“ä¿¡æ¯ï¼Œè®©å®ƒæˆä¸ºä¸€ä¸ªåºåˆ—ã€‚ 12345678910111213func (b *Block)Backtrasactionsummary() []byte &#123; txids:=make([][]byte,0) for _,tx:=range b.transactions&#123; txids=append(txids,tx.Id) &#125; summary:=bytes.Join(txids,[]byte&#123;&#125;) return summary&#125;func (b *Block) SetHash() &#123; information := bytes.Join([][]byte&#123;utils.ToHexInt(b.Timestamp), b.PrevHash, b.Target,utils.ToHexInt(b.Nonce),b.Backtrasactionsummary()&#125;, []byte&#123;&#125;) hash := sha256.Sum256(information) b.Hash = hash[:]&#125; å†…å®¹å°±æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªç©ºåˆ‡ç‰‡ç”¨æ¥è£…é›†åˆèµ·æ¥çš„äº¤æ˜“æ•°æ®ï¼Œéå†æ•´ä¸ªäº¤æ˜“æ•°æ®ï¼Œå°†è¾“å…¥è¾“å‡ºçš„å“ˆå¸Œå€¼ä¹Ÿå°±æ˜¯idé›†åˆèµ·æ¥è¿›è¡Œå“ˆå¸Œå€¼çš„è®¡ç®—ã€‚ ç”¨åˆ°çš„appendå‡½æ•°å’Œjoinå‡½æ•°éƒ½ä¸åˆ‡ç‰‡çš„æ“ä½œæœ‰å…³ç³»ï¼Œappendå‡½æ•°å¦‚æœåŸå§‹åˆ‡ç‰‡æœ‰è¶³å¤Ÿçš„å®¹é‡ï¼Œæ–°å…ƒç´ ä¼šè¢«æ·»åŠ åˆ°åŸåˆ‡ç‰‡çš„åé¢ï¼›å¦‚æœæ²¡æœ‰è¶³å¤Ÿå®¹é‡ï¼Œåˆ™ä¼šé‡æ–°åˆ†é…å†…å­˜å¹¶æ‹·è´åŸæœ‰å…ƒç´ å’Œæ–°å…ƒç´ ã€‚æ­¤å¤–ï¼Œappendå‡½æ•°è¿˜å¯ä»¥ç”¨äºåˆå¹¶å¤šä¸ªæ•°ç»„æˆ–åˆ‡ç‰‡ã€‚å®ƒæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œæ— éœ€å¼•å…¥ä»»ä½•åŒ…å³å¯ä½¿ç”¨ã€‚joinå‡½æ•°ä¸æ˜¯Goè¯­è¨€çš„æ ‡å‡†åº“å‡½æ•°ï¼Œå› æ­¤å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯æ¥å®ç°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œjoinå¯èƒ½ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…¶ä»–ç±»å‹çš„å…ƒç´ è¿æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²æˆ–å…ƒç´ ã€‚ åœ¨è¿™é‡Œçš„appendè¾“å‡ºåˆ‡ç‰‡æ²¡åŠæ³•å‹‡æ€»å“ˆå¸Œå€¼è®¡ç®—ï¼Œæ‰€ä»¥ç”¨bytes.joinè½¬ä¸ºå­—èŠ‚åˆ‡ç‰‡å†è¾“å‡ºã€‚ ç„¶åä¿®æ”¹CreateBlockä¸GenesisBlockä¸¤ä¸ªå‡½æ•°ã€‚ 123456789101112func CreateBlock(prevhash []byte, txs []*transaaction.Transaction) *Block &#123; block := Block&#123;time.Now().Unix(), []byte&#123;&#125;, prevhash, []byte&#123;&#125;, 0, txs&#125; block.Target = block.GetTarget() block.Nonce=block.FindNonce() block.SetHash() return &amp;block&#125;func GenesisBlock() *Block &#123;tx:=transaaction.BaseTX([]byte(&quot;yangyan&quot;)) return CreateBlock([]byte&#123;&#125;, []*transaaction.Transaction&#123;tx&#125;)&#125; æˆ‘ä»¬åœ¨åˆ›å»ºåˆ›ä¸–åŒºå—çš„åŒæ—¶ä¸€å¹¶åˆ›å»ºäº†åˆå§‹äº¤æ˜“ä¿¡æ¯ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰çš„å¸éƒ½è½¬äº†ã€‚ ç°åœ¨è½¬åˆ°proofofwork.goä¿®æ”¹getbse4nonceå‡½æ•°ã€‚ å‡½æ•°ç”¨ä½œåˆæˆå¸¦éšæœºæ•°çš„æ•°æ®ã€‚ 123456789101112func (b *Block) GetBase4Nonce(nonce int64) []byte &#123; data := bytes.Join([][]byte&#123; utils.ToHexInt(b.Timestamp), b.PrevHash, utils.ToHexInt(int64(nonce)), b.Target, b.Backtrasactionsummary(), &#125;, []byte&#123;&#125;, ) return data&#125; ä¿®æ”¹AddBlockä¸CreateBlockChainä¸¤ä¸ªå‡½æ•°ã€‚ 12345678910func (bc *BlockChain) AddBlock(txs []*transaaction.Transaction) &#123; newBlock := CreateBlock(bc.Blocks[len(bc.Blocks)-1].Hash, txs) bc.Blocks = append(bc.Blocks, newBlock)&#125;func CreateBlockChain() *BlockChain &#123; blockchain := BlockChain&#123;&#125; blockchain.Blocks = append(blockchain.Blocks, GenesisBlock()) return &amp;blockchain&#125; æ¥ä¸‹æ¥å¦‚æœåˆ›å»ºcreatetransactionè¿™æ ·çš„å‡½æ•°ï¼Œåˆ›å»ºäº¤æ˜“ä¿¡æ¯é‡ç‚¹å°±åœ¨äºæ‰¾åˆ°è¶³å¤Ÿçš„å‰ç½®äº¤æ˜“ä¿¡æ¯æ¥æ”¯æ’‘æœ¬æ¬¡äº¤æ˜“ã€‚ 12345678910111213141516171819202122232425262728293031323334func (bc *BlockChain)Findunspentransactions(address []byte)[]transaaction.Transaction &#123;var unspenttxs []transaaction.Transaction spenttxs:=make(map[string][]int) for idx:=len(bc.Blocks)-1;idx&gt;=0;idx-- &#123; block:=bc.Blocks[idx] for _,tx:=range block.transactions&#123; txid:=hex.EncodeToString(tx.Id) interoutputs: for outidx,out:=range tx.Outputs&#123; if spenttxs[txid]!=nil &#123; for _,spentout:=range spenttxs[txid]&#123; if spentout == outidx&#123; continue interoutputs &#125; &#125; &#125; if out.Toaddressright(address)&#123; unspenttxs=append(unspenttxs,*tx) &#125; &#125; if !tx.Isbase() &#123; for _,in:=range tx.Inputs&#123; if in.Fromaddressright(address)&#123; intxid:=hex.EncodeToString(in.TXid) spenttxs[intxid]=append(spenttxs[intxid],in.Outidx) &#125; &#125; &#125; &#125; &#125;return unspenttxs&#125; è¿™æ®µä»£ç è§£è¯»å°±æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ²¡æœ‰èŠ±è´¹çš„ç»“æ„ä½“é›†åˆå’Œä¸€ä¸ªç”¨äºè£…å·²ç»èŠ±è´¹çš„æ˜ å°„ï¼Œæ˜ å°„é‡Œæ˜¯idæ˜ å°„å‰ç½®ç¬¬å‡ æ¯”äº¤æ˜“ã€‚è¿›è¡ŒåŒºå—çš„å€’å¾ªç¯ï¼Œéå†æ²¡ä¸€ä¸ªåŒºå—çš„idã€‚ç„¶åéå†è¾“å‡ºçš„åœ°å€åœ¨æ˜ å°„é‡Œæ˜¯ä¸æ˜¯èƒ½æ‰¾å¾—åˆ°ï¼Œæ‰¾å¾—åˆ°çš„è¯åˆ‡ç‰‡é‡Œä¹Ÿå¯¹çš„ä¸Šä¹Ÿæ˜¯å‰ç½®äº¤æ˜“çš„ç¬¬å‡ æ¯”äº¤æ˜“ï¼Œé‚£ä¹ˆå°±æ˜¯å·²ç»èŠ±è´¹å¹¶ä¸”å·²ç»è®°å½•çš„äº¤æ˜“ã€‚å¦‚æœä¸ä¸€æ ·é‚£ä¹ˆçœ‹æ˜¯ä¸æ˜¯è¾“å…¥åˆ°è¿™ä¸ªåœ°å€ï¼Œå¦‚æœæ˜¯é‚£å°±æ˜¯æ²¡è¢«èŠ±è´¹çš„ã€‚åˆ¤æ–­æ˜¯å¦æ˜¯åˆå§‹äº¤æ˜“å¦‚æœä¸æ˜¯å³éå†å‰ç½®äº¤æ˜“ï¼Œå¦‚æœæ˜¯å¯¹åº”çš„åœ°å€å°±ä»£è¡¨å·²ç»èŠ±è´¹ï¼Œåˆ™è®¡å…¥æ˜ å°„å’Œæ¥è‡ªå‰ç½®äº¤æ˜“ç¬¬å‡ æ¯”äº¤æ˜“ã€‚ æœ‰ç‚¹ä¹±ï¼Œç†è§£ä¸€ä¸‹å°±æ‡‚äº† åˆ©ç”¨findunspenttransactionså‡½æ•°è¿”å›çš„æ²¡æ¶ˆè´¹çš„äº¤æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸ªåœ°å€çš„æ‰€æœ‰uxtoã€‚ 123456789101112131415161718func (bc *BlockChain) FindUTXOs(address []byte) (int, map[string]int) &#123; unspentOuts := make(map[string]int) unspentTxs := bc.Findunspentransactions(address) accumulated := 0Work: for _, tx := range unspentTxs &#123; txID := hex.EncodeToString(tx.Id) for outIdx, out := range tx.Outputs &#123; if out.Toaddressright(address) &#123; accumulated += out.Value unspentOuts[txID] = outIdx//å¦‚æœä¸€ç¬”äº¤æ˜“æœ‰å¥½å¤šæ¬¡è½¬å‘è¿™ä¸ªåœ°å€çš„äº¤æ˜“ï¼Œåªä¼šè®°å½•æœ€åä¸€ç¬”çš„outidx continue Work &#125; &#125; &#125; return accumulated, unspentOuts&#125; éå†æ²¡æœ‰èŠ±è´¹çš„äº¤æ˜“é‡Œè¾¹çš„outputsï¼Œéå†ä¸€ä¸‹æŠŠvalueæ±‡æ€»ä¸€ä¸‹ï¼Œåœ°å€æ·»åŠ åˆ°ç´¢å¼•é‡Œã€‚æ¯ä¸ªäº¤æ˜“åªèƒ½æœ‰ä¸€ä¸ªè¾“å‡ºè·Ÿç»™å®šçš„åœ°å€ç›¸å…³è”ã€‚ 123456789101112131415161718192021func (bc *BlockChain)Findspendableoutputs(address []byte,amount int)(int,map[string]int) &#123; unspentouts := make(map[string]int) unspenttxs := bc.Findunspentransactions(address) accumulated:=0 work: for _,tx:=range unspenttxs&#123; txid:=hex.EncodeToString(tx.Id) for outidx,out:=range tx.Outputs&#123; if out.Toaddressright(address)&amp;&amp;accumulated&lt;amount&#123; accumulated+=out.Value unspentouts[txid]=outidx if accumulated&gt;=amount&#123;break work &#125; continue work &#125; &#125; &#125; return accumulated,unspentouts åªéœ€è¦æ‰¾åˆ°èµ„äº§æ€»é‡å¤§äºæœ¬æ¬¡äº¤æ˜“è½¬è´¦çš„ä¸€éƒ¨åˆ†utxoå°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦æ¯ä¸€ç¬”éƒ½è®¡ç®—åœ¨å†…ã€‚ 1234567891011121314151617181920212223func (bc *BlockChain)Creatransaction(from,to []byte,amount int)(*transaaction.Transaction,bool) &#123; var inputs []transaaction.TXintput var outputs []transaaction.TXoutput acc,validoutputs:=bc.Findspendableoutputs(from,amount) if acc&lt;amount&#123; fmt.Println(&quot;ä¸å¤Ÿ&quot;) return &amp;transaaction.Transaction&#123;&#125;,false &#125; for txid,outidx:=range validoutputs &#123; txid,err:=hex.DecodeString(txid) utils.Handle(err) intput:=transaaction.TXintput&#123;txid,outidx,from&#125; inputs=append(inputs,intput) &#125; outputs = append(outputs, transaaction.TXoutput&#123;amount, to&#125;) if acc &gt; amount &#123; outputs = append(outputs, transaaction.TXoutput&#123;acc - amount, from&#125;) &#125; tx := transaaction.Transaction&#123;nil, inputs, outputs&#125; tx.Setid() return &amp;tx, true&#125; è¿™ä¸€æ®µå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œå…ˆå°äºå†ç­‰äºå†å¤§äºï¼Œå°äºå°±æŠ¥é”™è¿”å›ä¸å¤Ÿï¼Œç­‰äºå°±ç›´æ¥è¾“å‡ºï¼Œå¤§äºå°±åœ¨ç­‰äºçš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ç¬”å°†å‰©ä½™å¸è¿”å›ç»™è‡ªå·±çš„ç¨‹åºã€‚ 123func (bc *BlockChain)Mine(txs []*transaaction.Transaction) &#123; bc.AddBlock(txs)&#125; è¿™æ®µå‡½æ•°æ¨¡æ‹ŸçŸ¿å·¥çš„æ‰“åŒ…è¿‡ç¨‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879func main() &#123; txPool := make([]*transaaction.Transaction, 0) var tempTx *transaaction.Transaction var ok bool var property int chain := blockchain.CreateBlockChain() property, _ = chain.FindUTXOs([]byte(&quot;yangyan&quot;)) fmt.Println(&quot;Balance of yangyan: &quot;, property) tempTx, ok = chain.Creatransaction([]byte(&quot;yangyan&quot;), []byte(&quot;K&quot;), 100) if ok &#123; txPool = append(txPool, tempTx) &#125; chain.Mine(txPool) txPool = make([]*transaaction.Transaction, 0) property, _ = chain.FindUTXOs([]byte(&quot;Leo Cao&quot;)) fmt.Println(&quot;Balance of yangyan: &quot;, property) tempTx, ok = chain.Creatransaction([]byte(&quot;K&quot;), []byte(&quot;E&quot;), 200) // this transaction is invalid if ok &#123; txPool = append(txPool, tempTx) &#125; tempTx, ok = chain.Creatransaction([]byte(&quot;K&quot;), []byte(&quot;E&quot;), 50) if ok &#123; txPool = append(txPool, tempTx) &#125; tempTx, ok = chain.Creatransaction([]byte(&quot;yangyan&quot;), []byte(&quot;E&quot;), 100) if ok &#123; txPool = append(txPool, tempTx) &#125; chain.Mine(txPool) txPool = make([]*transaaction.Transaction, 0) property, _ = chain.FindUTXOs([]byte(&quot;yangyan&quot;)) fmt.Println(&quot;Balance of Leo Cao: &quot;, property) property, _ = chain.FindUTXOs([]byte(&quot;K&quot;)) fmt.Println(&quot;Balance of Krad: &quot;, property) property, _ = chain.FindUTXOs([]byte(&quot;E&quot;)) fmt.Println(&quot;Balance of Exia: &quot;, property) for _, block := range chain.Blocks &#123; fmt.Printf(&quot;Timestamp: %d\\n&quot;, block.Timestamp) fmt.Printf(&quot;hash: %x\\n&quot;, block.Hash) fmt.Printf(&quot;Previous hash: %x\\n&quot;, block.PrevHash) fmt.Printf(&quot;nonce: %d\\n&quot;, block.Nonce) fmt.Println(&quot;Proof of Work validation:&quot;, block.ValidatePoW()) &#125; //å±•ç¤ºä¸€ä¸‹åŒèŠ±é—®é¢˜ tempTx, ok = chain.Creatransaction([]byte(&quot;Krad&quot;), []byte(&quot;E&quot;), 30) if ok &#123; txPool = append(txPool, tempTx) &#125; tempTx, ok = chain.Creatransaction([]byte(&quot;Krad&quot;), []byte(&quot;yangyan&quot;), 30) if ok &#123; txPool = append(txPool, tempTx) &#125; chain.Mine(txPool) txPool = make([]*transaaction.Transaction, 0) for _, block := range chain.Blocks &#123; fmt.Printf(&quot;Timestamp: %d\\n&quot;, block.Timestamp) fmt.Printf(&quot;hash: %x\\n&quot;, block.Hash) fmt.Printf(&quot;Previous hash: %x\\n&quot;, block.PrevHash) fmt.Printf(&quot;nonce: %d\\n&quot;, block.Nonce) fmt.Println(&quot;Proof of Work validation:&quot;, block.ValidatePoW()) &#125; property, _ = chain.FindUTXOs([]byte(&quot;yangyan&quot;)) fmt.Println(&quot;Balance of Leo Cao: &quot;, property) property, _ = chain.FindUTXOs([]byte(&quot;K&quot;)) fmt.Println(&quot;Balance of Krad: &quot;, property) property, _ = chain.FindUTXOs([]byte(&quot;E&quot;)) fmt.Println(&quot;Balance of Exia: &quot;, property)&#125; è¿™æ˜¯è°ƒè¯•çš„è¿‡ç¨‹ åˆ›å»ºä¸€ä¸ªç©ºçš„äº¤æ˜“æ± ï¼ˆtxPoolï¼‰å’Œä¸€ä¸ªä¸´æ—¶äº¤æ˜“å˜é‡ï¼ˆtempTxï¼‰ã€‚ åˆ›å»ºä¸€ä¸ªåŒºå—é“¾å®ä¾‹ï¼ˆchainï¼‰ã€‚ æŸ¥æ‰¾åä¸ºâ€yangyanâ€çš„åœ°å€çš„UTXOsï¼ˆæœªä½¿ç”¨çš„äº¤æ˜“è¾“å‡ºï¼‰ï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªä»â€yangyanâ€åˆ°â€Kâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º100ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚ æ¸…ç©ºäº¤æ˜“æ± ï¼Œå†æ¬¡æŸ¥æ‰¾â€Lâ€çš„åœ°å€çš„UTXOsï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªæ— æ•ˆçš„äº¤æ˜“ï¼Œä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º200ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„äº¤æ˜“ï¼Œä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º50ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„äº¤æ˜“ï¼Œä»â€yangyanâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º100ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚ æ¸…ç©ºäº¤æ˜“æ± ã€‚ éå†åŒºå—é“¾ä¸­çš„æ‰€æœ‰åŒºå—ï¼Œæ‰“å°æ¯ä¸ªåŒºå—çš„æ—¶é—´æˆ³ã€å“ˆå¸Œå€¼ã€å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€éšæœºæ•°ä»¥åŠå·¥ä½œé‡è¯æ˜éªŒè¯ç»“æœã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªä»â€Kâ€åˆ°â€Eâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º30ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å°è¯•åˆ›å»ºä¸€ä¸ªä»â€Kâ€åˆ°â€yangyanâ€çš„è½¬è´¦äº¤æ˜“ï¼Œé‡‘é¢ä¸º30ï¼Œå¦‚æœæˆåŠŸåˆ™å°†å…¶æ·»åŠ åˆ°äº¤æ˜“æ± ä¸­ã€‚ å¯¹äº¤æ˜“æ± ä¸­çš„äº¤æ˜“è¿›è¡ŒæŒ–çŸ¿æ“ä½œã€‚ æ¸…ç©ºäº¤æ˜“æ± ã€‚ éå†åŒºå—é“¾ä¸­çš„æ‰€æœ‰åŒºå—ï¼Œæ‰“å°æ¯ä¸ªåŒºå—çš„æ—¶é—´æˆ³ã€å“ˆå¸Œå€¼ã€å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€éšæœºæ•°ä»¥åŠå·¥ä½œé‡è¯æ˜éªŒè¯ç»“æœã€‚ æŸ¥æ‰¾å„ä¸ªåœ°å€çš„UTXOsï¼Œå¹¶æ‰“å°å…¶ä½™é¢ã€‚","categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"ç®€å•åŒºå—é“¾çš„powéªŒè¯æœºåˆ¶çš„æ·»åŠ ","slug":"ç®€å•åŒºå—é“¾çš„powéªŒè¯æœºåˆ¶çš„æ·»åŠ ","date":"2023-12-02T13:04:48.000Z","updated":"2023-12-06T08:13:25.561Z","comments":true,"path":"2023/12/02/ç®€å•åŒºå—é“¾çš„powéªŒè¯æœºåˆ¶çš„æ·»åŠ /","link":"","permalink":"http://example.com/2023/12/02/%E7%AE%80%E5%8D%95%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84pow%E9%AA%8C%E8%AF%81%E6%9C%BA%E5%88%B6%E7%9A%84%E6%B7%BB%E5%8A%A0/","excerpt":"","text":"powå·¥ä½œé‡è¯æ˜æœºåˆ¶å·¥ä½œé‡è¯æ˜æœºåˆ¶åŠ åˆ°åŒºå—é“¾é‡Œå°±æ˜¯æ•´ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°åœ¨çŸ¿å·¥æŒ–çŸ¿æ—¶å†³å®šäº†ä¸‹ä¸€ä¸ªåŒºå—ä¼šç»™åˆ°è°çš„æ‰‹é‡Œï¼Œéšæœºæ•°åŠ åˆ°æ•°æ®é‡Œè¾¹ç„¶åè¿›è¡Œå“ˆå¸Œå€¼çš„è®¡ç®—ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªèŒƒå›´é‡Œè¾¹ã€‚ è¿›è¡Œpowæ‰©å±•ä¹‹å‰å…ˆç»™ä»£ç è§„èŒƒä¸€ä¸‹ï¼Œåˆ›å»ºä¸€äº›æ–‡ä»¶å¤¹è¿›è¡Œä»£ç çš„ç®¡ç† å…ˆæ•´ä¸ªæ–‡ä»¶å¤¹constcoeç„¶åæ•´ä¸ªå…¨å±€å˜é‡ï¼Œç”¨æ¥è£…æŒ–çŸ¿çš„éš¾åº¦ã€‚ 1234567//constcoe.gopackage constcoeconst ( Difficulty = 12) æ•´ä¸ªå‡½æ•°åŒ…ã€‚å…ˆæ•´ä¸ªé”™è¯¯å‡½æ•°ï¼Œé”™è¯¯ç›´æ¥åœæ­¢ã€‚ 12345func Handle(err error) &#123; if err != nil &#123; log.Panic(err) &#125;&#125; æŠŠint64ä½è½¬å­—èŠ‚ä¸²å‡½æ•°ç§»åŠ¨è¿‡æ¥å’Œé‚£ä¸ªç»“æ„ä½“ä»€ä¹ˆçš„ã€‚ å€™é€‰åŒºå—åŠ å…¥åˆ°åŒºå—é“¾æ˜¯éœ€è¦powè¯æ˜çš„ï¼Œå¦‚æœä¸€ä¸ªåŒºå—å¯ä»¥æ§åˆ¶ä¸‹ä¸€ä¸ªåŒºå—æ˜¯ä¸æ˜¯è‡ªå·±çš„æ—¶å€™ï¼Œä»–å°±æœ‰äº†å¯ä»¥åŒé‡æ”¯ä»˜çš„èƒ½åŠ›ã€‚å¦‚æœç”¨äº†å·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼Œå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œé¦–å…ˆçŸ¿å·¥ä¼šç­›é€‰äº¤æ˜“ï¼Œç„¶åå› ä¸ºå­˜åœ¨éšæœºå€¼ï¼Œè°ä¹Ÿä¸èƒ½ç¡®å®šåˆ°åº•è°ä¼šè·å¾—ä¸‹ä¸€ä¸ªåŒºå—ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è§£å†³åŒèŠ±é—®é¢˜äº†ã€‚ é¦–å…ˆæˆ‘ä»¬è¦å¢åŠ ä¸€äº›åŒºå—çš„å¤´éƒ¨ä¿¡æ¯ã€‚ 12345678type Block struct &#123; Timestamp int64 Hash []byte PrevHash []byte Target []byte //This line is new Nonce int64 //This line is new Data []byte&#125; targetä½œä¸ºç»“æœå“ˆå¸Œå€¼çš„æ¯”è¾ƒéš¾åº¦ã€‚nonceä½œä¸ºè®¡ç®—å“ˆå¸Œå€¼çš„éšæœºæ•°ã€‚ åˆ›å»ºä¸€ä¸ªproofofwork.goï¼Œå†…å®¹æ”¾æˆ‘ä»¬ä¹‹å‰è¯´çš„powå…±è¯†æœºåˆ¶ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯ä»¥è¿”å›ç›®æ ‡éš¾åº¦å€¼å¾—å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰è®¾å®šçš„ä¸€ä¸ªå¸¸é‡difficultyæ¥æ„é€ ç›®æ ‡éš¾åº¦ï¼Œåœ¨å®é™…åŒºå—é“¾ä¸­ç›®æ ‡éš¾åº¦ä¹‹ä¼šæ ¹æ®ç½‘ç»œæƒ…å†µå®šæ—¶è¿›è¡Œè°ƒæ•´ã€‚ 12345func (b *Block) GetTarget() []byte &#123; target := big.NewInt(1) target.Lsh(target, uint(256-constcoe.Difficulty)) return target.Bytes()&#125; Lshå‡½æ•°å°±æ˜¯å‘å·¦ç§»ä½ï¼Œç§»çš„è¶Šå¤šç›®æ ‡éš¾åº¦å€¼è¶Šå¤§ï¼Œå“ˆå¸Œå–å€¼è½åœ¨çš„ç©ºé—´å°±æ›´å¤šä¹Ÿå°±è¶Šå®¹æ˜“æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„nonceã€‚ ä¸‹é¢çš„å‡½æ•°æ˜¯ç”¨ä½œè¾“å…¥ä¸€æ®µnonceå€¼ï¼Œè¿›è¡ŒåŒºå—çš„å“ˆå¸Œå€¼è¿ç®—ã€‚ä¸åŒçš„nonceå€¼ä¼šè¿”å›ä¸åŒçš„å“ˆå¸Œå€¼ 123456789101112func (b *Block) GetBase4Nonce(nonce int64) []byte &#123; data := bytes.Join([][]byte&#123; utils.ToHexInt(b.Timestamp), b.PrevHash, utils.ToHexInt(int64(nonce)), b.Target, b.Data, &#125;, []byte&#123;&#125;, ) return data&#125; ç°åœ¨å¯¹äºä»»æ„ä¸€ä¸ªåŒºå—ï¼Œæˆ‘ä»¬éƒ½èƒ½å»å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„nonceäº†ã€‚ 1234567891011121314151617181920func (b *Block) FindNonce() int64 &#123; var intHash big.Int var intTarget big.Int var hash [32]byte var nonce int64 nonce = 0 intTarget.SetBytes(b.Target) for nonce &lt; math.MaxInt64 &#123; data := b.GetBase4Nonce(nonce) hash = sha256.Sum256(data) intHash.SetBytes(hash[:]) if intHash.Cmp(&amp;intTarget) == -1 &#123; break &#125; else &#123; nonce++ &#125; &#125; return nonce&#125; æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°çš„å¤§å°ã€‚å¦‚æœintHash.Cmp(&amp;intTarget)è¿”å›-1ï¼Œè¡¨ç¤ºintHashå°äºintTargetã€‚ è¿™æ˜¯ä¸€ä¸ªéªŒè¯çš„å‡½æ•°ï¼Œç”¨ä½œéªŒè¯æ˜¯å¦éšæœºæ•°æ­£ç¡® 12345678910111213func (b *Block) ValidatePoW() bool &#123; var intHash big.Int var intTarget big.Int var hash [32]byte intTarget.SetBytes(b.Target) data := b.GetBase4Nonce(b.Nonce) hash = sha256.Sum256(data) intHash.SetBytes(hash[:]) if intHash.Cmp(&amp;intTarget) == -1 &#123; return true &#125; return false&#125; PoWæˆ‘ä»¬å·²ç»å®ç°äº†ã€‚å›åˆ°block.goï¼Œè°ƒæ•´ä»¥ä¸‹å‡½æ•°ã€‚ 12345678910111213func (b *Block) SetHash() &#123; information := bytes.Join([][]byte&#123;utils.ToHexInt(b.Timestamp), b.PrevHash, b.Target, utils.ToHexInt(b.Nonce), b.Data&#125;, []byte&#123;&#125;) hash := sha256.Sum256(information) b.Hash = hash[:]&#125;func CreateBlock(prevhash, data []byte) *Block &#123; block := Block&#123;time.Now().Unix(), []byte&#123;&#125;, prevhash, []byte&#123;&#125;, 0, data&#125; block.Target = block.GetTarget() block.Nonce = block.FindNonce() block.SetHash() return &amp;block&#125; ç„¶åå°±å¯ä»¥å¯åŠ¨ç³»ç»Ÿäº†ï¼Œé€šè¿‡æ›´æ”¹difficultyæ¥è°ƒæ•´éš¾åº¦ã€‚","categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€","slug":"filegoland-goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€","date":"2023-11-29T13:37:11.000Z","updated":"2023-12-06T07:51:52.480Z","comments":true,"path":"2023/11/29/filegoland-goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€/","link":"","permalink":"http://example.com/2023/11/29/filegoland-goroutine%E5%92%8Cchannel%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9F%BA%E7%A1%80/","excerpt":"","text":"goroutineå’Œchannelï¼šå¹¶å‘çš„åŸºç¡€å•¥æ˜¯å¹¶å‘å¬è¯´å¾ˆæœ‰ç‰¹ç‚¹çš„å°±æ˜¯golandçš„å¹¶å‘ï¼Œæ‰€å†™çš„ä»£ç éƒ½æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€å¥ä»£ç æ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€å¥ï¼Œè¿™æ ·çš„ä»£ç é€»è¾‘ç®€å•ï¼Œä¹Ÿç¬¦åˆæˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ã€‚ä½†è¿™æ ·æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºè®¡ç®—æœºå¾ˆå¼ºå¤§ï¼Œå¦‚æœåªè®©å®ƒå¹²å®Œä¸€ä»¶äº‹æƒ…å†å¹²å¦å¤–ä¸€ä»¶äº‹æƒ…å°±å¤ªæµªè´¹äº†ã€‚æ¯”å¦‚ä¸€æ¬¾éŸ³ä¹è½¯ä»¶ï¼Œä½¿ç”¨å®ƒå¬éŸ³ä¹çš„æ—¶å€™è¿˜æƒ³è®©å®ƒä¸‹è½½æ­Œæ›²ï¼ŒåŒä¸€æ—¶åˆ»åšäº†ä¸¤ä»¶äº‹ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œè¿™å°±æ˜¯å¹¶å‘ã€‚å¹¶å‘å¯ä»¥è®©ä½ ç¼–å†™çš„ç¨‹åºåœ¨åŒä¸€æ—¶åˆ»å¤šåšå‡ ä»¶äº‹æƒ…ã€‚ è¿›ç¨‹å’Œçº¿ç¨‹è¿›ç¨‹æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µã€‚å½“ä½ å¯åŠ¨ä¸€ä¸ªè½¯ä»¶ï¼Œæ“ä½œåŒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹æ˜¯å¦‚é˜¿å¥çš„å·¥ä½œç©ºé—´ï¼Œå®ƒåŒ…å«äº†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰èµ„æºã€‚ çº¿ç¨‹çº¿ç¨‹æ˜¯è¿›ç¨‹çš„æ‰§è¡Œç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹è¢«æ“ä½œç³»ç»Ÿè°ƒåº¦æ‰§è¡Œï¼Œä¸€äº›è®¡ç®—æœºæ¡‘å¾·è¡Œä¸ºå°±ä¼šæœ‰å¤šä¸ªçº¿ç¨‹è¢«æ“ä½œç³»ç»ŸåŒæ—¶è°ƒåº¦æ‰§è¡Œçš„æƒ…å†µï¼Œè¿™å°±æ˜¯çº¿ç¨‹çš„å¹¶å‘ã€‚ åç¨‹Goè¯­è¨€ä¸­æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µï¼Œåªæœ‰åç¨‹ï¼Œä¹Ÿç§°ä¸ºgoroutineã€‚ç›¸æ¯”çº¿ç¨‹æ¥è¯´ï¼Œåç¨‹æ›´åŠ è½»é‡ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥éšæ„å¯åŠ¨æˆåƒä¸Šä¸‡ä¸ªgoroutineã€‚ goroutineè¢«Go runtimeæ‰€è°ƒåº¦ï¼Œè¿™ä¸€ç‚¹ä¸çº¿ç¨‹ä¸ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒGoè¯­è¨€çš„å¹¶å‘æ˜¯ç”±Goè‡ªå·±è°ƒåº¦çš„ï¼Œè‡ªå·±å†³å®šåŒæ—¶æ‰§è¡Œå¤šå°‘ä¸ªgoroutineã€ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå“ªå‡ ä¸ªã€‚è¿™äº›å¯¹äºæˆ‘ä»¬å¼€å‘è€…æ¥è¯´å®Œå…¨é€æ˜ï¼Œåªéœ€è¦åœ¨ç¼–ç çš„æ—¶å€™å‘Šè¯‰Goè¯­è¨€è¦å¯åŠ¨å‡ ä¸ªgoroutineï¼Œè‡³äºå¦‚ä½•è°ƒåº¦æ‰§è¡Œï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒã€‚ å¯åŠ¨ä¸€ä¸ªgoroutineéå¸¸ç®€å•ï¼Œgoè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†goå…³é”®å­—ï¼Œç›¸æ¯”å…¶ä»–è¯­è¨€ç®€å•è®¸å¤šã€‚ 123go fmt.Println(&quot;sad&quot;)fmt.Println(&quot;qwe&quot;)time.Sleep(time.Second) è¿™æ ·å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œè°ƒç”¨fmt.printlnå‡½æ•°æ‰“å°sadã€‚æ‰€ä»¥è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªåç¨‹ï¼Œä¸€ä¸ªæ˜¯mainçš„ï¼Œä¸€ä¸ªæ˜¯goæŒ‚å‰ªå­å¯åŠ¨çš„ã€‚ è¯­æ³•å°±æ˜¯goä¹‹åè·Ÿä¸€ä¸ªæ–¹æ³•æˆ–è€…å‡½æ•°çš„è°ƒç”¨ã€‚ ä¸Šè¾¹ä»£ç çš„è¾“å‡ºæƒ…å†µæ˜¯qwe ç„¶åsadï¼Œ ç¤ºä¾‹ä¸­çš„time.Sleep(time.Second)è¡¨ç¤ºç­‰å¾…ä¸€ç§’ï¼Œè¿™é‡Œæ˜¯è®©main goroutineç­‰ä¸€ç§’ï¼Œä¸ç„¶main goroutineæ‰§è¡Œå®Œæ¯•ç¨‹åºå°±é€€å‡ºäº† æ„æ€å°±æ˜¯å¦å¤–æ‰¾ä¸ªçº¿è·¯æ‰§è¡Œæˆ‘çš„sadï¼Œæ‰€ä»¥å…ˆåé¡ºåºçœ‹æƒ…å†µå§å¯èƒ½ã€‚ ç®¡é“å¦‚æœå¾ˆå¤šä¸ªåç¨‹ï¼Œä»–ä»¬æ€ä¹ˆé€šä¿¡å‘¢ï¼Ÿè¿™å°±æ˜¯channelè¦ç»“å±€çš„é—®é¢˜ å£°æ˜ä¸€ä¸ªç®¡é“å£°æ˜ä¸€ä¸ªç®¡é“å¾ˆç®€å• 1pipe:make(chan string) chanæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè¡¨ç¤ºæ˜¯channelç±»å‹ã€‚åé¢çš„stringè¡¨ç¤ºchannelé‡Œçš„æ•°æ®æ˜¯stringã€‚é€šè¿‡channelå£°æ˜å¯ä»¥çœ‹åˆ°ï¼Œchanæ˜¯ä¸€ä¸ªé›†åˆç±»å‹ã€‚ å®šä¹‰å¥½ä¸€ä¸ªç®¡é“å°±å¯ä»¥æ“ä½œäº†ã€‚ å®ƒåªæœ‰ä¸¤ç§æ“ä½œï¼Œæ¥å—å’Œå‘é€ 1)æ¥æ”¶ï¼šè·å–chanä¸­çš„å€¼ï¼Œæ“ä½œç¬¦ä¸ºï¼œ-chanã€‚ 2)å‘é€ï¼šå‘chanå‘é€å€¼ï¼ŒæŠŠå€¼æ”¾åœ¨chanä¸­ï¼Œæ“ä½œç¬¦ä¸ºchanï¼œ-ã€‚ 12345678910func main() &#123;ch:=make(chan string)go func() &#123; fmt.Println(&quot;asd00&quot;) ch &lt;-&quot;okokok&quot;&#125;()fmt.Println(&quot;æˆ‘æ˜¯åç¨‹&quot;)v:=&lt;-chfmt.Println(&quot;æ¥å—chanä¸­çš„å€¼æ˜¯ï¼š&quot;,v)&#125; ç¨‹åºä¸ä¼šåœ¨æ–°çš„goroutineå®Œæˆä¹‹å‰é€€å‡ºäº†ï¼Œå› ä¸ºé€šè¿‡makeåˆ›å»ºçš„chanä¸­æ²¡æœ‰å€¼ï¼Œè€Œmain goroutineåˆæƒ³ä»chanä¸­è·å–å€¼ï¼Œè·å–ä¸åˆ°å°±ä¸€ç›´ç­‰å¾…ï¼Œç­‰åˆ°å¦ä¸€ä¸ªgoroutineå‘chanå‘é€å€¼ä¸ºæ­¢ã€‚ å› ä¸ºæœ€åä¸€ä¸ªprinté‡Œçš„æ˜¯æƒ³è¦æ¥å—vçš„å€¼ï¼Œä½†æ˜¯væ­¤æ—¶æ­¤åˆ»æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¸€ç›´ç­‰åˆ°å¦ä¸€ä¸ªåç¨‹ç»™vè¾“é€å€¼ã€‚ æ— ç¼“å†²ç®¡é“åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨makeåˆ›å»ºçš„chanå°±æ˜¯ä¸€ä¸ªæ— ç¼“å†²ç®¡é“ï¼Œå®ƒçš„å®¹é‡æ˜¯0ï¼Œä¸èƒ½å­˜å‚¨ä»»ä½•æ•°æ®ã€‚æ‰€ä»¥æ— ç¼“å†²ç®¡é“åªèµ·åˆ°ä¼ è¾“æ•°æ®çš„ä½œç”¨ï¼Œæ•°æ®å¹¶ä¸ä¼šåœ¨ç®¡é“ä¸­åšä»»ä½•åœç•™ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œæ— ç¼“å†²ç®¡é“çš„å‘é€å’Œæ¥æ”¶æ“ä½œæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œå®ƒä¹Ÿå¯ä»¥ç§°ä¸ºåŒæ­¥ç®¡é“ã€‚ æœ‰ç¼“å†²ç®¡é“æœ‰ç¼“å†²é€šé“æ˜¯ç±»ä¼¼äºä¸€ä¸ªå¯é˜»å¡çš„é˜Ÿåˆ—ï¼Œå†…éƒ¨çš„å…ƒç´ å…ˆè¿›å…ˆå‡ºã€‚é€šè¿‡makeç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šå®¹é‡ï¼Œè¿›è€Œåˆ›å»ºä¸€ä¸ªæœ‰ç¼“å†²çš„ç®¡é“ã€‚ 1ch:=make(chan int,5) æˆ‘åˆ›å»ºäº†ä¸€ä¸ªå®¹é‡ä¸º5çš„ç®¡é“ï¼Œå†…éƒ¨çš„å…ƒç´ ç±»å‹æ˜¯intï¼Œä¹Ÿå°±æ˜¯è¯´ç®¡é“å†…éƒ¨å­˜æ”¾5ä¸ªç±»å‹çš„intå…ƒç´ ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ ä¸€ä¸ªæœ‰ç¼“å†²ç®¡é“å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š 1)æœ‰ç¼“å†²ç®¡é“çš„å†…éƒ¨æœ‰ä¸€ä¸ªç¼“å†²é˜Ÿåˆ—ã€‚ 2)å‘é€æ“ä½œæ˜¯å‘é˜Ÿåˆ—çš„å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineæ‰§è¡Œæ¥æ”¶æ“ä½œé‡Šæ”¾é˜Ÿåˆ—çš„ç©ºé—´ã€‚ 3)æ¥æ”¶æ“ä½œæ˜¯ä»é˜Ÿåˆ—çš„å¤´éƒ¨è·å–å…ƒç´ å¹¶æŠŠå®ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineæ‰§è¡Œï¼Œå‘é€æ“ä½œæ’å…¥æ–°çš„å…ƒç´ ã€‚ ç¼“å†²ç®¡é“ç±»ä¼¼ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥è·å–ä»–çš„å®¹é‡å’Œé‡Œé¢å…ƒç´ çš„ä¸ªæ•°å’Œå®¹é‡ã€‚ 1234ch:=make(chan int,5)ch&lt;-2ch&lt;-3fmt.Println(cap(ch),len(ch)) æ— ç¼“å†²ç®¡é“å…¶å®å°±æ˜¯ä¸€ä¸ªå®¹é‡å¤§å°ä¸º0çš„ç®¡é“ã€‚æ¯”å¦‚make(chan intï¼Œ0)ã€‚ å…³é—­é€šé“1close(ch) å¦‚æœä¸€ä¸ªç®¡é“è¢«å…³é—­ï¼Œå°±ä¸èƒ½å‘é‡Œé¢å‘é€æ•°æ®äº†ï¼Œå¦‚æœå‘é€çš„è¯ï¼Œä¼šå¼•èµ·panicå¼‚å¸¸ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥æ¥æ”¶ç®¡é“é‡Œçš„æ•°æ®ï¼Œå¦‚æœç®¡é“é‡Œæ²¡æœ‰æ•°æ®çš„è¯ï¼Œæ¥æ”¶çš„æ•°æ®æ˜¯å…ƒç´ ç±»å‹çš„é›¶å€¼ã€‚ å•å‘é€šé“maybeæœ‰æ—¶å€™æˆ‘ä»¬çš„ç‰¹æ®Šéœ€æ±‚é™åˆ¶ä¸€ä¸ªç®¡é“åªèƒ½æ¥å—ä¸èƒ½å‘é€ï¼Œæˆ–è€…é™åˆ¶ä¸€ä¸ªç®¡é“åªèƒ½å‘é€ä¸èƒ½æ¥æ”¶ï¼Œå°±å«åšå•å‘ç®¡é“ 12onlysend:=make(chan&lt;- int,5)onlyreceive:=make(&lt;-chan int,5) å•å‘ç®¡é“çš„å£°æ˜ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å£°æ˜çš„æ—¶å€™å¸¦ä¸Šï¼œ-æ“ä½œç¬¦å³å¯ã€‚ 12func conter(out chan&lt;- int) &#123;&#125; å‡½æ•°ä½“å†…æ‰€ç”¨çš„å‚æ•°outæ˜¯ä¸€ä¸ªåªèƒ½å‘é€çš„ç®¡é“ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…åªèƒ½å¯¹outå‡½æ•°è¿›è¡Œå‘é€æ“ä½œï¼Œå¦‚æœæ‰§è¡Œæ¥å—æ“ä½œå°±ä¸èƒ½ç¼–è¯‘é€šè¿‡äº†ã€‚ select+channelç¤ºä¾‹å‡è®¾è¦ä»ç½‘ä¸Šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘å¯åŠ¨äº†3ä¸ªgoroutineè¿›è¡Œä¸‹è½½ï¼Œå¹¶æŠŠç»“æœå‘é€åˆ°3ä¸ªchannelï¼ˆç®¡é“ï¼‰ä¸­ã€‚å…¶ä¸­ï¼Œå“ªä¸ªå…ˆä¸‹è½½å¥½ï¼Œå°±ä¼šä½¿ç”¨å“ªä¸ªchannelçš„ç»“æœã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•è·å–ç¬¬ä¸€ä¸ªchannelçš„ç»“æœï¼Œç¨‹åºå°±ä¼šè¢«é˜»å¡ï¼Œæ— æ³•è·å–å‰©ä¸‹ä¸¤ä¸ªchannelçš„ç»“æœï¼Œä¹Ÿæ— æ³•åˆ¤æ–­å“ªä¸ªå…ˆä¸‹è½½å¥½ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å¤šè·¯å¤ç”¨æ“ä½œäº†ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œé€šè¿‡selectè¯­å¥å¯ä»¥å®ç°å¤šè·¯å¤ç”¨ 12345678910111213var urls = []string&#123;&quot;http://example.com/file1&quot;, &quot;http://example.com/file2&quot;, &quot;http://example.com/file3&quot;&#125; var resultChannels = make([]chan string, 3) for i := 0; i &lt; 3; i++ &#123; go downloadFile(urls[i], resultChannels[i]) &#125; for i := 0; i &lt; 3; i++ &#123; select &#123; case result := &lt;-resultChannels[i]: fmt.Println(&quot;Downloaded file:&quot;, result) &#125; &#125; 1 åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªdownloadFileå‡½æ•°æ¥æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½ä»»åŠ¡ï¼Œå¹¶å°†ç»“æœå‘é€åˆ°å¯¹åº”çš„é€šé“ä¸­ã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†3ä¸ªé€šé“ï¼Œå¹¶å¯åŠ¨äº†3ä¸ªgoroutineæ¥æ‰§è¡Œä¸‹è½½ä»»åŠ¡ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨selectè¯­å¥æ¥ç›‘å¬æ¯ä¸ªé€šé“ï¼Œå½“æŸä¸ªé€šé“æœ‰æ•°æ®æ—¶ï¼Œå°±ç«‹å³è·å–åˆ°ç»“æœå¹¶æ‰“å°å‡ºæ¥ã€‚","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"åˆè¯†åŒºå—é“¾-åŠ¨æ‰‹åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾","slug":"fileåˆè¯†åŒºå—é“¾-åŠ¨æ‰‹åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾","date":"2023-11-27T14:58:45.000Z","updated":"2023-12-06T07:51:24.149Z","comments":true,"path":"2023/11/27/fileåˆè¯†åŒºå—é“¾-åŠ¨æ‰‹åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾/","link":"","permalink":"http://example.com/2023/11/27/file%E5%88%9D%E8%AF%86%E5%8C%BA%E5%9D%97%E9%93%BE-%E5%8A%A8%E6%89%8B%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE/","excerpt":"","text":"å°è¯•åˆ¶ä½œä¸€ä¸ªç®€å•çš„åŒºå—é“¾å…¶å®ä¸»è¦æ˜¯å¯¹äºgoçš„åŸºç¡€è¯­æ³•åˆšåˆšå­¦å®Œæ‰€ä»¥æ‹¿æ¥ç»ƒæ‰‹ 1.ç”¨structå‡½æ•°åˆ¶ä½œä¸€ä¸ªå—ï¼Œå—åœ¨åŒºå—é“¾ä¸­ç”¨æ¥å‚¨å­˜æ•°æ®ä¿¡æ¯ï¼Œå®ƒå†…éƒ¨åŒ…å«ä¸Šä¸€ä¸ªåŒºå—çš„hashå€¼è¿æ¥ä¸Šä¸€ä¸ªåŒºå—ï¼ŒåŒ…å«å¤´éƒ¨ä¿¡æ¯æ€»ç»“åŒºå—ï¼Œç„¶åå†åŒºå—æ•°æ®çš„å­˜æ”¾åŒºå­˜æ”¾è¦ä¿å­˜çš„é‡è¦æ•°æ®ã€‚ 123456type Block struct &#123; Timestamp int64//æ—¶é—´æˆ³ Hash []byte//æœ¬èº«å“ˆå¸Œå€¼ PrevHash []byte//æŒ‡å‘ä¸Šä¸€ä¸ªåŒºå— Data []byte//å±æ€§&#125; 2.å¾—åˆ°åŒºå—ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€æ¡åŒºå—é“¾äº†ã€‚ 123type BlockChain struct &#123; Blocks []*Block&#125; è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŒºå—é“¾å°±æ˜¯åŒºå—çš„ä¸€ä¸ªé›†åˆã€‚åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ç”¨æ¥å‚¨å­˜æ¯ä¸ªåŒºå—ã€‚ æŒæ¡äº†å—å’ŒåŒºå—é“¾å°±å¯ä»¥ç»™åŒºå—å®¶ç”µç»†èŠ‚ï¼Œè§‚å¯Ÿä»–ä»¬æ˜¯å¦‚ä½•è¿æ¥èµ·æ¥çš„ã€‚å¯¹äºä¸€ä¸ªåŒºå—è€Œè¨€ï¼Œå¯ä»¥é€šè¿‡å“ˆå¸Œç®—æ³•æ¦‚æ‹¬å…¨éƒ¨çš„ä¿¡å¿ƒï¼Œå“ˆå¸Œå€¼å°±æ˜¯åŒºå—çš„idå€¼ï¼ŒåŒæ—¶ç”¨æ¥æ£€æŸ¥åŒºå—æ‰€åŒ…å«çš„ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚ 3.hashå‡½æ•° é¦–å…ˆåˆ›é€ ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—åŒºå—çš„ä¿¡æ¯ã€‚åŒºå—çš„ä¿¡æ¯è¦è®²æ‰€æœ‰çš„ä¿¡æ¯åˆå¹¶æˆä¸€æ¡å­—èŠ‚ä¸²ä¾›è®¡ç®—å“ˆå¸Œå€¼ã€‚joinå‡½æ•°æ˜¯bytesåŒ…ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œå°†è®¸å¤šçš„åˆ‡ç‰‡è¿æ¥åœ¨ä¸€èµ·ã€‚ ç„¶ååˆ©ç”¨å“ˆå¸Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œ 1234567func (b *Block) SetHash() &#123; information :=bytes.Join([][]byte&#123;ToHexInt(b.Timestamp),b.PrevHash,b.Data&#125;,[]byte&#123;&#125;) //informationæ˜¯æŠŠåŒºå—å„é¡¹å±æ€§ä¸²è”ä¹‹åçš„å­—èŠ‚ä¸² //bytes.joinå¯ä»¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²é“¾æ¥ hash:=sha256.Sum256(information) b.Hash=hash[:]&#125; TOHexIntæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨ä½œå°†intç±»å‹è½¬æ¢byteç±»å‹ã€‚ 12345678func ToHexInt(num int64) []byte &#123; buff := new(bytes.Buffer) err := binary.Write(buff, binary.BigEndian, num) if err != nil &#123; log.Panic(err) &#125; return buff.Bytes()&#125; åˆ›å»ºbytes.Bufferå˜é‡çš„ä¸»è¦ç”¨é€”æ˜¯ç”¨äºé«˜æ•ˆåœ°å¤„ç†å­—èŠ‚æ•°æ®ã€‚ å¤§ç«¯å­—èŠ‚åºï¼ˆBig Endianï¼‰æ˜¯æŒ‡æœ€é«˜ä½å­—èŠ‚åœ¨å†…å­˜ä¸­çš„ä½åœ°å€å¤„ï¼Œä½ä½å­—èŠ‚åœ¨é«˜åœ°å€å¤„ã€‚ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å°ç«¯å­—èŠ‚åºï¼ˆLittle Endianï¼‰ï¼Œå³æœ€ä½ä½å­—èŠ‚åœ¨å†…å­˜ä¸­çš„ä½åœ°å€å¤„ï¼Œé«˜ä½å­—èŠ‚åœ¨é«˜åœ°å€å¤„ã€‚ 1log.Panic(err) ç”¨æ¥åœæ­¢ç¨‹åºè¾“å‡ºé”™è¯¯ã€‚ å¦‚æœéœ€è¦é¢‘ç¹è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œï¼Œä½¿ç”¨æ™®é€šçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ç¼“å†²åŒºï¼ˆBufferï¼‰æ¥ä¼˜åŒ–ã€‚å› ä¸ºbytes.Bufferæ˜¯ä¸€ä¸ªå…·æœ‰è¯»å–å’Œå†™å…¥æ–¹æ³•çš„å¯å˜å¤§å°çš„å­—èŠ‚ç¼“å†²åŒºã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å…ˆå°†éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²å†™å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œå½“ç¼“å†²åŒºæ»¡äº†æˆ–è€…éœ€è¦å°†ç¼“å†²åŒºçš„å†…å®¹è¾“å‡ºæ—¶ï¼Œå†è¿›è¡Œå®é™…çš„IOæ“ä½œã€‚è¿™æ ·å°±å¯ä»¥å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚ è€Œç¼“å†²åŒºæ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—å¤šä¸ªå€¼çš„é€šé“ï¼Œç”¨ä½œå¯å˜å¤§å°çš„åˆ‡ç‰‡ï¼Œä¸å¼ºåˆ¶å¿…é¡»å®Œæˆå‘é€å’Œæ¥å—ã€‚ 4.åŒºå—åˆ›å»ºä¸åˆ›å§‹åŒºå— å¯ä»¥è·å¾—åŒºå—çš„å“ˆå¸Œå€¼äº†ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåˆ›å»ºåŒºå—äº†ã€‚ 12345func CreateBlock(prevhash, data []byte) *Block &#123; block := Block&#123;time.Now().Unix(), []byte&#123;&#125;, prevhash, data&#125; block.SetHash() return &amp;block&#125; ä¸€å®šè¦å¼•ç”¨å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ã€‚ æ–°çš„åŒºå—è¦æœ‰æ—¶é—´æˆ³å’Œä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œä»¥åŠè¿™ä¸ªåŒºå—çš„æ•°æ® 1234func GenesisBlock() *Block &#123; genesisWords := &quot;Hello, blockchain!&quot; return CreateBlock([]byte&#123;&#125;, []byte(genesisWords))&#125; åˆ›ä¸–åŒºå—é‡Œå­˜æ”¾helloè¿™æ®µä¿¡æ¯ï¼Œæ„å»ºå‡½æ•°ä½¿å¾—åŒºå—é“¾å¯ä»¥æ ¹æ®å…¶ä»–çš„ä¿¡æ¯åˆ›å»ºåŒºå—è¿›è¡Œå‚¨å­˜ã€‚ 1234func (bc *BlockChain) AddBlock(data string) &#123; newBlock := CreateBlock(bc.Blocks[len(bc.Blocks)-1].Hash, []byte(data)) bc.Blocks = append(bc.Blocks, newBlock)&#125; appendç”¨æ¥åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ã€‚ åˆ›å»ºåŒºå—é“¾å‡½æ•°ï¼Œé¦–å…ˆæŠŠåˆ›ä¸–åŒºå—ä½œä¸ºç¬¬ä¸€ä¸ªåŒºå— 12345func CreateBlockChain() *BlockChain &#123; blockchain := BlockChain&#123;&#125; blockchain.Blocks = append(blockchain.Blocks, GenesisBlock()) return &amp;blockchain&#125; è¿ä½œä¸€ä¸‹ã€‚ 12345678910111213141516171819func main() &#123; blockchain := CreateBlockChain()// åˆ›å»ºä¸€ä¸ªåŒºå—é“¾å¯¹è±¡ time.Sleep(time.Second)// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰ blockchain.AddBlock(&quot;A&quot;) time.Sleep(time.Second)// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰ blockchain.AddBlock(&quot;B&quot;) time.Sleep(time.Second)// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰ blockchain.AddBlock(&quot;C&quot;) time.Sleep(time.Second)// ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆ1ç§’ï¼‰//éå†åŒºå— for _, block := range blockchain.Blocks &#123; fmt.Printf(&quot;Timestamp: %d\\n&quot;, block.Timestamp) fmt.Printf(&quot;hash: %x\\n&quot;, block.Hash) fmt.Printf(&quot;Previous hash: %x\\n&quot;, block.PrevHash) fmt.Printf(&quot;data: %s\\n&quot;, block.Data) &#125;&#125;","categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-é”™è¯¯","slug":"goland-é”™è¯¯","date":"2023-11-26T08:33:26.000Z","updated":"2023-12-06T07:56:45.872Z","comments":true,"path":"2023/11/26/goland-é”™è¯¯/","link":"","permalink":"http://example.com/2023/11/26/goland-%E9%94%99%E8%AF%AF/","excerpt":"","text":"é”™è¯¯åœ¨Goè¯­è¨€ä¸­ï¼Œé”™è¯¯æ˜¯é€šè¿‡å†…ç½®çš„erroræ¥å£è¡¨ç¤ºçš„ã€‚ åªæœ‰ä¸€ä¸ªError()æ–¹æ³•ç”¨æ¥è¿”å›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚ errorå·¥å‚å‡½æ•°é™¤äº†å¯ä»¥ä½¿ç”¨å…¶ä»–å‡½æ•°ï¼Œè‡ªå·±å®šä¹‰çš„å‡½æ•°ä¹Ÿå¯ä»¥å‘æŒ¥é”™è¯¯ä¿¡æ¯ç»™è°ƒç”¨è€…ã€‚ addå‡½æ•°ä¼šåœ¨aæˆ–è€…bä»»ä½•ä¸€ä¸ªä¸ºè´Ÿæ•°çš„æƒ…å†µä¸‹ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼›å¦‚æœaã€béƒ½ä¸ä¸ºè´Ÿæ•°ï¼Œé”™è¯¯ä¿¡æ¯éƒ¨åˆ†ä¼šè¿”å›nilï¼Œè¿™ä¹Ÿæ˜¯å¸¸è§çš„åšæ³•ã€‚æ‰€ä»¥è°ƒç”¨è€…å¯ä»¥é€šè¿‡é”™è¯¯ä¿¡æ¯æ˜¯å¦ä¸ºnilè¿›è¡Œåˆ¤æ–­ã€‚ä¸‹é¢çš„addå‡½æ•°ç¤ºä¾‹æ˜¯ä½¿ç”¨errors.Newè¿™ä¸ªå·¥å‚å‡½æ•°æ¥ç”Ÿæˆé”™è¯¯ä¿¡æ¯çš„ã€‚errors.Newå‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªerroræ¥å£ã€‚ 1234567func add(a,b int) (int,error)&#123; if a&lt;0||b&lt;0&#123; return 0,errors.New(&quot;a.bä¸èƒ½ä¸ºè´Ÿæ•°&quot;) &#125;else&#123; return a+b,nil &#125;&#125; 123456sum,err:=add(-1,2)if err!=nil&#123; fmt.Println(err)&#125;else &#123; fmt.Println(sum)&#125; è‡ªå®šä¹‰errorä¸Šé¢çš„å·¥å‚å‡½æ•°è¿”å›é”™è¯¯ä¿¡æ¯åªèƒ½ç©¿ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœiæ˜‚è¦æºå¸¦æ›´å¤šä¿¡æ¯ï¼Œå§¿åŠ¿è‡ªå®šä¹‰errorã€‚ 1234567891011121314151617type commonerror struct &#123; errorcode int//é”™è¯¯ç¼–å· errormsg string//æŠ¥é”™å†…å®¹&#125;func (ce *commonerror) Error()string &#123; return ce.errormsg&#125;func add(a,b int) (int,error)&#123; if a&lt;0||b&lt;0&#123; return 0,&amp;commonerror&#123; errormsg: &quot;asd&quot;, errorcode:1&#125; &#125;else&#123; return a+b,nil &#125;&#125; æ„æ€å°±æ˜¯æˆ‘ç¨‹åºçŠ¯é”™ï¼Œcommonerrorå°±ä¼šæŠŠå†…å®¹å†™æˆasdå’Œ1ã€‚ erroræ–­è¨€æ‹¥æœ‰äº†è‡ªå®šä¹‰çš„errorï¼Œæºå¸¦äº†æ›´å¤šçš„é”™è¯¯ä¿¡æ¯åï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚éœ€è¦å…ˆæŠŠè¿”å›çš„erroræ¥å£è½¬æ¢ä¸ºè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ã€‚ 123456sum,err:=add(-1,20)if cm,ok:=err.(*commonerror);ok&#123; fmt.Println(&quot;é”™è¯¯ä»£ç &quot;,cm.errorcode,&quot;é”™è¯¯ä¿¡æ¯&quot;,cm.errormsg)&#125;else &#123; fmt.Println(sum)&#125; æ„æ€å°±æ˜¯å®ç°äº†erroræ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰errorçš„æ•ˆæœã€‚ è¯»èµ·æ¥çœŸæ˜¯ä¸å¤ªç†è§£ï¼Œæ‰¾åŠå¤©æˆ‘çš„Errorç”¨åœ¨å“ªäº†ï¼ŒåŸæ¥æ˜¯å®ç°äº†åº•å±‚çš„æ¥å£ï¼Œæˆ‘å¹²ã€‚ğŸ˜“ 1cm,ok:=err.(*commonerror) æ›´æ˜¯é‡é‡çº§ï¼Œè¿™æ˜¯ä¸ªç±»å‹æ–­è¨€ï¼Œå¦‚æœerræ˜¯è¿™ä¸ªçš„ç±»å‹ï¼Œå°±ç»™èµ‹å€¼cmã€‚ä¸ç„¶å°±è¾“å‡ºsumäº†ã€‚ ä¸å®ç°é‚£ä¸ªErroræ¥å£å°±ä¸èƒ½è¿”å›errorå€¼ï¼Œå°±ä¸èƒ½è‡ªå®šä¹‰äº†ã€‚ å­˜ä¸ªæ¡£ï¼Œé”™è¯¯å¤ªæŠ½è±¡äº†ã€‚ç°åœ¨ç”¨ä¸åˆ°å¤ªå¤šï¼Œä»¥ä¸‹çš„éƒ¨åˆ†ä»¥åå†æ¥æ¢ç´¢å§â€”â€”2023.11.29 é”™è¯¯åµŒå¥—error wrappingåŠŸèƒ½errors.unwrapå‡½æ•°errors.lså‡½æ•°errors.Aså‡½æ•°deferå‡½æ•°panicå‡½æ•°","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-structå’Œinterface","slug":"goland-structå’Œinterface","date":"2023-11-23T04:30:38.000Z","updated":"2023-12-06T07:51:00.711Z","comments":true,"path":"2023/11/23/goland-structå’Œinterface/","link":"","permalink":"http://example.com/2023/11/23/goland-struct%E5%92%8Cinterface/","excerpt":"","text":"ç»“æ„ä½“ç»“æ„ä½“çš„å®šä¹‰è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼Œåç§°ä¸ºIPhoneï¼Œå«æœ‰å­—æ®µname 123type Phone struct &#123; name string&#125; åœ¨å®šä¹‰ç»“æ„ä½“æ—¶ï¼Œå­—æ®µçš„å£°æ˜æ–¹æ³•ä¸å¹³æ—¶å£°æ˜ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å˜é‡ååœ¨å‰ï¼Œç±»å‹åœ¨åï¼Œåªä¸è¿‡åœ¨ç»“æ„ä½“ä¸­ï¼Œå˜é‡åç§°ä¸ºæˆå‘˜åæˆ–å­—æ®µåã€‚ å£°æ˜å’Œä½¿ç”¨123p:=IPhone&#123; name: &quot;ASD&quot;&#125;fmt.Println(p.name) 1p:=IPhone&#123;&quot;ASD&quot;&#125; ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œç”šè‡³å¯ä»¥åªå£°æ˜å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆæ²¡å£°æ˜çš„éƒ¨åˆ†å°±é»˜è®¤é›¶å€¼ ç»“æ„ä½“çš„å­—æ®µ123456type IPhone struct &#123; name string aa kk&#125;type kk struct &#123; id int ç”¨ä»£ç æè¿°ç°å®ä¸­çš„å®ä½“ä¼šæ›´åŒ¹é…ï¼Œå¤ç”¨ç¨‹åº¦ä¹Ÿæ›´é«˜ã€‚å¯¹äºåµŒå¥—ç»“æ„ä½“å­—æ®µçš„ç»“æ„ä½“ï¼Œå…¶åˆå§‹åŒ–ä¸æ­£å¸¸çš„ç»“æ„ä½“å¤§åŒå°å¼‚ï¼Œåªéœ€è¦æ ¹æ®å­—æ®µå¯¹åº”çš„ç±»å‹åˆå§‹åŒ–å³å¯ã€‚ 12345p:=IPhone&#123;name: &quot;s&quot;,aa: kk&#123;6&#125;,&#125; åˆ©ç”¨ç‚¹æ“ä½œç¬¦è°ƒç”¨å­—æ®µçš„å€¼ 1fmt.Println(p.aa.id) æ¥å£æ¥å£çš„å®šä¹‰æ¥å£è¦åšçš„æ˜¯å®šä¹‰å¥½çº¦å®šï¼Œå‘Šè¯‰è°ƒç”¨æ–¹è‡ªå·±å¯ä»¥åšä»€ä¹ˆï¼Œä½†è°ƒç”¨æ–¹ä¸ç”¨çŸ¥é“å®ƒçš„å†…éƒ¨å®ç°ã€‚ æ¥å£çš„å®šä¹‰ä¸ç»“æ„ä½“ç¨å¾®æœ‰äº›å·®åˆ«ï¼Œè™½ç„¶éƒ½ä»¥typeå…³é”®å­—å¼€å§‹ï¼Œä½†æ¥å£çš„å…³é”®å­—æ˜¯interfaceã€‚ 123type Phone interface &#123; speak()&#125; å®šä¹‰ä¸€ä¸ªæ¥å£Phone æ‹¥æœ‰speakæ–¹æ³•ï¼ŒPhoneæ¥å£å‘Šè¯‰è°ƒç”¨è€…ä»–æ‹¥æœ‰æ–¹æ³•speakï¼Œè‡³äºè°speakå¦‚ä½•speakè°ƒç”¨è€…ä¸ç”¨å…³å¿ƒï¼Œè¿™æ˜¯ç”±æ¥å£å®ç°è€…æ¥åšçš„ã€‚ æ¥å£çš„å®ç°æ¥å£çš„å®ç°è€…å¿…é¡»æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹ 123func (a IPhone) speak() string&#123; return &quot;iiii&quot;&#125; è¿™é‡Œç”¨Iphoneæ¥åšç¤ºä¾‹ï¼Œè®©ä»–å®ç°Phoneæ¥å£ã€‚ ç»™Iphoneå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸æ¥å£é‡Œçš„æ–¹æ³•çš„ç­¾åä¸€æ ·ï¼Œè¿™æ ·çš„ç»“æ„ä½“Iphoneå°±å®ç°äº†è¿™ä¸ªPhoneçš„æ¥å£ï¼Œæ¥å£å¹¶æ²¡æœ‰é€šè¿‡ä»»ä½•çš„å…³é”®è¯æ¥å®ç°ï¼Œæ‰€ä»¥goçš„æ¥å£æ˜¯éšå¼å®ç°çš„ã€‚ å¦‚æœä¸€ä¸ªæ¥å£æœ‰è®¸å¤šä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆéœ€è¦å®ç°æ¥å£çš„æ¯ä¸ªæ–¹æ³•æ‰æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ å®ç°äº†æ¥å£ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒäº†ã€‚ 123func print(p Phone)&#123; fmt.Println(p.speak())&#125; å®šä¹‰ä¸€ä¸ªæ¥å£å¯ä»¥ç”¨æ¥æ‰“å°å®ç°Phoneæ¥å£çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªPhoneæ¥å£ç±»å‹çš„å‚æ•°ï¼Œç„¶åæ‰“å°å‡ºï¼Œä¸ç”¨è€ƒè™‘å…·ä½“çš„ç±»å‹å®ç°ã€‚ 12a:=IPhone&#123;&quot;ASD&quot;&#125;print(a) å€¼å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…æœ‰å€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…ä¸¤ç§ã€‚äºŒè€…éƒ½å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼Œå› ä¸ºGoè¯­è¨€ç¼–è¯‘å™¨è‡ªåŠ¨åšäº†è½¬æ¢ï¼Œæ‰€ä»¥å€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯åœ¨æ¥å£çš„å®ç°ä¸­ï¼Œå€¼ç±»å‹æ¥æ”¶è€…å’ŒæŒ‡é’ˆç±»å‹æ¥æ”¶è€…ä¸ä¸€æ ·ã€‚ æŠŠå®ç°è¿‡ç¨‹æ”¹æˆæŒ‡é’ˆï¼Œä¾æ—§å¯ä»¥ç¼–è¯‘è¿è¡Œæ­£å¸¸ã€‚è¿™å°±è¯æ˜äº†ä»¥å€¼ç±»å‹æ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯ç±»å‹æœ¬èº«ï¼Œè¿˜æ˜¯è¯¥ç±»å‹çš„æŒ‡é’ˆç±»å‹ï¼Œéƒ½å®ç°äº†è¯¥æ¥å£ã€‚ 1print(&amp;a) å®ä¾‹ä¸­æ¥æ”¶è€…ï¼ˆa Iphoneï¼‰å®ç°äº†Phoneæ¥å£ï¼Œé‚£ä¹ˆIphoneå’Œä»–çš„æŒ‡é’ˆç±»å‹*Iphoneéƒ½å®ç°äº†Phoneæ¥å£ã€‚ æ¥ä¸‹æ¥æŠŠæ¥æ”¶è€…æ”¹ä¸ºæŒ‡é’ˆç±»å‹ã€‚ 123func (a *IPhone) speak() string&#123; return &quot;iiii&quot;&#125; ä¿®æ”¹æˆæŒ‡é’ˆèµ–å…´æ¥æ”¶è€…åä¼šå‘ç°ï¼Œå®ä¾‹ä¸­çš„printï¼ˆaï¼‰ï¼Œæ²¡åŠæ³•ç¼–è¯‘æˆåŠŸï¼Œé”™è¯¯æ˜¯IPhoneæ²¡æœ‰å®ç°Phoneæ¥å£ï¼Œè¿™å°±è¯æ˜äº†ä»¥æŒ‡é’ˆç±»å‹æ¥æ”¶è€…å®ç°æ¥å£çš„æ—¶å€™ï¼Œåªæœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ‰è¢«è®¤ä¸ºå®ç°äº†æ¥å£ã€‚ å¯ä»¥è¿™æ ·è§£è¯»ï¼šå½“å€¼ç±»å‹ä½œä¸ºæ¥æ”¶è€…æ—¶ï¼Œpersonç±»å‹å’Œpersonç±»å‹éƒ½å®ç°äº†è¯¥æ¥å£ã€‚å½“æŒ‡é’ˆç±»å‹ä½œä¸ºæ¥æ”¶è€…æ—¶ï¼Œåªæœ‰personç±»å‹å®ç°äº†è¯¥æ¥å£ã€‚å¯ä»¥å‘ç°ï¼Œå®ç°æ¥å£çš„ç±»å‹éƒ½æœ‰*personï¼Œè¿™ä¹Ÿè¡¨æ˜æŒ‡é’ˆç±»å‹æ¯”è¾ƒä¸‡èƒ½ï¼Œä¸ç®¡å“ªä¸€ç§æ¥æ”¶è€…ï¼Œå®ƒéƒ½èƒ½å®ç°è¯¥æ¥å£ã€‚ æ¥å£çš„ç†è§£æ˜¯ä¸€ä¸ªå›°éš¾çš„è¿‡ç¨‹,ä»¥ä¸‹æ˜¯æˆ‘ç†è§£æ¥å£çš„è¿‡ç¨‹å’Œç¨‹åºã€‚1.ä½¿ç”¨æ¥å£å’Œä¸ä½¿ç”¨æ¥å£çš„ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨æ¥å£ï¼š 12345678910111213141516171819202122232425262728293031package mainimport &quot;fmt&quot;type Doer interface &#123; Do()&#125;type Foo struct&#123;&#125;func (f Foo) Do() &#123; fmt.Println(&quot;Foo does something.&quot;)&#125;type Bar struct&#123;&#125;func (b Bar) Do() &#123; fmt.Println(&quot;Bar does something else.&quot;)&#125;func DoSomething(d Doer) &#123; d.Do()&#125;func main() &#123; f := Foo&#123;&#125; b := Bar&#123;&#125; DoSomething(f) DoSomething(b)&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£ Doer å’Œä¸¤ä¸ªç»“æ„ä½“ Foo å’Œ Barã€‚Foo å’Œ Bar åˆ†åˆ«å®ç°äº† Doer æ¥å£ã€‚åœ¨ DoSomething å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶ä¸€ä¸ª Doer ç±»å‹çš„å‚æ•°ï¼Œå¹¶è°ƒç”¨å…¶ Do æ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ main å‡½æ•°ä¸­ä¼ å…¥ Foo æˆ– Bar çš„å®ä¾‹ï¼Œä»è€Œä½¿å¾—ä»£ç å…·æœ‰æ›´å¥½çš„çµæ´»æ€§ã€‚ ä¸ä½¿ç”¨æ¥å£ï¼š 12345678910111213141516171819202122232425262728293031package mainimport &quot;fmt&quot;type Foo struct&#123;&#125;func (f Foo) Do() &#123; fmt.Println(&quot;Foo does something.&quot;)&#125;type Bar struct&#123;&#125;func (b Bar) Do() &#123; fmt.Println(&quot;Bar does something else.&quot;)&#125;func DoSomethingWithFoo(f Foo) &#123; f.Do()&#125;func DoSomethingWithBar(b Bar) &#123; b.Do()&#125;func main() &#123; f := Foo&#123;&#125; b := Bar&#123;&#125; DoSomethingWithFoo(f) DoSomethingWithBar(b)&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨æ¥å£ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸º Foo å’Œ Bar åˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•° DoSomethingWithFoo å’Œ DoSomethingWithBarã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ main å‡½æ•°ä¸­è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œä½†ç›¸æ¯”äºä½¿ç”¨æ¥å£çš„æ–¹å¼ï¼Œè¿™ç§è®¾è®¡ç¼ºä¹çµæ´»æ€§ï¼Œå› ä¸ºæ¯ä¸ªå‡½æ•°åªèƒ½å¤„ç†ä¸€ç§ç±»å‹çš„å€¼ã€‚ é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªç¤ºä¾‹çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨æ¥å£å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´å…·æœ‰æŠ½è±¡æ€§ã€å¯æ›¿æ¢æ€§å’Œçµæ´»æ€§ã€‚åœ¨éœ€è¦æŠ½è±¡ã€å¯æ›¿æ¢æ€§æˆ–çµæ´»æ€§çš„åœºæ™¯ä¸­ï¼Œä½¿ç”¨æ¥å£æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ å®ç°æ¥å£çš„ä½œç”¨æ˜¯è®©ç”¨æˆ·çš„ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œç›¸åŒçš„ä»£ç å‡ºç°çš„é¢‘ç‡å˜ä½ï¼Œæ›´ä½çš„è€¦åˆåº¦ã€‚ å·¥å‚å‡½æ•°å·¥å‚å‡½æ•°ä¸€èˆ¬ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çš„ç»“æ„ä½“ï¼Œä¾¿äºä½¿ç”¨è€…è°ƒç”¨ã€‚ 123func new(a string) *IPhone&#123; return &amp;IPhone&#123;name: a&#125;&#125; æˆ‘å®šä¹‰äº†ä¸€ä¸ªå·¥å‚å‡½æ•°new,æ¥å—ä¸€ä¸ªstringçš„ç±»å‹çš„å‚æ•°ï¼Œç”¨äºè¡¨ç¤ºæ‰‹æœºçš„åå­—ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ª*Iphoneã€‚ é€šè¿‡å·¥å‚å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ç»“æ„çš„æ–¹å¼ï¼Œè®©è°ƒç”¨è€…ä¸ç”¨å¤ªå…³æ³¨ç»“æ„ä½“å†…éƒ¨çš„å­—æ®µï¼Œåªç”¨ä¼ ç»™å·¥å‚å‡½æ•°å°±å¯ä»¥äº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738package mainimport &quot;fmt&quot;type Animal interface &#123; Speak() string&#125;type Dog struct&#123;&#125;func (d Dog) Speak() string &#123; return &quot;Woof!&quot;&#125;type Cat struct&#123;&#125;func (c Cat) Speak() string &#123; return &quot;Meow!&quot;&#125;func CreateAnimal(kind string) Animal &#123; switch kind &#123; case &quot;dog&quot;: return Dog&#123;&#125; case &quot;cat&quot;: return Cat&#123;&#125; default: return nil &#125;&#125;func main() &#123; dog := CreateAnimal(&quot;dog&quot;) fmt.Println(dog.Speak()) // è¾“å‡ºï¼šWoof! cat := CreateAnimal(&quot;cat&quot;) fmt.Println(cat.Speak()) // è¾“å‡ºï¼šMeow!&#125; æˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨æ„ç»“æ„ä½“å†…éƒ¨çš„å­—æ®µï¼Œåªéœ€è¦ä¼ ç»™å·¥å‚å‡½æ•°å°±è¡Œäº†ã€‚ ç»§æ‰¿å’Œç»„åˆåœ¨Goè¯­è¨€ä¸­æ²¡æœ‰ç»§æ‰¿çš„æ¦‚å¿µï¼Œæ‰€ä»¥ç»“æ„ä½“ã€æ¥å£ä¹‹é—´ä¹Ÿæ²¡æœ‰çˆ¶å­å…³ç³»ï¼ŒGoè¯­è¨€æå€¡çš„æ˜¯ç»„åˆï¼Œåˆ©ç”¨ç»„åˆè¾¾åˆ°ä»£ç å¤ç”¨çš„ç›®çš„ï¼Œè¿™ä¹Ÿæ›´çµæ´»ã€‚ç±»å‹çš„ç»„åˆå°±æ˜¯å¯ä»¥ç§°ä¹‹ä¸ºåµŒå¥—ã€‚ å½“ç„¶å¯ä»¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Go è¯­è¨€å®ç°çš„ç®€å•åµŒå¥—ç¤ºä¾‹ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåµŒå¥—ç»“æ„ä½“ï¼Œç”¨äºè¡¨ç¤ºå­¦ç”Ÿå’Œè¯¾ç¨‹ä¿¡æ¯ã€‚ 123456789101112131415package mainimport &quot;fmt&quot;type Student struct &#123; Name string Age int Course []Course&#125;type Course struct &#123; Name string Credit int&#125;&#125; æˆ‘ä»¬å…ˆå®šä¹‰äº†ä¸€ä¸ªåä¸º Student çš„ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«äº†å§“åï¼ˆNameï¼‰ã€å¹´é¾„ï¼ˆAgeï¼‰å’Œè¯¾ç¨‹ï¼ˆCourseï¼‰ä¿¡æ¯ã€‚è¯¾ç¨‹ä¿¡æ¯æ˜¯ç”±ä¸€ä¸ªåµŒå¥—ç»“æ„ä½“ Course è¡¨ç¤ºã€‚ ç±»å‹æ–­è¨€æœ‰äº†æ¥å£å’Œå®ç°æ¥å£çš„ç±»å‹ï¼Œå°±ä¼šæœ‰ç±»å‹æ–­è¨€ã€‚ç±»å‹æ–­è¨€ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ¥å£çš„å€¼æ˜¯å¦æ˜¯å®ç°è¯¥æ¥å£çš„æŸä¸ªå…·ä½“ç±»å‹ã€‚ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰ç”¨äºç¡®å®šä¸€ä¸ªæ¥å£å˜é‡ï¼ˆinterface{}ï¼‰å®é™…æŒ‡å‘çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š 1value, ok := interface&#123;&#125;.(T) å…¶ä¸­çš„ value æ˜¯ç±»å‹ä¸º T çš„å€¼ï¼Œok æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ–­è¨€æ˜¯å¦æˆåŠŸã€‚å¦‚æœæ–­è¨€æˆåŠŸï¼Œok ä¸º trueï¼Œvalue åŒ…å«æ¥å£å˜é‡å®é™…æŒ‡å‘çš„å€¼ï¼›å¦‚æœæ–­è¨€å¤±è´¥ï¼Œok ä¸º falseï¼Œvalue ä¸º T ç±»å‹çš„é›¶å€¼ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ç±»å‹æ–­è¨€çš„ç¤ºä¾‹ï¼š 123456789101112131415161718192021package mainimport &quot;fmt&quot;func main() &#123; var x interface&#123;&#125; = &quot;Hello, World!&quot; s, ok := x.(string) if ok &#123; fmt.Println(s) &#125; else &#123; fmt.Println(&quot;æ–­è¨€å¤±è´¥&quot;) &#125; i, ok := x.(int) if ok &#123; fmt.Println(i) &#125; else &#123; fmt.Println(&quot;æ–­è¨€å¤±è´¥&quot;) &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªæ¥å£å˜é‡ xï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸ºå­—ç¬¦ä¸² â€œHello, World!â€ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»å‹æ–­è¨€å°è¯•å°†è¯¥æ¥å£å˜é‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹å’Œæ•´æ•°ç±»å‹ã€‚æˆåŠŸæ—¶ï¼Œok ä¸º trueï¼Œvalue åŒ…å«å®é™…å€¼ï¼›å¤±è´¥æ—¶ï¼Œok ä¸º falseï¼Œvalue ä¸ºç›¸åº”ç±»å‹çš„é›¶å€¼ã€‚ã€‚","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-å‡½æ•°å’Œæ–¹æ³•","slug":"goland-å‡½æ•°å’Œæ–¹æ³•","date":"2023-11-21T11:52:23.000Z","updated":"2023-12-06T07:50:26.577Z","comments":true,"path":"2023/11/21/goland-å‡½æ•°å’Œæ–¹æ³•/","link":"","permalink":"http://example.com/2023/11/21/goland-%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/","excerpt":"","text":"å‡½æ•°å‡½æ•°å£°æ˜12func sum(a int,b int) int&#123; return a+b æ³¨æ„å½¢å‚åååŠ ç±»å‹ å‡½æ•°å®šä¹‰ä»¥ä¸‹éƒ¨åˆ†ï¼š 1.å…³é”®è¯func 2.å‡½æ•°åsum 3.å‡½æ•°å‚æ•°aï¼Œb 4.è¿”å›å€¼ 5.ä»£ç å®ä½“ å¤šå€¼è¿”å›123func sum(a int,b int) (int,error)&#123; return a+b,errors.New(&quot;f&quot;)&#125; erroræ˜¯goè¯­è¨€å†…ç½®çš„é”™è¯¯ä¿¡æ¯ å¯å˜å‚æ•°123456func sum(a ...int) int&#123; sum:=0 for _,a:= range params&#123; sum +=a &#125; return sum è¯¥å¯å˜å‚æ•°é€šè¿‡for rangeå‡½æ•°å¾ªç¯è®¡ç®—è¿™äº›å‚æ•°å€¼å’Œï¼Œå¯å˜å‚æ•°ç±»å‹å…¶å®å°±æ˜¯åˆ‡ç‰‡ï¼Œaçš„å‚æ•°ç±»å‹æ˜¯ã€ã€‘intï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡for rangeè¿›è¡Œå¾ªç¯ã€‚ æ³¨æ„ï¼šå¦‚æœå‚æ•°ä¸­æœ‰å¯å˜å‚æ•°å’Œæ™®é€šå‚æ•°ï¼Œé‚£ä¹ˆå¯å˜å‚æ•°æ”¾åœ¨æœ«å°¾ã€‚ åŒ…çº§å‡½æ•°ä¸è½å®æˆ‘ä»¬ä½¿ç”¨çš„sumè¿˜æ˜¯printlnï¼Œéƒ½æ˜¯ä»å±äºä¸€ä¸ªåŒ…ï¼Œsumå‡½æ•°å±äºmainåŒ…ï¼Œprintlnå±äºfmtåŒ…ï¼ŒåŒä¸€ä¸ªåŒ…å¯ä»¥è°ƒç”¨ï¼Œå½“ä¸åŒçš„åŒ…å‡½æ•°è¦è°ƒç”¨ï¼Œå¿…é¡»æ˜¯å±äºå…±æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„é¦–å­—æ¯è¦å¤§å†™ã€‚ goè¯­è¨€æ²¡æœ‰publicå’Œprivateæ¥åŒºåˆ«å…±æœ‰ç§æœ‰ åŒ¿åå‡½æ•°å’Œé—­åŒ…åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œè¿™æ˜¯å®ƒä¸æ­£å¸¸å‡½æ•°çš„åŒºåˆ«ã€‚ 1234567func main() &#123; sum:= func(a,b int) int &#123; return a+b &#125; fmt.Println(sum(1,2))&#125; sumå°±æ˜¯å¼¥æ˜å‡½æ•°ï¼Œæœ‰äº†åŒ¿åå‡½æ•°å°±å¯ä»¥åœ¨å‡½æ•°ä¸­è¿›è¡Œå‡½æ•°åµŒå¥—ï¼Œå®šä¹‰çš„åŒ¿åå‡½æ•°å«åšå†…éƒ¨å‡½æ•°ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå‡½æ•°å†…å®šä¹‰çš„å†…éƒ¨å‡½æ•°ï¼Œå¯ä»¥ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¿™ç§æ–¹å¼ä¹Ÿå«åšé—­åŒ… æ–¹æ³•æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«åœ¨äºæ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ªæ¥æ”¶è€…ï¼Œæ¥æ”¶è€…æ˜¯ä¸€ä¸ªç±»å‹ï¼Œè¿™æ ·æ–¹æ³•å°±ä¸è¿™ä¸ªç±»å‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œç§°ä¸ºè¿™ä¸ªç±»å‹çš„æ–¹æ³• 12345678910import &quot;fmt&quot;type Age uintfunc (age Age)String()&#123; fmt.Println(age)&#125;func main() &#123;a:=Age(1)a.String()&#125; å¦‚åŒäºç±»ä¸€æ ·ï¼Œå¿…é¡»ä½¿ç”¨ç‰¹å®šç±»å‹çš„æ¥æ”¶è€…æ‰èƒ½è¢«è°ƒç”¨ å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§ï¼Œç®€ä¾¿æ€§ã€‚ å€¼å’ŒæŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…123func (age *Age)S()&#123; *age=Age(30)&#125; 1234a := Age(25)a.String()a.S()a.String() å‘ç°å€¼å˜åŒ–äº†ï¼Œå› ä¸ºæŒ‡é’ˆå¯¹åº”çš„æ›´æ”¹ã€‚ ç¤ºä¾‹ä¸­çš„å˜é‡aå¹¶ä¸æ˜¯æŒ‡é’ˆç±»å‹ï¼Œè€Œæ˜¯goè‡ªåŠ¨æ›´æ”¹çš„ã€‚ ä¹Ÿå¯ä»¥è¿™æ · 1(&amp;a).S() æ‰€ä»¥ä½¿ç”¨æ—¶ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ¥æ”¶è€…ç±»å‹çš„é€‰æ‹©ï¼Œè°ƒç”¨è€…çš„ç±»å‹ä¼šè‡ªå·±è½¬å˜ï¼Œå¤§å¤§æé«˜æ•ˆç‡ã€‚","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-é›†åˆç±»å‹","slug":"goland-é›†åˆç±»å‹","date":"2023-11-21T10:37:49.000Z","updated":"2023-12-06T07:50:15.679Z","comments":true,"path":"2023/11/21/goland-é›†åˆç±»å‹/","link":"","permalink":"http://example.com/2023/11/21/goland-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"æ•°ç»„çš„å£°æ˜1array:=[5]string&#123;&quot;s&quot;,&quot;a&quot;,&quot;a&quot;,&quot;f&quot;&#125; æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„.æ¯ä¸ªå…ƒç´ æœ‰è‡ªå·±çš„ä¸‹æ ‡iï¼ˆndexï¼‰ï¼Œä»0å¼€å§‹ é•¿åº¦åœ¨å®šä¹‰æ—¶å¯ä»¥å–æ¶ˆï¼Œå®ƒä¼šæ ¹æ®å†…å®¹æ•°é‡è‡ªå·±è¿›è¡Œè®¡æ•°ã€‚ 1array:=[]string&#123;&quot;s&quot;,&quot;a&quot;,&quot;a&quot;,&quot;f&quot;&#125; åªç”¨äºæ‰€æœ‰å…ƒç´ éƒ½è¢«åˆå§‹åŒ–çš„åœºæ™¯ï¼Œå¦‚æœæœ‰ç‰¹å®šçš„ç´¢å¼•å…ƒç´ è¢«åˆå§‹åŒ–çš„æƒ…å†µï¼Œå°±ä¸é€‚åˆäº† 1array:=[]string&#123;1:&quot;s&quot;,3:&quot;a&quot;&#125; å…ƒç´ é•¿åº¦ä¸º4ï¼Œä¸ä¸€å®šç¬¦åˆæ ‡å‡† æ•°ç»„çš„å¾ªç¯åˆ©ç”¨rangeè¿›è¡Œéå†ï¼Œiæ˜¯ç´¢å¼•å€¼ï¼Œvæ˜¯å…·ä½“å€¼ 1234array:=[]string&#123;1:&quot;s&quot;,3:&quot;a&quot;&#125;for i,v:=range array&#123; fmt.Printf(&quot;ç´¢å¼• :%d,å¯¹åº” :%v\\n&quot;,i,v) &#125; ç›¸æ¯”ä¹‹ä¸‹for rangeæ›´ä¸ºç®€ä¾¿ 1234for _,v:=range array &#123; fmt.Printf(&quot;å€¼:%v\\n&quot;,v)&#125; _è¡¨ç¤ºè¢«ä¸¢å¼ƒçš„å€¼ åˆ‡ç‰‡åº•å±‚å°±æ˜¯æ•°ç»„ï¼Œå¯¹æ•°ç»„çš„ä»»æ„åˆ†å‰²å¾—åˆ°åˆ‡ç‰‡ï¼ŒåŠ¨æ€æ•°ç»„ 123array:=[]string&#123;&quot;s&quot;,&quot;a&quot;,&quot;q&quot;,&quot;g&quot;&#125;slice:= array[2:4]fmt.Println(slice) åŒ…å«2ä¸åŒ…å«4ç´¢å¼•ä¸‹çš„å€¼ åˆ‡ç‰‡å’Œæ•°ç»„çš„æ“ä½œæ˜¯å·®ä¸å¤šçš„ï¼ŒåŒæ ·å¯ä»¥ç»è¿‡ç´¢å¼•å®šä½å€¼ï¼Œåªä¸è¿‡è¿™é‡Œçš„å€¼æ˜¯é‡æ–°ä»0å¼€å§‹å®šä½çš„ åˆ‡ç‰‡çš„ä¿®æ”¹1234array:=[]string&#123;&quot;s&quot;,&quot;a&quot;,&quot;q&quot;,&quot;g&quot;&#125;slice:= array[2:4]slice[0]=&quot;l&quot;fmt.Println(array) åˆ‡ç‰‡æ‰€è¿ç”¨çš„ä¾æ—§æ˜¯æ•°ç»„çš„åº•å±‚æ•°æ®ï¼Œåˆ‡ç‰‡çš„å€¼æ›´æ”¹ï¼Œç›¸åº”çš„æ•°ç»„ä¹Ÿä¼šè¢«ä¿®æ”¹ åˆ‡ç‰‡çš„å£°æ˜1slice:=make([]string,1,2) 1æ˜¯é•¿åº¦ï¼Œ2æ˜¯å®¹é‡ï¼Œæ„æ€æ˜¯å¼€é˜”ä¸€ä¸ªå®¹é‡ä¸º8çš„ç©ºé—´ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæœ‰æ•°æ®ï¼Œå…¶ä»–çš„å±äºç©ºé—²çŠ¶æ€ åˆ‡ç‰‡å±äºåŠ¨æ€æ•°ç»„ï¼Œç›¸æ¯”äºæ•°ç»„æ›´ä¸ºçµæ´»ï¼Œæ•°ç»„å±äºå€¼ç±»å‹ï¼ŒåŠ¨æ€æ•°ç»„æ˜¯æŒ‡é’ˆç±»å‹ åˆ‡ç‰‡çš„è¿½åŠ 123 silce2:=append(slice1,&quot;f&quot;)silce2:=append(slice1,&quot;f&quot;,&quot;g&quot;)silce2:=append(slice1,slice3...) æ˜ å°„1nameAgeMap:=make(map[string]int) keyå€¼æ˜¯stringç±»å‹ï¼Œvalueåˆ™æ˜¯intç±»å‹,ç„¶åå¯ä»¥è¿›è¡Œæ“ä½œäº† 1nameAgeMap[&quot;SS&quot;=2] éªŒè¯æ˜¯å¦å­˜åœ¨ï¼Œasdæ˜¯valueå€¼ï¼Œokæ˜¯keyå€¼ 123456nameAgeMap:=make(map[string]int)nameAgeMap[&quot;SS&quot;]=2asd,ok:=nameAgeMap[&quot;SS&quot;]if ok&#123; fmt.Println(asd) &#125; mapæ˜¯å¯ä»¥ç”¨for rangeéå†çš„ï¼Œä¸»ä¹‰çš„æ˜¯éå†æ˜¯æ— åºçš„","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-æ§åˆ¶ç»“æ„","slug":"goland-æ§åˆ¶ç»“æ„","date":"2023-11-21T10:15:47.000Z","updated":"2023-12-06T07:49:54.740Z","comments":true,"path":"2023/11/21/goland-æ§åˆ¶ç»“æ„/","link":"","permalink":"http://example.com/2023/11/21/goland-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84/","excerpt":"","text":"1.ifè¯­å¥123456if æ¡ä»¶è¯­å¥ &#123; &#125;erse if æ¡ä»¶è¯­å¥&#123; &#125;else &#123; &#125; 2.switché€‰æ‹©è¯­å¥1.åˆ†æ”¯è¾ƒå¤šé€‰æ‹©switchè¯­å¥.é»˜è®¤ä»ä¸Šåˆ°ä¸‹é€ä¸€åˆ†æ.ä¸€æ—¦æ»¡è¶³æ¡ä»¶å°±ä¼šæ‰§è¡Œå¹¶ä¸”è¿”å›.è‡ªå¸¦breakã€‚ 12345678switch i:=6; &#123; case i&gt;10: fmt.Println(i) case i&gt;5 &amp;&amp; i&lt;10: fmt.Println(i) default: fmt.Println(&quot;i&lt;=5&quot;)&#125; 2.switchåå¸¦è¡¨è¾¾å¼. 1switch i:=6;j å‡å¦‚è®¾ç½® 1var j=3.66 é‚£ä¹ˆ 12345678switch i:=6;j &#123; case i&gt;10: fmt.Println(i) case i&gt;5 &amp;&amp; i&lt;10: fmt.Println(i) default: fmt.Println(&quot;i&lt;=5&quot;)&#125; ä¼šæ•´ä½“æŠ¥é”™.å› ä¸ºcaseåçš„å€¼çš„ç±»å‹å¿…é¡»æ˜¯å’Œï¼›åçš„jç±»å‹ä¸€æ · åŒæ ·ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç±»å‹ç­‰ 3.switchè¯­å¥è¾ƒä¸ºå¼ºå¤§ æ‰€ä»¥è¡¨è¾¾å¼å¯ä»¥å¾ˆéšæ„ 123456789switch 1&lt;5 &#123; case true: fmt.Println(&quot;t&quot;) case false: fmt.Println(&quot;f&quot;) default: fmt.Println(&quot;n&quot;) &#125; 3.forè¯­å¥123for ç®€å•è¯­å¥;æ¡ä»¶;æ›´æ–°è¯­å¥ &#123; &#125;","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"goland-å˜é‡å¸¸é‡","slug":"goland-å˜é‡å¸¸é‡","date":"2023-11-17T06:32:30.000Z","updated":"2023-12-06T07:50:49.533Z","comments":true,"path":"2023/11/17/goland-å˜é‡å¸¸é‡/","link":"","permalink":"http://example.com/2023/11/17/goland-%E5%8F%98%E9%87%8F%E5%B8%B8%E9%87%8F/","excerpt":"","text":"å˜é‡å¸¸é‡å®šä¹‰1.æ™®é€šå®šä¹‰æ–¹æ³• 1var i int = 2 2.é»˜è®¤intç±»å‹.goè¯­è¨€æœ‰ç±»å‹æ¨å¯¼çš„ä½œç”¨ 1var i=10 3.ç®€çŸ­å£°æ˜ 1i:=10 4.ä¸€æ¬¡å¤šä¸ªå£°æ˜ 1234var(j int=0k =0) ç±»å‹1.æ•´å½¢ï¼šåˆ†ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ç±»å‹ æœ‰ç¬¦å·ç±»å‹int,int8,int16â€¦æ— ç¬¦å·ç±»å‹uint,uint8â€¦ å·®åˆ«åœ¨äºæœ‰ç¬¦å·æ•´å½¢çš„è¡¨ç¤ºå¯ä»¥ä¸ºè´Ÿæ•° 2.æµ®ç‚¹å‹ï¼šç›¸è¾ƒäºfloat32è€Œè¨€float64æ˜¯æ›´å¸¸ç”¨çš„æµ®ç‚¹å‹.ç›¸æ¯”ä¹‹ä¸‹ç²¾åº¦æ›´é«˜.è¯¯å·®æ›´å° 123var f32 float32 =6.3663363663var f64 float64 =5.662626fmt.Println(f32,f64) å®è¡Œä»£ç å‘ç°64ä½ä¸¢å¤±æ•°æ®æ›´å°‘ 3.å¸ƒå°”ç±»å‹ å¸ƒå°”ç±»å‹åªæœ‰falseå’Œtrueä¸¤ç§.ä¹Ÿå¯ç”¨äºä¸€å…ƒæ“ä½œç¬¦ï¼ äºŒå…ƒæ“ä½œç¬¦&amp;&amp;å’Œ||é€»è¾‘ä¸å’Œé€»è¾‘æˆ– 4.å­—ç¬¦ä¸² å­—ç¬¦ä¸²ç±»å‹é€šè¿‡stringæ¥å£°æ˜.+å·å¯ä»¥ç”¨æ¥å­—ç¬¦ä¸²çš„ç›¸åŠ  123var s1=&quot;sss&quot;var s2 = &quot;aaa&quot;println(s1+s2) åœ°å€12pi:=&amp;i//piæŒ‡å‘içš„åœ°å€ å¸¸é‡123456789101112//constå®šä¹‰å¸¸é‡//iotaç”¨æ¥åˆå§‹åŒ–å¸¸é‡çš„const(one=1two=2three=3)const(one=1+itoatwo three)//ä¸¤ä¸ªä»£ç æ•ˆæœæ˜¯ä¸€æ ·çš„ æ ¼å¼è½¬æ¢goè¿›è¡Œä½¿ç”¨å’Œè®¡ç®—å¼åŒç±»å‹çš„å˜é‡å¿…é¡»è¿›è¡Œè½¬æ¢ ä¸‹é¢æ˜¯intç±»å‹å’Œstringç±»å‹çš„è½¬æ¢æ–¹å¼ 1234var i=3s:=strconv.Itoa(i)d,err:=strconv.Atoi(s)fmt.Println(s,d,err) å¼ºåˆ¶è½¬æ¢intå’Œfloatç±»å‹ 12i2f:=float64(i)f2i:=int(f64)","categories":[{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"}],"tags":[{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"}]},{"title":"çˆ¬è™«çˆ¬å–bç«™è§†é¢‘","slug":"çˆ¬è™«çˆ¬å–bç«™è§†é¢‘","date":"2023-11-15T04:25:28.000Z","updated":"2023-12-06T07:49:28.988Z","comments":true,"path":"2023/11/15/çˆ¬è™«çˆ¬å–bç«™è§†é¢‘/","link":"","permalink":"http://example.com/2023/11/15/%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96b%E7%AB%99%E8%A7%86%E9%A2%91/","excerpt":"","text":"å°è¯•ç”¨pythonçˆ¬å–bilibiliçš„è§†é¢‘ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445import os#ç”¨äºæ“ä½œç³»ç»Ÿçš„äº¤æ¢æ¨¡å—import requests#å‘é€httpè¯·æ±‚æ¨¡å—import json#è§£æjsonimport re#æ­£åˆ™è¡¨è¾¾å¼from pprint import pprint#ç¾è§‚æ‰“å°è¾“å‡ºjson#è¾“å…¥è§†é¢‘ç½‘å€.åªè¾“å…¥å‰åŠéƒ¨åˆ†ã€‚#ç½‘å€æ ¼å¼æœ€ååˆ°/BV****/url=r&#x27;https://www.bilibili.com/video/BV15H4y1o7UH/&#x27;#è®¾ç½®è¯·æ±‚å¤´header=&#123; &quot;User-Agent&quot;:&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0&quot;, &quot;Preferer&quot;:&quot;https://www.bilibili.com/&quot;&#125;resp=requests.get(url=url,headers=header)#è·å–http#print(resp.text)# è·å–ç½‘é¡µ.baseurlæ˜¯è§†é¢‘åœ°å€obj=re.compile(r&#x27;window.__playinfo__=(.*?)&lt;/script&gt;&#x27;,re.S)html_data=re.findall(obj,resp.text)[0]#è¿”å›ä¸€ä¸ªåˆ—è¡¨#æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”åŒ¹é…ç½‘é¡µè§†é¢‘éŸ³é¢‘#è½¬å­—ç¬¦ä¸²åˆ°json#print(html_data)json_data=json.loads(html_data)#pprint(json_data)#æ ¼å¼åŒ–è¾“å‡º#videoå’Œaudioåˆ†åˆ«æ˜¯è§†é¢‘å’ŒéŸ³é¢‘.çˆ¬å–ä¸‹æ¥éœ€è¦åˆæˆvideos=json_data[&#x27;data&#x27;][&#x27;dash&#x27;][&#x27;video&#x27;]#åˆ—è¡¨video_url=videos[0][&#x27;baseUrl&#x27;]#è§†é¢‘åœ°å€audios=json_data[&#x27;data&#x27;][&#x27;dash&#x27;][&#x27;audio&#x27;]audios_url=audios[0][&#x27;baseUrl&#x27;]#éŸ³é¢‘åœ°å€#ä¸‹è½½è§†é¢‘éŸ³é¢‘resp1=requests.get(url=video_url,headers=header)with open(&#x27;test.mp4&#x27;,mode=&#x27;wb&#x27;) as f: f.write(resp1.content)resp2=requests.get(url=audios_url,headers=header)with open (&#x27;test.mp3&#x27;,mode=&#x27;wb&#x27;) as f: f.write(resp2.content)#çˆ¬å–å®Œæˆåˆå¹¶è§†é¢‘éŸ³é¢‘#åˆ©ç”¨ffmpegåˆå¹¶command=r&#x27;ffmpeg -i test.mp4 -i test.mp3 -acodec copy -vcodec copy testout.mp4&#x27;os.system(command=command) ç„¶åå·¦ä¾§æ–‡ä»¶å¤¹å‡ºç°çˆ¬å–çš„è§†é¢‘éŸ³é¢‘å’Œåˆæˆçš„è§†é¢‘ã€‚ å…³äºæˆ‘ä»£ç è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œè§£å†³çš„è¿‡ç¨‹1.ç½‘é¡µå¼€å‘è€…æ¨¡å¼è·å–è¿‡ç¨‹ä¸­éš¾ä»¥æ‰¾åˆ°è¯·æ±‚å¤´.åˆ·æ–°è§£å†³ã€‚2.ffmpegçš„ç¯å¢ƒæ­å»ºå‡ºé—®é¢˜.é€šè¿‡å®˜ç½‘ä¸‹è½½æ’ä»¶.å°†æ–‡ä»¶å¤¹ä¸­binä½ç½®æ·»åŠ åˆ°pathå˜é‡ä¸­ã€‚ 1.cmdæµ‹è¯•å®‰è£… 1&gt;ffmpeg 2.pipå®‰è£…ffmpy 1pip install ffmpy 3.pipå®‰è£…ffmpy3ï¼ˆç›®å‰ ffmpy3 å…·æœ‰ffmpegå’Œffprobeå‘½ä»¤çš„åŒ…è£…å™¨ï¼‰ 1pip install ffmpy3 * æˆ‘çš„é—®é¢˜è¿™é‡Œå°±è§£å†³äº†.æ— æ³•è§£å†³è¿˜æœ‰é…ç½®è·¯å¾„çš„æ–¹æ³•* 3.ä»£ç å®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ã€‚4.é™„åŠ ffmpyçš„ä¸‹è½½é€”å¾„ã€‚ Builds - CODEX FFMPEG @ gyan.dev ä¸‹è½½æ³¨æ„ä¸è¦ä¸‹è½½æºç ç‰ˆæœ¬ 5.å‡ºç°ä¸­æ–‡ä¹±ç .è®¾ç½®è°ƒutl-8å’Œç”µè„‘è®¾ç½®é‡Œçš„åŒºåŸŸä¸­å‹¾é€‰utl-8ã€‚6.æ³¨æ„loadå’Œloadsçš„ç”¨æ³•loadçš„æ˜¯æ–‡ä»¶æµå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç”„åˆ«ã€‚7.é¦–å…ˆæ­£åˆ™è¡¨è¾¾å¼è·å–æ‰èƒ½ç”¨ç›¸åº”çš„å­—ç¬¦ä¸²ä»£ç è¿›è¡Œæ“ä½œã€‚","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"}]}],"categories":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://example.com/categories/%E7%AE%97%E6%B3%95/"},{"name":"goland","slug":"goland","permalink":"http://example.com/categories/goland/"},{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"}],"tags":[{"name":"åŒºå—é“¾","slug":"åŒºå—é“¾","permalink":"http://example.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"name":"goland","slug":"goland","permalink":"http://example.com/tags/goland/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://example.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"}]}